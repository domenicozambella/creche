% !TEX root = creche.tex
\chapter{Theories and elementarity}
\label{teorie}

\def\medrel#1{\parbox[t]{6ex}{$\displaystyle\hfil #1$}}
\def\ceq#1#2#3{\parbox{15ex}{$\displaystyle #1$}\medrel{#2}$\displaystyle  #3$}

\section{Logical consequences}\label{conseguenzelogiche}
% 
% Let $p\subseteq L_{x}$ a set of formulas with free variables among $x$.
% Let $a\in M^x$ for some model $M$.
% We write \emph{$M,a\models p$ if $M\models\phi(a)$ for every $\phi(x)\in p$.
% If $q\subseteq L_{x}$ we write \emph{$p\proves q$\/}
% 
% \begin{itemize}
% \item[] $M,a\models p\ \ \IMP\ \ M,a\models q$\hfill for every $M$ and every $a\in M^x$.
% \end{itemize}
% 
% In words, we say that $q$ is a \emph{logical consequence\/}  of $p$ or that $q$ \emph{follows from\/} $p$.
% The same notation and terminology is applied to formulas by identifying $\phi$ with $\{\phi\}$.
% 
% The \emph{closure of $p$ by logical consequence\/} is the set $\ccl(p)$ whis is defined as follows: 
% 
% \begin{itemize}
% \item[] \emph{$\ccl(p)$}$\ \ =\ \ \Big\{\phi\in L_{x}\ :\ \textrm{ sentence such that } p\proves\phi\Big\}$
% \end{itemize}
% 
% If $p$ is a finite set, say $p=\{\phi_1,\dots,\phi_n\}$ we write $\ccl(\phi_1,\dots,\phi_n)$ for $\ccl(p)$.
% If $p=\ccl(p)$ we say that $p$ is \emph{closed under logical consequences}.

A \emph{theory\/} is a set $T\subseteq L$ of sentences.
We write \emph{$M\models T$\/} when $M\models\phi$ for every $\phi\in T$.
If $\phi\in L$ is a sentence we write \emph{$T\proves\phi$\/} when

\ceq{\hfill M\models T}{\IMP}{M\models\phi}\qquad for every $M$.

In words, we say that $\phi$ is a \emph{logical consequence\/} of $T$ or that $\phi$ \emph{follows from\/} $T$.
If $S$ is a theory \emph{$T\proves S$\/} has a similar meaning.
If $T\proves S$ and $S\proves T$ we say that $T$ and $S$ are \emph{logically equivalent.}
We may say that $T$ \emph{axiomatizes\/} $S$ (or vice versa).

We say that a theory is \emph{consistent\/} if it has a model.
With the notation above, $T$ is consistent if and only if \emph{$T\notproves\bot$.}


The \emph{closure of $T$ under logical consequence\/} is the set $\ccl(T)$ which is defined as follows:  

\ceq{\hfill\emph{$\textrm{ccl}(T)$}}{=}{\Big\{\phi\in L\ :\ \textrm{ sentence such that } T\proves\phi\Big\}}

If $T$ is a finite set, say $T=\big\{\phi_1,\dots,\phi_n\big\}$ we write $\ccl(\phi_1,\dots,\phi_n)$ for $\ccl(T)$.
If $T=\ccl(T)$ we say that $T$ is \emph{closed under logical consequences.}

The \emph{theory of $M$\/} is the set of sentences that hold in $M$ and is denoted by \emph{$\Th(M)$.}
More generally, if $\K$ is a class of structures, \emph{$\Th(\K)$} is the set of sentences that hold in every model in $\K$.
That is

\ceq{\hfill\Th(\K)}{=}{\bigcap_{M\in\K}\Th(M)}

The class of all models of $T$ is denoted by \emph{$\textrm{Mod}(T)$.}
We say that $\K$ is \emph{axiomatizable\/} if $\Mod(T)=\K$ for some theory $T$.
If $T$ is finite we say that $\K$ is \emph{finitely axiomatizable.}
To sum up

\ceq{\hfill\Th(M)}{=}{\Big\{\phi\ :\ M\models\phi\Big\}}

\ceq{\hfill\Th(\K)}{=}{\Big\{\phi\ :\ M\models\phi \textrm{ for all }M\in\K\Big\}}

\ceq{\hfill\Mod(T)}{=}{\Big\{M\ :\ M\models T\Big\}}


\begin{example}\label{Tg}
Let $L$ be the language of multiplicative groups.
Let $T_{\rm g}$ be the set containing the universal closure of following three formulas
\begin{itemize}
\item[1.]\ \  $(x\cdot y)\cdot z\ =\ x\cdot(y\cdot z)$
\item[2.]\ \  $ x\cdot x^{-1}\ =\ x^{-1}\cdot x\ =\ 1$
\item[3.]\ \  $x\cdot 1\ =\ 1\cdot x\ =x$.
\end{itemize}
Then $T_{\rm g}$ axiomatizes the theory of groups, i.e.\@ $\Th(\K)$ for $\K$ the class of all groups.
Let $\phi$ be the universal closure of the following formula
\begin{itemize}
\item[]\ \  $\ z\cdot x\ =\  z\cdot y\ \imp\ x\ =\ y$.
\end{itemize}
As $\phi$ formalizes the cancellation property then $T_{\rm g} \proves\phi$, that is, $\phi$ is a logical consequence of $T_{\rm g}$.
Now consider the sentence $\psi$ which is the universal closure of
\begin{itemize}
\item[4.]\ \  $x\cdot y\ =\ y\cdot x$.
\end{itemize}
So, commutative groups model $\psi$ and non commutative groups model $\neg\psi$.
Hence neither $T_{\rm g}\proves\psi$ nor $T_{\rm g}\proves\neg\psi$.
We say that $T_{\rm g}$ \emph{does not decide\/} $\psi$.
\end{example}

Note that even when $T$ is a very concrete set, $\ccl(T)$ may be more difficult to grasp.
In the example above $T_{\rm g}$ contains three sentences but $\ccl(T_{\rm g})$ is an infinite set containing sentences that code theorems of group theory yet to be proved.

\begin{remark}
The following properties say that $\ccl$ is a finitary closure operator.
\begin{itemize}
\item[1.] $T\subseteq\ccl(T)$\hfill (extensive)
\item[2.] $\ccl(T)\;=\;\ccl\big(\ccl(T)\big)$\hfill(idempotent)
\item[3.] $T\subseteq S\ \ \IMP\ \ \ccl(T)\subseteq\ccl(S)$\hfill (increasing) 
\item[4.] $\ccl(T)\ \ =\ \ \bigcup\big\{\ccl(S)\ :\ S \textrm{ finite subset of } T\big\}$.\hfill (finitary)
\end{itemize}
Properties \ssf{1}-\ssf{3} are easy to verify while \ssf{4} requires the compactness theorem.
\end{remark}

In the next example we list a few algebraic theories with straightforward axiomatization.

\begin{example}
We write $T_{\rm ag}$ for the theory of abelian groups which contains the universal closure of following
\begin{itemize}
\item[a1.] $(x+y) +z\ =\ y+(x+z)$
\item[a2.] $x+(-x)\ =\ 0$
\item[a3.] $x+0\ = \ x$
\item[a4.] $x+y\ =\ y+x$.
\end{itemize}
\end{example}

\begin{example}
The theory $T_{\rm r}$ of (unitary) rings extends $T_{\rm ag}$ with
\begin{itemize}
\item[a5.] $(x\cdot  y)\cdot  z\  =\ x\cdot (y\cdot  z)$
\item[a6.] $1\cdot  x\ =\ x\cdot  1\ =\ x$
\item[a7.] $(x+y)\cdot  z\ =\ x\cdot  z + y\cdot  z$
\item[a8.] $z\cdot  (x+y)\ =\ z\cdot  x + z\cdot  y$.
\end{itemize}
The theory of commutative rings $T_{\rm cg}$ contains also \ssf{com} of examples~\ref{Tg}.
\end{example}

\begin{example}
The theory of ordered rings $T_{\rm or}$ extends $T_{\rm cr}$ with
\begin{itemize}
\item[o1.] $x<z\ \imp\ x+y<z+y$
\item[o2.] $0<x \wedge 0<z\ \imp\ 0<x\cdot z$.
\end{itemize}
\end{example}

\begin{example}\label{ex_ax_vect_sp}
The axiomatization of the \emph{theory of vector spaces\/} is less straightforward.
Fix a field $F$.
%
The language $L_F$ extends the language of additive groups with a unary function for every element of $F$.
The theory of vector fields over $F$ extends $T_{\rm ag}$ with the following axioms (for all $h,k,l\in F$)
\begin{itemize}
\item[m1.] $h\,(x+y)\ =\ h\,x+h\,y$
\item[m2.] \parbox{25ex}{$l\,x\ =\ h\,x+k\,x$,} where $l\ =\ h+_Fk$
\item[m3.] \parbox{25ex}{$l\,x\ =\ h\,(k\,x)$,} where $l\ =\ h\cdot_Fk$
\item[m4.] $0_F\,x\ =\ 0$
\item[m5.] $1_F\,x\ =\ x$
\end{itemize}
The symbols $0_F$ and $1_F$ denote the zero and the unit of $F$.
The symbols $+_F$ and $\cdot_F$ denote the sum and the product in $F$.
These are not part of $L_F$, they are symbols we use in the metalanguage.
\end{example}

\begin{example}\label{expl_Tgraphs}
Recall from Example~\ref{expl_graph1} that we represent a graph with a symmetric irreflexive relation.
Therefore \emph{theory of graphs\/} contains the following two axioms

\begin{itemize}
\item[1.] $\neg r(x,x)$
\item[2.] $r(x,y)\imp r(y,x)$.
\end{itemize}
\end{example}

Our last example is a trivial one.

\begin{example}
Let $L$ be the empty language The \emph{theory of infinite sets\/} is axiomatized by the sentences $\E^{\ge n} x\ (x=x)$ for all positive integer $n$.
\end{example}


\begin{exercise}
Prove that $\ccl(\phi\vee \psi)=\ccl(\phi)\cap\ccl(\psi)$.
\end{exercise}

% \begin{exercise}\label{modus ponens}
% Prove that $T\cup\{\phi\}\proves\psi$ then $T\proves\phi\imp\psi$.
% \end{exercise}

\begin{exercise}
Prove that $\Th(\Mod(T))=\ccl(T)$.
\end{exercise}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Elementary equivalence}\label{eqel}
The following is a fundamental notion in model theory.

\begin{definition}\label{def_el_eq}
We say that $M$ and $N$ are \emph{elementarily equivalent\/} if
\begin{itemize}
\item[ee.] $N\models\phi\ \ \IFF\ \ M\models \phi$,\hspace{4ex} for every sentence $\phi\in L$.
\end{itemize}
In this case we write \emph{$M\equiv N$.}
More generally, we write \emph{$M\equiv_A N$\/} and say that $M$ and $N$ are elementarily equivalent \emph{over $A$\/} if the following hold
\begin{itemize}
\item[a.] $A\subseteq M\cap N$
\item[ee'.] equivalence \ssf{ee} above holds for every sentence $\phi\in L(A)$.
\end{itemize} 
\end{definition}

The case when $A$ is the whole domain of $M$ is particularly important.

\begin{definition}\label{def_el_sub}
When $M\equiv_M N$ we say that $M$ is an \emph{elementary substructure\/} of $N$ and write \emph{$M\preceq N$.}
\end{definition}

The following lemma shows that the use of the term \textit{substructure\/} in the definition above is appropriate.

\begin{lemma}\label{eqelsubstructure}
If $M$ and $N$ are such that $M\equiv_AN$ and $A$ is the domain of a substructure of $M$ then $A$ is also the domain a substructure of $N$ and the two substructures coincide.
\end{lemma}
\begin{proof}
Let $f$ be a function symbol and ler $r$ be a relation symbol.
It suffices to prove that  
$f^M(a)=f^N(a)$ for every $a\in A^{n_f}$ and that $r^M\cap A^{n_r}=r^N\cap A^{n_r}$.

If $b\in A$ is such that $b=f^Ma$ then $M\models fa=b$.
So, from $M\equiv_AN$, we obtain $N\models fa=b$, hence $f^Na=b$.
This proves $f^M(a)=f^N(a)$.

Now let $a\in A^{n_r}$ and suppose $a\in r^M$.
Then $M\models ra$ and, by elementarity, $N\models ra$, hence $a\in r^N$.
By symmetry $r^M\cap A^{n_r}=r^N\cap A^{n_r}$ follows.
\end{proof}

It is not easy to prove that two structures are elementary equivalent.
A direct verification is unfeasible even for the most simple structures.
It will take a few chapters before we are able to discuss concrete examples.

We generalize the definition of $\Th(M)$ to include parameters 

\hfil\emph{$\Th(M/A)$}\ \ =\ \ $\Big\{\phi\ :\ \textrm{ sentence in }L(A)\textrm{  such that }\  M\models\phi\Big\}$.

The following proposition is immediate

\begin{proposition}\label{equivalentielementareequivaleza}
For every pair of structures $M$ and $N$ and every $A\subseteq M\cap N$ the following are equivalent
\begin{itemize}
\item[a.] $M\equiv_A N$
\item[b.] $\Th(M/A)=\Th(N/A)$
\item[c.] \parbox{27ex}{$M\models\phi(a)\ \ \IFF\ \ N\models \phi(a)$}  for every $\phi(x)\in L$ and every $a\in A^x$.
\item[d.]  \parbox{27ex}{$\phi(M) \cap A^x\ =\ \phi(N) \cap A^x$} for every $\phi(x)\in L$.
\end{itemize}
\end{proposition}

If we restate \ssf{a} and \ssf{c} of the proposition above when $A=M$ we obtain that the following are equivalent
\begin{itemize}
\item[a'.] $M\preceq N$
\item[d'.] \parbox{26ex}{$\phi(M)\ =\ \phi(N) \cap M^x$} for every $\phi(x)\in L$.
\end{itemize}
Note that \ssf{c'} extends to all definable sets what Definition~\ref{sottostrutturadef} requires for a few basic definable sets.

\begin{example}
Let $G$ be a group which we consider as a structure in the multiplicative language of groups.
We show that if $G$ is simple and $H\preceq G$ then also $H$ is simple.
Recall that $G$ is simple if all its normal subgroups are trivial, equivalently, if for every $a\in G\sm \{1\}$ the set $\big\{gag^{-1}\,:\,g\in G\big\}$ generates the whole group $G$.


Assume $H$ is not simple.
Then there are $a,b\in H$ such that $b$ is not the product of elements of $\big\{hah^{-1}\,:\,h\in H\big\}$.
Then for every $n$ 

\hfil$H\ \models\ \neg\E x_1,\dots,x_n\ \ \big(b\ \ =\ \ x_1ax_1^{-1}\cdot\cdot\cdot\ x_nax_n^{-1}\big)$

By elementarity the same hold in $G$.
Hence $G$ is not simple.
\end{example}

% \begin{exercise}
%   The language contains only $<$, the relation of strict order.
%   Prove that $\omega$ is not elementary equivalent to $\omega+\omega$.
%   \end{exercise}

\begin{exercise}\label{ex_finitanaturaeqel}
Let $A\subseteq M\cap N$.
Prove that $M\equiv_A N$ if and only if $M\equiv_B N$ for every finite $B\subseteq A$.
\end{exercise}

\begin{exercise}\label{ex_finite_elemenrary}
Let $M\preceq N$ and let $\phi(x)\in L(M)$.
Prove that $\phi(M)$ is finite if and only if $\phi(N)$ is finite and in this case $\phi(N)=\phi(M)$.
\end{exercise}

\begin{exercise}\label{ex_finite_fam_sets}
Let $M\preceq N$ and let $\phi(x,z)\in L$.
Suppose there are finitely many sets of the form $\phi(a,N)$ for some $a\in N^x$.
Prove that all these sets are definable over $M$.
\end{exercise}

\begin{exercise}\label{ex_Z^nZ^m_nonelementary}
Consider $\ZZ^n$ as a structure in the additive language of groups with the natural interpretation.
Prove that $\ZZ^n\not\equiv\ZZ^m$ for every positive integers $n\neq m$.
Hint: in $\ZZ^n$ there are at most $2^n$ elements that are not congruent modulo $2$.
\end{exercise}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{A nonstandard example}
\label{nonstandard}
\def\nsR{{}^*\kern-.2ex\RR}
\def\nsN{{}^*\kern-.2ex\NN}
\def\nsQ{{}^*\kern-.2ex\QQ}
\def\ns{{}^*\kern-.2ex}
\def\st{{\rm st}}

This section concerns an example that is useful to look at in some detail to get some familiarity with the notion of elementary substructure.
The example is culturally interesting, because it formalises rigorously the notions of infinity and infinitesimal, which were used in Newton and Leibniz's time to develop real analysis.
These notions were not well defined - in fact, they were inconsistent.

It was only in the mid 19th century that mathematicians of Weiertsrass' generation developed the notion of limit, thus providing rigorous grounds for the development of analysis.

Nonstandard analysis was developed by Abraham Robinson in the 1950s.
Robinson found a way to formalise the ideas of infinity and infinitesimals through the concept of elementary extension.

The notation that follows will be used throughout this section.

The language we use contains
\begin{itemize}
\item[1.] $X$, a relation symbol of arity $n$, for every $n\in\omega$ and every $X\subseteq \RR^n$
\item[2.] $f$, a function symbol of arity $n$, for every $n\in\omega$ and every  $f:\RR^n\imp\RR$.
\end{itemize}
The \emph{standard model of real analysis} is $\RR$ with the natural interpretation of the symbols in our language, so we use the same symbol for an element of the language and its interpretation in $\RR$.
This is not an abuse of notation: in this case, elements and interpretations coincide.

Suppose $\RR$ has a proper elementary extension \emph{$\nsR$.} The existence of such an extension will be proved later.
 The interpretations of the symbols $f$ and $X$ in \emph{$\nsR$} will be denoted by  \emph{$\ns f$} and \emph{$\ns X$,} respectively.
The elements of $\nsR$ are called \emph{hyperreals,} the elements of  $\RR$ are called \emph{standard (hyper)reals,} those in $\nsR\sm\RR$ are called \emph{nonstandard (hyper)reals.}

It is easy to verify that $\nsR$ is an ordered field.
This is because the operations sum and product are in the language, and so is the order relation.
The property of being an ordered field can be expressed via a set of sentences  that are true in $\RR$, and hence also in $\nsR$.

A hyperreal $c$ is said to be \emph{infinitesimal} if $|c|<\epsilon$ for every positive standard $\epsilon$.
A hyperreal $c$ is \emph{infinite} if $k<|c|$ for every standard $k$; the hyperreal $c$ if \emph{finite} otherwise.
Hence if $c$ is infinite, then $c^{-1}$ is infinitesimal.
Clearly, all standard reals are finite, and $0$ is the only infinitesimal standard real.

The proof of the following lemma is left to the reader.

\begin{fact}\label{prodottosommainfinitesimi}
Infinitesimals are closed under sum, product and multiplication by standard reals.
\end{fact}

We begin with an existence proof.

\begin{lemma}\label{lem_esistenzainfinitesimi}
  There are infinite nonstandard hyperreals and nonzero infinitesimals.
  Moreover, for every finite hyperreal $c$ there is a unique standard $b$ such that $b-c$ is infinitesimal.
\end{lemma}
\begin{proof}
If $c\in\nsR$ in infinite then $c^{-1}$ is infinitesimal and if $c$ is a nonzero infinitesimal, then $c^{-1}$ is infinite.
Then the first claim follows from the second one.
Let $c$ be finite.
The set $\big\{ a\in\RR: c<a\big\}$ is a nonempty set of (standard) reals that is bounded from below.
Let $b\in\RR$ the least upper bound.
We show that $b-c$ is a infinitesimal.
Assume for a contradiction that $\epsilon < |b-c|$ for some standard positive $\epsilon$.
Then $c<b-\epsilon$, or $b+\epsilon< c$, depending on whether $c<b$ or $b<c$.
Both cases contradict that $b$ is an infimum.
This proves the existence of $b$.

To prove uniquenes, suppose that $b'\in\RR$ and $b'-c$ is also infinitesimal.
Then $b-b'$ is also infinitesimal.
As $0$ is the only standard infinitesimal $b=b'$.
\end{proof}

The existence of infinite non standard hyperreals shows that $\nsR$ is not archimedean: standard integers are not cofinal in $\nsR$.
However, by elementarity, the nonstandard integers $\nsN$ are cofinal in $\nsR$: from the perspective of an inhabitant of $\nsR$, the latter is a normal archimedean field.


Dedekind completeness is another fundamental property of $\RR$ that does not hold in~$\nsR$.
An ordered set is \emph{Dedekind complete} if every subset that is bounded above has a least upper bound.
Then $\nsR$ is not Dedekind complete, e.g.\@ the set of infinitesimals does not have a least upper bound.
However, it is easy to verify that all bounded definable subsets of $\nsR$ have a least upper bound.
It follows that Dedekind completeness is \textit{not\/} a first-order property.
 
% The lemma concerns parameter-definable sets in $\nsR$, otherwise the proof would be immediate.

% \begin{proof}  Let $x$ be a single variable, $a$ a tuple of parameters in $\nsR$ and let $\phi(z,x)$ be a pure formula.
%  We want to show that if  $\phi(a,\nsR)$ is bounded above then it has a least upper bound.
% The following formula $\psi(z,y)$ says that $y$ is an upper bound for the set defined by $\phi(z,x)$, where $z$ is a tuple of parameters:

% \hfil $\psi(z,y)\ \ =\ \  \A x\ \big[\phi(z,x)\imp x\le y\big]$.

% The following formula $\xi(z,w)$ says that $w$ is the least upper bound of the set defined by $\phi(z,x)$.


% \hfil $\xi(z,w)\ \ =\ \  \psi(z,w)\ \wedge\ \A y\ \big[\psi(z,y)\imp w\le y\big]$.

% So we must show that in $\nsR$ we have $\E y\,\psi(z,y)\ \imp\ \E w\,\xi(z,w)$.
% But this is a first order formula that holds in $\RR$, and therefore it holds in every elementary extension of $\RR$.
% \end{proof}

We define the following equivalence relation on $\nsR$: we write \emph{$a\approx b$\/} if $|a-b|$ is infinitesimal.
The fact that this is an equivalence relation follows from Fact~\ref{prodottosommainfinitesimi}.
The equivalence class of $c$ is called \emph{monad.}
By Lemma~\ref{lem_esistenzainfinite} if $c$ is a finite hyperreal, there is a unique real in the monad of $c$.

Hyperreals that are not finite are said to be \emph{infinite.}
If $c$ is finite, the unique standard real in the monad of $c$ is called \emph{standard part\/} of $c$ and it is denoted by \emph{$\st(c)$.}

In the following lemma, the expressions on the left can be formalised as first-order sentences, and therefore they hold in $\RR$ if and only if they hold in $\nsR$.

\begin{proposition}\label{prop_fattolimitinonstandard}
For every $f:\RR\to\RR$, for every $a, l\in\RR$ the following equivalences hold.\nobreak
\begin{itemize}
\item[a.]\parbox{7ex}{\hfil$\displaystyle\lim_{x\to+\infty}$}
\parbox{10ex}{$fx\;=+\infty$}
\parbox{5ex}{\hfil$\IFF$}
$\ns f(c)$ is positive and infinite for every infinite $c>0$

\item[b.]\parbox{7ex}{\hfil$\displaystyle\lim_{x\to+\infty}$}
\parbox{10ex}{$fx\;=\;l$}
\parbox{6ex}{\hfil$\IFF$}
$\ns f(c)\approx l$ for every infinite $c>0$

\item[c.]\parbox{7ex}{\hfil$\displaystyle\lim_{x\to a}$}
\parbox{10ex}{$fx\;=+\infty$}
\parbox{5ex}{\hfil$\IFF$}
$\ns f(c)$ is positive and infinite for every $c\approx a\neq c$

\item[d.]\parbox{7ex}{\hfil$\displaystyle\lim_{x\to a}$}
\parbox{10ex}{$fx\;=\;l$}
\parbox{5ex}{\hfil$\IFF$}
$\ns f(c)\approx l$ for every for every $c\approx a\neq c$.
\end{itemize}
\end{proposition}

\begin{proof}
We prove part \ssf{d} and we leave the other parts as an exercise.

$\IMP$.
The left-hand side of the equivalence \ssf{d} asserts


\ceq{\ssf1\hfill\RR}{\models}{\A\,\epsilon>0\ \E\,\delta>0\ \A x\ \Big[0<|x-a|<\delta\ \ \imp\ \ |fx-l|<\epsilon\Big].}

For consistency with standard notation in analysis, we use the Greek letters $\epsilon$ and $\delta$ as variables.
The symbols $\dot\epsilon$ e $\dot\delta$ denote parameters either in $\RR$ or in $\nsR$.

Pick $c\neq a\approx c$ arbitrarily.
We now check that $\ns f(c)\approx l$, that is, $|\ns fc-l|<\dot\epsilon$ for every positive standard $\dot\epsilon$.
Pick $\dot\epsilon\in\RR^+$ arbitralily and let $\dot\delta\in\RR$ be given by \ssf{1}.
By elementarity, we have

\ceq{\hfill\ns\RR}{\models}{\phantom{\A\,\epsilon>0\ \E\,\delta>0}\ \A x\ \Big[0<|x-a|<\dot\delta\ \ \imp\ \ |fx-l|<\dot\epsilon\Big].}

In particular

\ceq{\hfill\ns\RR}{\models}{\phantom{\A\,\epsilon>0\ \E\,\delta>0\ \A x\ \Big[}0<|c-a|<\dot\delta\ \ \imp\ \ |fc-l|<\dot\epsilon.}

As $0<|c-a|<\dot\delta$ certainly holds (because $\dot\delta$ is standard) $|\ns fc-l|<\dot\epsilon$ follows.


$\PMI$.
Assume that \ssf{1} is false, that is,

\ceq{\ssf2\hfill\RR}{\models}{\E\,\epsilon>0\ \A\,\delta>0\ \E x\ \Big[0<|x-a|<\delta\ \ \wedge\ \ \epsilon\le|fx-l|\Big].}

We want to show that $\ns f(c)\not\approx l$ for some $c\neq a$.
Let $\dot\epsilon\in\RR$ witness \ssf2.
By elementarity we have

\ceq{\hfill\ns\RR}{\models}{\phantom{\E\,\epsilon>0}\ \A\,\delta>0\ \E x\ \Big[0<|x-a|<\delta\ \ \wedge\ \ \dot\epsilon\le|fx-l|\Big].}

Let $\dot\delta$ be an arbitrary infinitesimal.
Then 

\ceq{\hfill\ns\RR}{\models}{\phantom{\E\,\epsilon>0\ \A\,\delta>0}\ \E x\ \Big[0<|x-a|<\dot\delta\ \ \wedge\ \ \dot\epsilon\le|fx-l|\Big].}

Any $c$ that witnesses the above formula is such that $c\approx a\neq c$ and, simultaneously, $\epsilon\le |\ns fc-l|$.
But $\dot\epsilon$ is standard, hence $\ns fc\not\approx l$.
\end{proof}


The following corollary is immediate.

\begin{corollary} \label{continuo} For every $f:\RR\to\RR$ the following are equivalent
\begin{itemize}
\item[a.] $f$ is continuous
\item[b.] $\ns f(a)\approx \ns f(c)$ for every pair of finite hyperreals such that $c\approx a$.
\end{itemize}
\end{corollary}

In Corollary~\ref{continuo}, it is important to restrict \ssf{c} to \textit{finite\/} hyperreals, otherwise we get a stronger property.

\begin{proposition}\label{prop_unif_cont}
   For every $f:\RR\to\RR$, the following are equivalent
\begin{itemize}
\item[a.] $f$ is uniformly continuous
\item[b.] $\ns f(a)\approx\ns  f(b)$ for every pair of hyperreals such that $a\approx b$.
\end{itemize}
\end{proposition}

\begin{proof}
\ssf{a}$\IMP$\ssf{b}.
Assume \ssf{a}, then

\ceq{\ssf1\hfill\RR}{\models}{\A\,\epsilon>0\ \E\,\delta>0\ \A x, y\ \Big[|x-y|<\delta\ \ \imp\ \ |fx-fy|<\epsilon\Big].}

Let $a\approx b$.
We want to show that $|\ns f(a)-\ns f(b)|<\dot\epsilon$ for every positive standard $\dot\epsilon$.
Given a standard positive $\dot\epsilon$, let $\dot\delta$ be a standard real obtained from \ssf{1}.
Now elementarity gives

\ceq{\ssf2\hfill\RR}{\models}{\phantom{\A\,\epsilon>0\ \E\,\delta>0}\ \A x, y\ \Big[|x-y|<\dot\delta\ \ \imp\ \ |fx-fy|<\dot\epsilon\Big].}

Hence, in particular,

\ceq{\hfill\ns\RR}{\models}{\phantom{\A\,\epsilon>0\ \E\,\delta>0\ \A x, y\ \Big[}|a-b|<\dot\delta\ \ \imp\ \ |fa-fb|<\dot\epsilon.}

Since $a\approx b$ andd $\dot\delta$ is standard, $|a-b|<\dot\delta$ is true.
Therefore $|\ns f(a)-\ns f(b)|<\dot\epsilon$.

\ssf{b}$\IMP$\ssf{a}.
Negate \ssf{a}

\ceq{\ssf3\hfill\RR}{\models}{\E\,\epsilon>0\ \A\,\delta>0\ \E x, y\ \Big[|x-y|<\delta\ \ \wedge\ \ \epsilon\le|fx-fy|\Big]}

We want  $a\approx b$ such that $\dot\epsilon\le|\ns f(a)-\ns f(b)|$ for some positive standard $\dot\epsilon$.
Let $\dot\epsilon$ be a standard real that witnesses \ssf{3}.
Elementarity gives

\ceq{\hfill\ns\RR}{\models}{\phantom{\E\,\epsilon>0}\ \A\,\delta>0\ \E x, y\ \Big[|x-y|<\delta\ \ \wedge\ \ \dot\epsilon\le|fx-fy|\Big].}

Pick an arbitrary infinitesimal $\dot\delta>0$ and let $a,b\in\nsR$ be given by the formula above

\ceq{\hfill\ns\RR}{\models}{\phantom{\E\,\epsilon>0\ \A\,\delta>0\ \E x, y\ \Big[}|a-b|<\delta\ \ \wedge\ \ \dot\epsilon\le|fa-fb|.}

Since $\dot\delta$ is infinitesimal, we have $a\approx b$, as required.

The following proposition is an immediate consequence of Proposition~\ref{prop_fattolimitinonstandard}.

\begin{proposition}
For every unary function $f$ and every standard $a$, the following are equivalent.
\begin{itemize}
\item[a.] $f$ is differentiable in $a$
\item[b.] ${\rm st}\left(\displaystyle\frac{f(a)-f(a+h)}{h}\right)$ exists and is constant for all infinitesimal $h\neq0$.
\end{itemize}
\end{proposition}


%Nel passato si sono sperimentati approcci didattici alternativi al calcolo classico basati sull'analisi non standard.
% Il testo di  H.
% Jerome Keisler, \textit{Foundations of infinitesimal calculus}, disponibile in rete con licenza \cc is un elegante tentativo di insegnare l'analisi reale a studenti del prim'anno usando l'analisi nonstandard ma senza assumere prerequisiti di logica.

\begin{exercise}\label{ex_dedekindcomplete}
  Every definable (possibly with parameters) subset of $\nsR$ that is bounded from above has a least upper bound.
\end{exercise}

\begin{exercise}
Prove that if the function $f:\RR\to\RR$ is injective, then  $\ns f a$ is nonstantard whenever $a$ is nonstandard.
\end{exercise}

\begin{exercise}
Prove that the following are equivalent for every subset $X\subseteq\RR$\nobreak
\begin{itemize}
\item[1.]  $X$ is a finite set
\item[2.]  $\ns X=X$.
\end{itemize}
\end{exercise}

\begin{exercise}\label{ex_open_nstd}
Prove that the following are equivalent for every subset $X\subseteq\RR$\nobreak
\begin{itemize}
\item[1.]  $X$ is an open set in the usual topology on $\RR$
\item[2.]  $b\approx a\in X \ \ \IMP\ \ b\in\ns X$ for every $b\in\nsR$.
\end{itemize}
\end{exercise}

\begin{exercise}\label{ex_closed_nstd}
Prove that the following are equivalent for every subset $X\subseteq\RR$\nobreak
\begin{itemize}
\item[1.]  $X$ is closed in the usual topology on $\RR$
\item[2.]  $a\in\ns X \ \ \IMP\ \ \st\, a\in X$ for every finite $a\in\nsR$.
\end{itemize}
\end{exercise}


\begin{exercise}\label{ex_bclosed_nstd}
  Prove that the following are equivalent for every subset $X\subseteq\RR$\nobreak
  \begin{itemize}
  \item[1.]  $X$ is bounded and closed in the usual topology on $\RR$
  \item[2.]  for every $b\in \ns X$ there is an $a\in X$ such that $a\approx b$.
  \end{itemize}
\end{exercise}

\begin{exercise}\label{ex_clopen_nstd}
  For what sets $X \subseteq \RR$ does the following hold for every $a,b\in\nsR$\,?
  \begin{itemize}
  \item[] $b\approx a\in\ns X \ \IMP\ b\in\ns X$.
  \end{itemize}
\end{exercise}

\begin{exercise}\label{ex_card_nstd}
Prove that $|\RR|\;\le\;|\nsQ|$, that is, that the cardinality of $\nsQ$ is at least that of the continuum.
(Hint: define an injective function $f:\RR\to\nsQ$ by choosing a nonstandard rational in the monad of every standard real.) 
\end{exercise}

\begin{exercise}\label{ex_Q_nstd}
  Prove that every proper elementary extension of $\QQ$ in the language of rings plus a relation symbol for every subset of $\QQ$ has infinities and infinitesimals.
\end{exercise}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Embeddings and isomorphisms}\label{Embeddings and isomorphisms}

\def\ceq#1#2#3{\parbox[b]{18ex}{$\displaystyle #1$}\parbox[b]{6ex}{\hfil$#2$}$\displaystyle #3$}

Here we prove that isomorphic structures are elementarily equivalent and a few related results.
The following definition generalizes the notion of substructure (and will be further generalized in Section~\ref{morphisms}).

\begin{definition}\label{isomorfismodef}
An \emph{embedding\/} of $M$ into $N$ is an injective total map $h:M\hookrightarrow N$ such that

\ceq{\ssf{1.}\hfill a\in r^M}{\IFF}{ha\in r^N}\hfill for every $r\in L_{\rm rel}$ and $a\in M^{n_r}$;

\ceq{\ssf{2.}\hfill h\, f^M(a)}{=}{f^N(h\,a)}\hfill for every $f\in L_{\rm fun}$ and $a\in M^{n_f}$.

Note that when $c\in L_{\rm fun}$ is a constant \ssf{2} reads $h\,c^M=c^N$.
Therefore $M\subseteq N$ if and only if $\id_M:M\imp N$ is an embedding.

An surjective embedding is an \emph{isomorphism} or, when domain and codomain coincide, an \emph{automorphism}.
\end{definition}

Condition \ssf{1} above and the assumption that $h$ is injective can be summarized in the following

\ceq{\ssf{1$'$.}\hfill M\models r(a)}{\IFF}{N\models r(ha)}\hfill for every $r\in L_{\rm rel}\cup\{\doteq\}$ and every $a\in M^{n_r}$.

Note also that, by straightforward induction on syntax, from \ssf{2} we obtain

\ceq{\ssf{2$'$}\hfill h\,t^M(a)}{=}{t^N(h\,a)}\hfill for every term $t(x)$ and every  $a\in M^x$.

Combining \ssf{1$'$} and \ssf{2$'$} we obtain by straightforward induction on the syntax

\ceq{\ssf{3.}\hfill M\models\phi(a)}{\IFF}{N\models\phi(ha)}\hfill for every $\phi(x)\in L_{\rm qf}$ and every $a\in M^x$.

Recall that we write $L_{\rm qf}$ for the set of quantifier-free formulas.
It is worth noting that when $M\subseteq N$ and $h=\id_M$ then \ssf{3} becomes 

\ceq{\ssf{3$'$}\hfill M\models \phi(a)}{\IFF}{N\models \phi(a)}\hfill for every $\phi(x)\in L_{\rm qf}$ and for every $a\in M^x$.

In words this is summarized by saying that the truth of quantifier-free formulas is preserved under sub- and superstructure.

Finally, we prove that first order truth is preserved under isomorphism.
We say that a map $h:M\to N$ \emph{fixes\/} $A\subseteq M$ (pointwise) if $\id_A\subseteq h$.
An isomorphism that fixes $A$ is also called an \emph{$A$-isomorphism.}

\begin{theorem}\label{isomorfoeleq}
If $h:M\imp N$ is an isomorphism then for every $\phi(x)\in L$

\ceq{\hfill M\models \phi(a)}{\IFF}{N\models \phi(ha)} for every $a\in M^x$

In particular, if $h$ is an $A$-isomorphism then $M\equiv_A N$.
\end{theorem}

\begin{proof}
  We proceed by induction on the syntax of $\phi(x)$.
  When $\phi(x)$ is atomic \# holds by \ssf{3} above.
  Induction for the Boolean connectives is straightforward so we only need to consider the existential quantifier.
  Assume as induction hypothesis that


  \ceq{\hfill M\models \phi(a,b)}{\IFF}{N\models \phi(ha,hb)} for every $a\in M^x$ and $b\in M$.

We prove that the equivalence in the theorem holds for the formula $\E y\,\phi(x,y)$.



\ceq{\hfill M\ \models\ \E y\;\phi(a,y)}{\IFF}{M\models\phi(a,b)} for some $b\in M$

\ceq{}{\IFF}{N\models\phi(ha,hb)} for some $b\in M$\hfill (by induction hypothesis)

\ceq{}{\IFF}{N\models\phi(ha,c)}for some $c\in N$\hfill ($\PMI$ by surjectivity)

\ceq{}{\IFF}{N\models\E y\,\phi(ha,y).}
\end{proof}


\begin{corollary}\label{corol_def_set_invariant}
If $h:M\imp N$ is an isomorphism then for every $\phi(x)\in L$.

\ceq{\hfill h\big[\phi(M)\big]}{=}{\phi(N)}
\end{corollary}

We can now give a few very simple examples of elementarily equivalent structures.

\begin{example}\label{expl_ordini_elem}
Let $L$ be the language of strict orders.
Consider the intervals of $\RR$ as structures in the natural way.
The intervals $[0,1]$ and $[0,2]$ are isomorphic, hence $[0,1]\equiv[0,2]$ follows from Theorem~\ref{isomorfoeleq}.
Clearly, $[0,1]$ is a substructure of $[0,2]$.
However $[0,1]\npreceq [0,2]$, in fact the formula $\A  x\,(x\le1)$ holds in $[0,1]$ but is false in $[0,2]$.
This shows that $M\subseteq N$ and $M\equiv N$ does not imply $M\preceq M$.

Now we prove that $(0,1)\preceq (0,2)$.
By Exercise~\ref{ex_finitanaturaeqel} it suffices to verify that for every finite $B\subseteq(0,1)$ we have $(0,1)\equiv_B  (0,2)$.
This follows again from Theorem~\ref{isomorfoeleq} as $(0,1)$ and $(0,2)$ are $B$-isomorphic for every finite $B\subseteq(0,1)$.
\end{example}

% \begin{exercise}\label{eximmersioni}
% Si dimostri che se $h:M\imp N$ is un'immersione allora $h[M]$ is a substructure of $N$ e $h:M\imp h[M]$ is un isomorfismo.
% \end{exercise}

For the sake of completeness we also give the definition of homomorphism.

\begin{definition}\label{def_homomorphism}
A \emph{homomorphism} is a total map $h:M\to N$ such that

\ceq{\ssf{1.}\hfill a\in r^M}{\IMP}{ha\in r^N}\qquad for every $r\in L_{\rm rel}$ and $a\in M^{n_r}$;\smallskip\par

\ceq{\ssf{2.}\hfill h\,f^M(a)}{=}{f^N(h\,a)}\qquad  for every $f\in L_{\rm fun}$ and $a\in M^{n_f}$.

Note that only one implication is required in \ssf{1}.
\end{definition}

\begin{exercise}
Prove that if $h:N\imp N$ is an automorphism and $M\preceq N$ then $h[M]\preceq N$.
\end{exercise}

\begin{exercise}
Let $L$ be the empty language.
Let $A,D\subseteq M$.
Prove that the following are equivalent
\begin{itemize}
 \item[1.] $D$ is definable over $A$
 \item[2.] either $D$ is finite and $D\subseteq A$, or $\neg D$ is finite and $\neg D\subseteq A$.
\end{itemize}
Hint: as structures are plain sets, every bijection $f:M\to M$ is an automorphism.
\end{exercise}

\begin{exercise}\label{dlorlkurb}
Prove that if $\phi(x)$ is an existential formula and $h:M\hookrightarrow N$ is an embedding then

\ceq{\hfill M\models \phi(a)}{\IMP}{N\models \phi(ha)}\hfill for every $a\in M^x$.

Recall that existential formulas as those of the form $\E y\,\psi(x,y)$ for $\psi(x,y)\in L_{\rm qf}$.
Note that Theorem~\ref{thm_embeddings_preservation_E} proves that the property above characterizes existential formulas.

\end{exercise}

\begin{exercise}\label{ex_Z_odd_existential}
Let $M$ be the model with domain $\ZZ$ in the language of additive groups which is interpreted in the natural way.
Prove that there is no existential formula $\phi(x)$ such that $\phi(M)$ is the set of odd integers.
Hint: use Exercise~\ref{dlorlkurb}.
\end{exercise}


\begin{exercise}\label{ex_Q_odd}
Let $\QQ^+$ be the multiplicative group of positive rationals.
Let $M$ be the subgroup of the numbers of the form $n/m$ for some odd integers $m$ and $n$.
Prove that $M\preceq\QQ^+$.
Hint: use the fundamental theorem of arithmetic and reason as in Example~\ref{expl_ordini_elem}.
\end{exercise}

\begin{exercise} 
  Prove that, in the language of strict orders, $\RR\sm\{0\}\preceq \RR$ and $\RR\sm\{0\}\not\simeq \RR$.
\end{exercise}
  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Quotient structure}\label{quotient}
\def\ceq#1#2#3{\parbox[b]{20ex}{$\displaystyle #1$}\parbox[b]{6ex}{\hfil$#2$}$\displaystyle #3$}

The content of this section is mainly technical and only required later in the course.
Its reading may be postponed.


If $\mathrel{E}$ is an equivalence relation on $N$ we write \emph{$[c]_E$\/} for the equivalence class of $c\in N$.
We use the same symbol for the equivalence relation on $N^n$ defined as follow: if $a=a_1,\dots,a_n$ and $b=b_1,\dots,b_n$ are $n$-tuples of elements of $N$ then \emph{$a\mathrel{E} b$\/} means that  $a_i\mathrel{E} b_i$ holds for all $i$.
It is easy to see that $b_1,\dots,b_n\in [a, ..., a_n]_E$ if and only if $b_i \in [a_i]_E$ for all $i$.
 Therefore we use the notation \emph{$[a]_E$\/} for both the equivalence class of $a\in N^n$ and the tuple of equivalence classes $[a_1]_E,\dots,[a_n]_E$.

\begin{definition}\label{def_congruence}
We say that the equivalence relation $\mathrel{E}$ on a structure $N$ is a \emph{congruence\/} if for every $f\in L_{\rm fun}$

\ceq{\ssf{c1}.\hfill a\mathrel{E} b}{\IMP}{f^N a\mathrel{E} f^N b;}

When $\mathrel{E}$ is a congruence on $N$ we write \emph{$N/E$\/} for the a structure that has as domain the set of $E$-equivalence classes in $N$ and the following interpretation of $f\in L_{\rm fun}$ and $r\in L_{\rm rel}$:

\ceq{\ssf{c2.}\hfill f^{N/E}[a]_E}{=}{\big[f^N a\big]_E\,;}

\ceq{\ssf{c3.}\hfill [a]_E\ \in\ r^{N/E}}{\IFF}{[a]_E\cap r^{N}\neq\0.}

We call $N/E$ the \emph{quotient structure.}
\end{definition}

By \ssf{c1} the quotiont structure is well defined.
The reader will recognize it as a familiar notion by the following proposition (which is not required in the following and requires the notion of homomorphism, see Definition~\ref{def_homomorphism}.
Recall that the \emph{kernel\/} of a total map $h:N\to M$ is the equivalence relation $\mathrel{E}$ such that

\ceq{\hfill a\mathrel{E} b}{\IFF}{ha=hb} 

for every $a,b\in N$.

\begin{proposition}
Let $h:N\to M$ be a surjective homomorphism and let $E$ be the kernel of $h$.
Then there is an isomorphism $k$ that makes the following diagram commute

\hspace*{25ex}\begin{tikzcd}
 N \arrow{r}{h}\arrow{d}{\pi} & M \\[3ex]
 N/E \arrow{ur}{k}
\end{tikzcd}

where $\pi:a\mapsto [a]_E$ is the projection map.
\end{proposition}

\noindent\llap{\textcolor{red}{\Large\danger}\kern1.5ex}%
Quotients clutter the notation with brackets.
To avoid the mess, we prefer to reason in $N$ and tweak the satisfaction relation.
Warning: though this is what everyone informally does, it is rarely spelled out so, feel free to reguard the following as a pedantry.
In a nutshell, we are going to define the satisfaction relation $N/E\pmodels\phi(a)$ as an abbreviation of $N/E\models\phi([a]_E)$.

Recall that in model theory, equality is not treated as a all other predicates.
In fact, the interpretation of equality is fixed to always be the identity relation.
In a few contexts is convinient to allow any congruence to interprete equality.
This allows to work in $N$ while thinking of $N/E$.

%So, we replace equality with $\mathrel{E}$ and adapt the interpretation of relation symbols according to \ssf{c3} above.
We define $N/E\pmodels\;$ to be $N\models\;$ but with equality interpreted with $\mathrel{E}$.
The proposition below shows that this is the same thing as the regular truth in the quotient structure,  $N/E\models$.

\begin{definition}\label{def_pseudostructure}
For $t_2$, $t_2$ closed terms of $L(N)$ define

\ceq{\ssf{1$^*$}\hfill N/E\ \emph{$\pmodels$}\ t_1=t_2}{\IFF}{t_1^N\,E\;t_2^N}

For $t$ a tuple of closed terms of $L(N)$ and $r\in L_{\rm rel}$ a relation symbol

\ceq{\ssf{2$^*$}\hfill N/E\ \pmodels\ r\,t}{\IFF}{t^N\,E\;a}\quad for some $a\in r^N$

Finally the definition is extended to all sentences $\phi\in\ L(N)$ by induction in the usual way

\ceq{\ssf{3$^*$}\hfill N/E\ \pmodels\neg\phi}{\IFF}{\textrm{not }\ N/E\,\pmodels\phi}

\ceq{\ssf{4$^*$}\hfill N/E\ \pmodels\phi\wedge\psi}{\IFF}{N/E\ \pmodels\phi\ \textrm{ and }\ N/E\ \pmodels\psi}

\ceq{\ssf{5$^*$}\hfill N/E\ \pmodels\E x\,\phi(x)}{\IFF}{N/E\ \pmodels\phi(a)}\quad for some $a\in N$.
\end{definition}

% Note that if we treat $=$ as a relation symbol  (i.e.\@ not as a logical symbol) and interpret it with $E$, clause \ssf{1$^*$} becomes an instance of \ssf{2$^*$} in fact
% 
% 
% \ceq{\hfill t_1^N\mathrel{E}t_2^N}{\IFF}{[t^N_1,t^N_2]_E\cap E\neq \0}
% 
% by transitivity of $E$.


Now, by induction on the syntax of formulas one can prove $\pmodels$ does what required.
In particular, $N/E\ \pmodels\ \phi(a)\iff\phi(b)$ for every $a\mathrel{E} b$.

\begin{proposition}\label{prop_pseudomodel}
Let $\mathrel{E}$ be a congruence relation of $N$.
Then the following are equivalent for every $\phi(x)\in L$

\ceq{\ssf{1.}\hfill N/E}{\pmodels}{\phi(a);}

\ceq{\ssf{2.}\hfill N/E}{\models}{\phi\big([a]_E\big).}
\end{proposition}

% \begin{proof}
% First note that \ssf{c1} and \ssf{c2} above generalize to terms
% 
% \ceq{\ssf{c1'}.\hfill a\mathrel{E} b}{\IMP}{t^N a\mathrel{E} t^N b;}
% 
% \ceq{\ssf{c2'.}\hfill t^{N/E}[a]_E}{=}{\big[t^N a\big]_E\,.}
% 
% So if $\phi(x)$ is atomic, say it is the formula $rt(x)$ for $r\in L_{\rm rel}\cup\{=\}$ and $t(x)$ is a tuple of terms, then the equivalence \ssf{1}$\IFF$\ssf{2} follows from Definition~\ref{def_pseudostructure}.
% For general $\phi(x)$ the equivalence is proved by straightforward induction on the syntax.

% \end{proof}

%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%
\section{Completeness}

A theory $T$ is \emph{maximally consistent\/} if it is consistent and there is no consistent theory $S$ such that $T\subset S$.
Equivalently, $T$ contains every sentence $\phi$ \emph{consistent with\/} $T$, that is, such that $T\cup\{\phi\}$ is consistent.
Clearly a maximally consistent theory is closed under logical consequences.

A theory $T$ is \emph{complete\/} if $\ccl T$ is maximally consistent.
Concrete examples will be given in the next chapters as it is not easy to prove that a theory is complete.

\begin{proposition}\label{fattoconsistenzasen4sostretto}
The following are equivalent
\begin{itemize}
\item[a.] $T$ is maximally consistent
\item[b.] $T=\Th(M)$ for some structure $M$
\item[c.] $T$ is consistent and $\phi\in T$ or $\neg\phi\in T$ for every sentence $\phi$.
\end{itemize}
\end{proposition}
\begin{proof}
To prove \ssf{a}$\IMP$\ssf{b}, assume that $T$ is consistent.
Then there is $M\models T$.
Therefore $T\subseteq\Th (M)$.
As $T$ is maximally consistent $T=\Th(M)$.
Implication \ssf{b}$\IMP$\ssf{c} is immediate.
 As for \ssf{c}$\IMP$\ssf{a} note that if $T\cup\{\phi\}$ is consistent then $\neg\phi\not\in T$ therefore $\phi\in T$ follows from \ssf{c}.
\end{proof}

The proof of the proposition below is is left as an exercise for the reader.

\begin{proposition}\label{fattoconsistenzasensolato}
The following are equivalent
\begin{itemize}
\item[a.] $T$ is complete
\item[b.] there is a unique maximally consistent theory $S$ such that $T\subseteq S$
\item[c.] $T$ is consistent and $T\proves\Th(M)$ for every $M\models T$
\item[d.] $T$ is consistent and either $T\proves\phi$ or $T\proves\neg\phi$ for every sentence $\phi$
\item[e.] $T$ is consistent and $M\equiv N$ for every pair of models of $T$.
\end{itemize}
\end{proposition}
% \begin{proof}
% \ssf{a}$\,\IMP\,$\ssf{b}.
% Assume \ssf{a}, then $\ccl(T)$ is maximally consistent.
% If $T\subseteq S$ then $\ccl(T)\subseteq\ccl(S)=S$.
% If $S$ is maximally consistent then $\ccl(T)=S$.
% \ssf{b}$\IMP$\ssf{c}.
% Assume \ssf{b}.
% The consistency of $T$ follows from the existence of $S$.
% So, let $M\models T$ and $M\models\phi$.
% be such that MIf for a contradiction $M\models T$ and $T\notproves\Th(M)$ esisterebbe $N\models T$ such that $N\notmodels\Th(M)$ quindi $\Th(N)\neq\Th(M)$.
% Ma $\Th(M)$ e $\Th(N)$ sono coerenti massimali.
% Questo contraddice l'unicit\`a.
%  Dimostriamo \ssf{c}$\IMP$\ssf{d}.
% Assumiamo \ssf{c} e sia $\phi$ un sentence such that $T\notproves\phi$.
% Quindi esiste un modello $M$ such that $M\models T$ e $M\notmodels\phi$.
% Quindi $\neg\phi\in\Th(M)$ e \ssf{d} segue da $T\proves\Th(M)$.
% Dimostriamo la contronominale di \ssf{d}$\IMP$\ssf{e}.
% Siano $M\nequiv N$ due modelli di $T$ e fissiamo un sentence $\phi$ such that $M\models\phi$ e $N\models\neg\phi$.
% Quindi non is vero n\'e $T\proves\phi$ n\'e $T\proves\neg\phi$.
%  Dimostriamo \ssf{e}$\IMP$\ssf{a}.
% Assumiamo \ssf{e} e dimostriamo che $\ccl(T)$ is maximally consistent.
% La coerenza is ovvia.
% Sia $\phi$ un sentence arbitrario e supponiamo che $\phi\notin\ccl(T)$.
% Allora esiste un modello di $T$ such that $M\models\neg\phi$.
% Quindi per \ssf{e},  $M\proves\neg\phi$ in tutti i modelli di $T$.
% Allora $\neg\phi\in\ccl(T)$.
% \end{proof}
%\begin{proof}
%Dimostriamo \ssf{a}$\,\IMP\,$\ssf{b}.
% Se $T$ is complete in senso lato allora  $\ccl(T)$ is, per definizione, una theory complete che contiene $T$.
% Ogni altra theory $S$, complete in senso stretto, che contiene $T$ dovr\`a necessariamente contenere anche $\ccl(T)$.
% Ma $\ccl(T)$ is maximal quindi $S=\ccl(T)$.
% Dimostriamo ora l'implicazione \ssf{b}$\,\IMP\,$\ssf{c}.
% Se $M\proves T$ allora $T\subseteq\Th(M)$ e, essendo $\ccl(T)$, l'unica theory complete contenente $T$, deve necessariamente coincidere con $\Th(M)$.
% Questo equivale ad affermare $T\proves\Th(M)$.
% Per chiudere il cerchio, dimostriamo l'implicazione \ssf{c}$\,\IMP\,$\ssf{b}.
% Se $T\proves\Th(M)$ allora $\Th(M)\subseteq\ccl(T)$.
% Ma $\Th(M)$ is complete, quindi dal fatto~\ref{fattoconsistenzasensostretto} otteniamo $\Th(M)=\ccl(T)$.
% Allora anche $\ccl(T)$ is complete.
%\end{proof}




%\begin{remark} \ \ $T+\phi \textrm{ is inconsistent}$ se e solo se $T\vdash \neg\phi$.
% In particolare $T$ is contradditoria se $T\vdash\bot$.
% \end{remark}

%A volte diremo che $T$ is un \emph{insieme di assiomi completo}

%esiste un'unica theory complete in senso stretto contenente $T$.
% Ovvero se $M\equiv N$, for every $M,N\proves T$.



%Suggerimento: il controesempio si ottiene scegliendo come $M$ i numeri naturali con la relazione di successore e come $N$ un'estensione $\omega$-satura di $M$.
%\end{exercise}


%\begin{example}
%Il linguaggio degli ordini (stretti) $L_{os}$ contiene un unico simbolo di relazione binaria: $<$, che useremo come usuale con notazione infissa.
% La classe degli ordini lineari is elementare, infatti is assiomatizzata dalla theory che contiene i seguenti tre enunciati.
%\end{example}

%\begin{exercise}
%Quali implicazioni tra le clausole del fatto~\ref{fattoconsistenzasensolato} sopravvivono se omettiamo l'ipotesi `$T$ consistent'?
%\end{exercise}

\begin{exercise}\label{ex_max_cons_compl}
Prove that the following are equivalent
\begin{itemize}
\item[a.] $T$ is complete
\item[b.] for every sentence $\phi$, o $T\proves\phi$ o  $T\proves\neg\phi$ but not both.
\end{itemize}
By contrast prove that the following are \textit{not\/} equivalent
\begin{itemize}
\item[a.] $T$ is maximally consistent
\item[b.] for every sentence $\phi$, o $\phi\in T$ o  $\neg\phi\in T$ but not both.
\end{itemize}
% Hint: consider the theory containing all sentences where the symbol $\neg$ occurs an even number of times.
% This theory is not consistent as it contains $\bot$.
\end{exercise}

\begin{exercise}\label{ex_2max_cons_ext}
Prove that if $T$ has exactly $2$ maximally consistent extension $T_1$ and $T_2$ then there is a sentence $\phi$ such that $T,\phi\proves T_1$ and $T,\neg\phi\proves T_2$.
State and prove the generalization to finitely many maximally consistent extensions.
\end{exercise} 




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The Tarski-Vaught test}

There is no natural notion of \textit{smallest\/} elementary substructure containing a set of parameters $A$.
The downward L\"owenheim-Skolem, which we prove in the next section, is the best result that holds in full generality.
Given an arbitrary $A\subseteq N$ we shall construct a model $M\preceq N$ containing $A$ that is small in the sense of cardinality.
The construction selects one by one the elements of $M$ that are required to realise the condition $M\preceq N$.
Unfortunately, Definition~\ref{def_el_sub} supposes full knowledge of the truth in $M$ and it may not be applied during the construction.
The following lemma comes to our rescue with a property equivalent to $M\preceq N$ that only mention the truth in $N$.

\begin{lemma}[ (Tarski-Vaught test)]\label{lem_TarskiVaught}%
For every $A\subseteq N$ the following are equivalent
\begin{itemize}
\item[1.] $A$ is the domain of a structure $M\preceq N$
\item[2.] for every formula $\phi(x)\in L(A)$, with $|x|=1$,\smallskip

$N\models\E x\,\phi(x)\ \ \IMP\ \ N\models\phi(b)$ for some $b\in A$.
\end{itemize}
\end{lemma}

\def\ceq#1#2#3{%
\parbox{20ex}{$\displaystyle #1$}%
\parbox{5ex}{\hfil$#2$}%
\parbox{15ex}{$\displaystyle #3$}}

\begin{proof}
\ssf{1}$\IMP$\ssf{2}.

\ceq{\hfill N\models\E x\,\phi(x)}%
{\IMP}%
{M\models\E x\,\phi(x)}

\ceq{}%
{\IMP}%
{M\models\phi(b)} for some $b\in M$

\ceq{}%
{\IMP}%
{N\models\phi(b)} for some $b\in A$.

\ssf{2}$\IMP$\ssf{1}.
Firstly, note that $A$ is the domain of a substructure of $N$, that is, $f^Na\in A$ for every $f\in L_{\rm fun}$ and every $a \in A^{n_f}$.
In fact, this follows from \ssf{2} with $fa=x$ for $\phi(x)$.

Write $M$ for the substructure of $N$ with domain $A$.
By induction on the syntax we prove that for every $\xi(x)\in L$

\ceq{\hfill M\models\xi(a)}%
{\IFF}%
{N\models\xi(a)} for every $a\in M^x$.

If $\xi(x)$ is atomic the claim follows from $M\subseteq N$ and the remarks underneath Definition~\ref{isomorfismodef}.
The case of Boolean connectives is straightforward, so only the existential quantifier requires a proof.
So, let $\xi(x)$ be the formula $\E y\,\psi(x,y)$ and assume the induction hypothesis holds for $\psi(x,y)$

\ceq{\hfill M\models\E y\,\psi(a,y)}%
{\IFF}%
{M\models\psi(a,b)} for some $b\in M$

\ceq{}%
{\IFF}%
{N\models\psi(a,b)} for some $b\in M$

\ceq{}%
{\IFF}%
{N\models\E y\,\psi(a,y).}

The second equivalence holds by induction hypothesis, in the last equivalence we use \ssf{2} for the implication $\PMI$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Downward Löwenheim-Skolem}
\label{LoewenheimSkolem}


The main theorem of this section was proved by L\"owenheim at the beginning of the last century.
Skolem gave a simpler proof immediately afterwards.
At the time, the result was perceived as paradoxical.

A few years earlier, Zermelo and Fraenkel provided a formalization of set theory in a first order language.
The downward L\"owenheim-Skolem theorem implies the existence of an infinite countable model $M$ of set theory: this is the so-called  \emph{Skolem paradox}.
The existence of  $M$ seems paradoxical because, in particular, a sentence that formalises the axiom of power set holds in $M$.
Therefore $M$ contains an element $b$ which, in $M$, is the set of subsets of the natural numbers.
But the set of elements of $b$ is a subset of $M$, and therefore it is countable.

In fact, this is not a contradiction, because the expression \textit{all subsets of the natural numbers\/} does not have the same meaning in $M$ as it has in the real world.
The notion of cardinality, too, acquires a different meaning.
In the language of set theory, there is a first order sentence that formalises the fact that $b$ is uncountable: the sentence says that there is no bijection between $b$ and the natural numbers.
Therefore the bijection between the elements of $b$ and the natural numbers (which exists in the real world) does not belong to $M$.
The notion of equinumerosity has a different meaning in $M$ and in the real world, but those who live in $M$ cannot realise this.

\begin{theorem}[ (Downward L\"owenheim-Skolem)]\label{thm_lowenheimskolemallingiu}
Let $N$ be an infinite structure and fix some set $A\subseteq N$.
Then there is a structure $M$ of cardinality $\le|L(A)|$ such that $A\subseteq M\preceq N$.
\end{theorem}

\begin{proof}
Set $\lambda=|L(A)|$.
Below we construct a chain $\<A_i:i<\omega\>$ of subsets of $N$.
The chain begins at $A_0=A$.
Finally we set $M=\bigcup_{i<\omega}A_i$.
All $A_i$ will have cardinality $\le\lambda$ so  $|M|\le\lambda$ follows.

Now we construct $A_{i+1}$ given $A_i$.
Assume as induction hypothesis that $|A_i|\le\lambda$.
Then $|L(A_i)|\le\lambda$.
For some fixed variable $x$ let $\<\phi_k(x)\;:\;k<\lambda\>$ be an enumeration of the formulas in $L(A_i)$ that are consistent in $N$.
For every $k$ pick $a_k\in N$ such that $N\models\phi_k(a_k)$.
 Define $A_{i+1}=A_i\cup\{a_k\;:\;k<\lambda\}$.
Then $|A_{i+1}|\le\lambda$ is clear.

We use the Tarski-Vaught test to prove $M\preceq N$.
Suppose $\phi(x)\in L(M)$ is consistent in $N$.
As finitely many parameters occur in formulas, $\phi(x)\in L(A_i)$ for some $i$.
Then $\phi(x)$ is among the formulas we enumerated at stage $i$ and $A_{i+1}\subseteq M$ contains a solution of $\phi(x)$.
\end{proof}

We will need to adapt the construction above to meet more requirements on the model $M$.
To better control the elements that end up in $M$ it is convenient to add one element at the time (above we add $\lambda$ elements at each stage).
We need to enumerate formulas with care if we want to complete the construction by stage $\lambda$.

% \begin{void_thm}[Second proof of the downward L\"owenheim-Skolem Theorem]\label{diym_II_thm_lowenheimskolemallingiu}\rm
% From set theory we know there is a bijection $\pi:\lambda\to\lambda^2$ such that $\pi_1(i)$ and $\pi_2(i)$, the two components of $\pi(i)$, are both $\le i$.
% Suppose we have defined the sets $A_j$ for every $j\le i$.
% Let $\<\phi_k(x)\;:\;k<\lambda\>$ be an enumeration of the formulas in $L(A_j)$, where $j=\pi_1(i)$.
% Let $b$ be a solution of the formula $\phi_k(x)$ for $k=\pi_2(i)$ and define $A_{i+1}=A_i\cup\{b\}$.
% 
% We use Tarski-Vaught test to prove $M\preceq N$.
% Let $\phi(x)\in L(M)$ be consistent in $N$.
% Then $\phi(x)\in L(A_j)$ for some $j$.
% Say, $\phi(x)$ is the $k$-th formula in the enumeration above.
% As $\pi$ is a bijection, there is an $i$ such that $\pi_1(i)=j$ and $\pi_2(i)=k$.
% Hence a witness of $\phi(x)$ is enumerated in $M$ at stage $i+1$.
% \end{void_thm}

\begin{proof}[Second proof of the downward L\"owenheim-Skolem Theorem]
  Let $\pi:\lambda^2\to\lambda$ be a bijection such that $j,k\le\pi(j,k)$ for all $j,k<\lambda$.
  Suppose we have defined the sets $A_j$ for every $j\le i$ and let $\<\phi_{j,k}(x)\;:\;k<\lambda\>$ be an enumeration of the consistent formulas of $L(A_j)$.
  Let $j,k\le i$ be such that $\pi(j,k)=i$.
  Let $b$ be a solution of the formula $\phi_{j,k}(x)$ and define $A_{i+1}=A_i\cup\{b\}$.

  We use Tarski-Vaught test to prove $M\preceq N$.
  Let $\phi(x)\in L(M)$ be consistent in $N$.
  Then $\phi(x)\in L(A_j)$ for some $j$.
  Then $\phi(x)=\phi_{j,k}$ for some $k$.
  Hence a witness of $\phi(x)$ is enumerated in $M$ at stage $\pi(j,k)+1$.
\end{proof}

% \begin{exercise}\label{LSenumerazione}
% Con la notazione usata nella dimostrazione del teorema di L\"owenheim-Skolem, si dimostri che $A_i\subseteq\{a_k\;:\;k<\lambda\}$.
% (Quindi nella definizione data: $A_{i+1}=A_i\cup\{a_k\;:\;k<\lambda\}$, il ruolo di $A_i$ is pleonastico.)
% \end{exercise}

\begin{exercise}\label{ex_LS}
Assume $L$ is countable and let $M\preceq N$ have arbitrary (large) cardinality.
Let $A\subseteq N$ be countable.
Prove there is a countable model $K$ such that $A\subseteq K\preceq N$ and $K\cap M\preceq N$ (in particular, $K\cap M$ is a model).
Hint: adapt the construction used to prove the downward L\"owenheim-Skolem Theorem.
\end{exercise}

\begin{exercise}\label{ex_elem_sub_of_omega1}
  The language contains only $<$, the relation of strict order.
  Prove that there is a countable ordinal $\alpha$ that is an elementary substructure of $\omega_1$, the first uncountable ordinal.
\end{exercise}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Elementary chains}

\def\ceq#1#2#3{%
\parbox{19ex}{\hfill$\displaystyle #1$}%
\parbox{5ex}{\hfil$#2$}%
\parbox[t]{15ex}{$\displaystyle #3$}}

An \emph{elementary chain\/} is a chain $\<M_i:i<\lambda\>$ of structures such that $M_i\preceq M_j$ for every $i<j<\lambda$.
The \emph{union\/} (or \emph{limit\/}) of the chain is the structure with as domain the set $\bigcup_{i<\lambda}M_i$ and as relations and functions the union of the relations and functions of $M_i$.
It is plain that all structures in the chain are substructures of the limit.


\begin{lemma}\label{lem_el_chain}
Let $\<M_i:i\in\lambda\>$ be an elementary chain of structures.
Let $N$ be the union of the chain.
Then $M_i\preceq N$ for every $i$.
\end{lemma}

\def\ceq#1#2#3{%
\parbox{19ex}{\hfill$\displaystyle #1$}%
\parbox{5ex}{\hfil$#2$}%
\parbox{15ex}{$\displaystyle #3$}}

\begin{proof}
By induction on the syntax of $\phi(x)\in L$ we prove

\ceq{M_i\models\phi(a)}{\IFF}{N\models\phi(a)} for every $i<\lambda$ and every $a\in M_i^x$

As remarked in \ssf{3'} of Section~\ref{Embeddings and isomorphisms}, the claim holds for quantifier-free formulas.
Induction for Boolean connectives is straightforward so we only need to consider the existential quantifier

\ceq{M_i\models\E y\,\phi(a,y)}{\IMP}{M_i\models\phi(a,b)} for some $b\in M_i$.

\ceq{}{\IMP}{N\models\phi(a,b)} for some $b\in M_i\subseteq N$

where the second implication follows from the induction hypothesis.
Vice versa

\ceq{N\models\E y\,\phi(a,y)}{\IMP}{N\models\phi(a,b)} for some $b\in N$

Without loss of generality we can assume that $b\in M_j$ for some $j\ge i$ and obtain

\ceq{}{\IMP}{M_j\models\phi(a,b)} for some $b\in M_j$

Now apply the induction hypothesis to $\phi(x,y)$ and $M_j$

\ceq{}{\IMP}{M_j\models\E y\,\phi(a,y)}

\ceq{}{\IMP}{M_i\models\E y\,\phi(a,y)}

where the last implication holds because $M_i\preceq M_j$.
\end{proof}

\begin{exercise}
Let $\<M_i:i\in\lambda\>$ be an chain of elementary substructures of $N$.
Let $M$ be the union of the chain.
Prove that $M\preceq N$ and note that Lemma~\ref{lem_el_chain} is not required.
\end{exercise}


\begin{exercise}
Give an alternative proof of Exercise~\ref{ex_LS} using the downward L\"owenheim-Skolem Theorem (instead of its proof).
Hint: construct two countable chains of countable models such that $K_i\cap M\subseteq M_i\preceq N$ and $A\cup M_i\subseteq K_{i+1}\preceq N$.
The required model is $K=\bigcup_{i\in\omega}K_i$.
In fact it is easy to check that $K\cap M=\bigcup_{i\in\omega}M_i$.
\end{exercise}
