% !TEX root = creche.tex
\documentclass[creche.tex]{subfiles}
\begin{document}
\chapter{Some algebraic structures}
\label{algebraic}

\def\medrel#1{\parbox[b]{6ex}{\hfil$#1$}}
\def\ceq#1#2#3{\parbox[b]{25ex}{$\displaystyle #1$}\medrel{#2}$\displaystyle #3$}

The main result in this chapter is Corollary~\ref{coroll_Nullstellensatz}, the elimination of quantifiers in algebraically closed fields, which in algebra is called Chevalley's Theorem on constructible sets. From it we derive Hilbert's Nullstellensatz. Finally, we isolate the model theoretic properties of those types that correspond to the algebraic notions of prime and radical ideal of polynomials.

%At the cost of a few repetitions the first three sections of the chapter are not a prerequisite for the rest. 
The first sections of this chapter are not a pre-requisite for Sections~\ref{anelli} to~\ref{Nullstellensatz}, at the cost of a few repetitions in the latter.

\begin{notation}\label{notation1}
Recall that when $A\subseteq M$ we denote by \emph{$\<A\>_M$\/} the substructure of $M$ generated by $A$. Then $\<A\>_M\subseteq N$ is equivalent to $N\models \Diag\,\<A\>_M$. The diagram of a structure has been defined at the end of Section~\hyperref[frammenti]{\ref{types}.\ref{frammenti}}.

In this chapter, whenever some $A\subseteq M\models T$ are fixed, by \textit{model\/} we mean superstructures of $\<A\>_M$ that models $T$. The notions of \textit{logical consequence}, \textit{consistency}, \textit{completeness}, etc.\@ are modified accordingly, and we write $\cdot\proves\cdot$ for $T\cup\Diag\<A\>_M\cup\{\cdot\}\proves \cdot$. 

We say that a type $p(x)$ is \emph{trivial\/} if $\proves p(x)$.\QED
\end{notation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Abelian groups}
\label{gruppi}
In this section the language $L$ is that of additive groups. The theory \emph{$T_{\rm ag}$} of \emph{abelian groups\/} is axiomatized by the universal closure of the following axioms
\begin{itemize}
\item[a1] $(x+y) +z\ =\ y+(x+z)$;
\item[a2] $x+(-x)\ =\ (-x)+x\ =\ 0$;
\item[a3] $x+0\ = \ 0+x\ = \ x$;
\item[a4] $x+y\ =\ y+x$.
\end{itemize}
Let $x$ be a tuple of variables of length $\alpha$, an ordinal. We write $L_{{\rm ter},x}$ for the set of terms $t(x)$ with free variables among $x$. On this set we define the equivalence relation

\ceq{\hfill \emph{$t(x)\sim s(x)$}}%
{=}%
{T_{\rm ag}\proves t(x)=s(x).}

We define the group operations on $L_{{\rm ter},x}/\mathord{\sim}$ in the obvious way. We denote by $\ZZ^{\oplus\alpha}$ the set of tuples of integers of length $\alpha$ that are almost always $0$. The group operations on $\ZZ^{\oplus\alpha}$ are defined coordinate-wise. The following immediate proposition implies in particular that  $L_{{\rm ter},x}/\mathord{\sim}$ is isomorphic to $\ZZ^{\oplus\alpha}$.

\begin{proposition}
\label{corol_formacanonicaterminimoduli}
Let $A\subseteq M\models T_{\rm ag}$. Then for every formula $\phi(x)\in\atL(A)$ there are $n\in\ZZ^{\oplus\alpha}$ and $c\in\<A\>_M$ such that 

\ceq{\hfill\medrel{\proves}\phi(x)}{\iff}{\sum_{i<\alpha}n_ix_i\ =\ c}.

where $n=\<n_i:i<\alpha\>$ and  $x=\<x_i:i<\alpha\>$.\QED

\end{proposition}

\begin{proof}
Up to equivalence over $T_{\rm ag}$ the formula $\phi(x)$ has the form $s(x)=t(a)$ for some parameter-free terms $s(x)$ and $t(z)$. Over $\Diag\,\<A\>_M$, we can replace $t(a)$ with a single element of  $\<A\>_M$ and write $s(x)$ as the linear combination shown above.
\end{proof}


\begin{definition} Let $M\models T_{\rm ag}$. For $A\subseteq M$ and  $c\in M$. We say that  \emph{$c$ is independent from $A$\/} if $\<A\>_M\cap\<c\>_M=\big\{0\big\}$. Otherwise we say that \emph{$c$ is dependent from $A$}. The \emph{rank\/} of $M$ is the least cardinality of a subset $A\subseteq M$ such that all elements in $M$ are dependent from $A$. We denote it by \emph{rank\,$M$}.\QED
\end{definition}  

Note that when $M$ is a vector space the condition $\<A\>_M\cap\<c\>_M=\big\{0\big\}$ is equivalent to saying that $c$ is not a linear combination of vectors in $A$ and $\rank M$ coincides with the dimension of $M$. In fact, what we do here for abelian groups could be easily generalized to $D\jj$modules, where $D$ is any integral domain, and in particular to vector spaces.

The following proposition gives a convenient syntactic characterization of independence.


\begin{proposition}
Let $A\subseteq M\models T_{\rm ag}$. Then for every $c\in M$ the following are equivalent.
\begin{itemize}
 \item[1.] $\<A\>_M\cap\<c\>_M=\big\{0\big\}$;
 \item[2.] $p(x)=\attp_M(c/A)$ is trivial (see Notation~\ref{note_tipi_diagramma} and ~\ref{notation1}).
\end{itemize}
\end{proposition}
\begin{proof}
\ssf{1}$\IMP$\ssf{2}\quad By Proposition~\ref{corol_formacanonicaterminimoduli}, a non trivial formula in $p(x)$ may be assumed to have the form $nx=a$ for some $n\in\ZZ\sm\{0\}$ and some $a\in\<A\>_M\sm\{0\}$. If such a formula is satisfied by $c$ then $0\neq a\in\<A\>_M\cap\<c\>_M$. 

\ssf{2}$\IMP$\ssf{1}\quad If $\<A\>_M\cap\<c\>_M\neq\big\{0\big\}$ then $nc=a$ for some $a\in\<A\>_M\sm\{0\}$. Then $c$ satisfies the non trivial equation $nx=a$.
\end{proof}


\begin{remark}\label{oss_liberi_qf}
Let $k:M\to N$ be a partial embedding and let $a$ be an enumeration of $\dom k$. We claim that  $k\cup\big\{\<b,c\>\big\}:M\to N$ is a partial embedding for every $b\in M$ and $c\in N$ that are independent from $a$, respectively $ka$. In fact, it suffices to check that $M,a,b\,\equiv_{\rm at}N,ka, c$. Suppose $\phi(x,z)\in\atL$ \ is such that $M\models\phi(a,b)$. Then by independence $\phi(a,x)$ is trivial, i.e.

\ceq{\hfill T_{\rm ag} \cup\ \Diag\<a\>_M}{\proves}{\phi(a,x).}

As $\<a\>_M$ and  $\<ka\>_N$ are isomorphic structures 

\ceq{\hfill T_{\rm ag}\ \cup\ \Diag\<ka\>_N}{\proves}{\phi(ka,x).}

Therefore $N\models\phi(ka,c)$. The proof that $N\models\phi(ka,c)$ implies $M\models\phi(a,b)$ is similar.\QED 
\end{remark}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Torsion-free abelian groups}

The theory of \emph{torsion-free abelian groups\/} extends $T_{\rm ag}$ with the following axioms for all positive integers $n$
\begin{itemize}
\item[st] $nx= 0\imp x=0$.
\end{itemize}
We denote this theory by \emph{$T_{\rm\bf tfag}$}. It is not difficult to see that in a torsion-free abelian group every equation of the form $\,nx = a\,$ has at most one solution.


\begin{proposition}
Let $M\models T_{\rm tfag}$ be uncountable. Then $\rank M=|M|$. 
\end{proposition}

\begin{proof}
Let $A\subseteq M$ have cardinality $<|M|$. We claim that $M$ contains some element that is independent from $A$. It suffices to show that the number of elements that are dependent from $A$ is $<|M|$. If $c\in M$ is dependent from $A$ then, by Proposition~\ref{prop_mst_tipi princ_comp}, it is a solution of some formula $\atL(A)$. As there is no torsion, such a formula has at most one solution. Therefore the number of elements that are dependent from $A$ is at most $|\atL(A)|$, that is $\max\big\{|A|,\omega\big\}$. If $M$ is uncountable the claim follows.
\end{proof}

\begin{proposition}\label{prop_mst_tipi princ_comp}
Let $A\subseteq M\models T_{\rm tfag}$.  Let $p(x)=\atpmtp(b/A)$, where $b \in M$. Then one of the following holds:   
\begin{itemize}
\item[1.] $b$ is independent from $A$;
\item[2.] $M\models\phi(b)$ for some $\phi(x)\in\atL(A)$ such that $\ \proves\ \phi(x)\imp p(x)$.
\end{itemize}\end{proposition}

Note the similarity with Example~\ref{ex_infiniti_colori}, where the independent type is $q(x)$ and the isolating formulas are the $r_i(x)$. 

It is important to observe that the set $A$ above may be infinite. This is essential to obtain Corollary~\ref{corol_ModDivUltraOmog}, and it is one of the main differences between this example and the examples encountered in Chapter~\ref{relational}. % (see Exercise~\ref{ex_ol+grf_tipi_princ_comp}).
%L'insieme $A$ pu\`o essere preso infinito, questo permetter\`a di dimostrare il lemma~\ref{lemma_modulo_divisibile_ricco_nonnumer} senza restrizioni sulla cardinalit\`a e quindi di ottenere la categoricit\`a non numerabile, vedi corollario~\ref{thm_ModDivUltraOmog}. Non \`e cos\`i nell'esercizio~\ref{ex_ol+grf_tipi_princ_comp}. 

\begin{proof}
If $b$ is dependent from $A$, then $b$ satisfies a non trivial atomic formula $\phi(x)$ which we claim is the formula required in \ssf{2}. It suffices to show that $\phi(x)$ implies a complete $\atpmL(A)$-type. Clearly this type must be $p(x)$. Let $\phi(x)$ have the form $nx=a$ for some $n\in\ZZ\sm\{0\}$ and $a\in\<A\>_M\sm\{0\}$. We show that for every $m\in\ZZ$ and every $c\in\<A\>_M$ one of the following holds
\begin{itemize}
\item[a.] $\proves\   nx=a\imp mx=c$;
\item[b.] $\proves\   nx=a\imp mx\neq c$.
\end{itemize} 
Suppose not for a contradiction that neither \ssf{a} nor \ssf{b} holds and fix models $N_1$, $N_2$ and some $b_i\in N_i$ such that
\begin{itemize}
\item[a'.] $N_1\models nb_1=a$ \ and \ $N_1\models mb_1\neq c$;
\item[b'.] $N_2\models nb_2=a$ \ and \ $N_2\models mb_2 = c$.
\end{itemize} 
From \ssf{b'} we obtain $N_2\models ma=nc$. As $N_1$ is torsion-free, from \ssf{a'} we obtain $N_1\models ma\neq nc$. But $ma=nc$ is a formula with parameters in $\<A\>_M$, so it should have the same truth value in all superstructures of $\<A\>_M$, a contradiction.
\end{proof}




%\begin{definition} Let $A\subseteq M\models T_{\rm tfag}$. We say that an element $c\in M$ is \emph{independent from $A$\/} if the type $p(x)=\attp_M(c/A)$ is trivial, that is, $N\models \A x\,p(x)$ for every $\<A\>_M\subseteq N\models T_{\rm tfag}$.\QED\end{definition}  


% 
% 
% \begin{proposition}\label{prop_independent_ag}
% Let $k:M\to N$ be a partial isomorphism between models of $T_{\rm tfag}$. Let $b\in M$ and $c\in N$ be independent from $\dom k$, respectively $\range k$. Then  $k\cup\big\{\<b,c\>\big\}:M\to N$ is partial isomorphism.
% \end{proposition}
% 
% \begin{proof}
% It suffices to prove that $k\cup\big\{\<b,c\>\big\}:M\to N$ preserves the truth of atomic formulas and then apply the same argument to $k^{-1}:N\to M$. Let $a$ be an enumeration of $\dom k$ and let $p(x,z)=\attp(b,a)$. As $p(x,a)$ is a trivial type, then $M'\models\A x\,p(x,a)$ for every model $\<\dom k\>_M\subseteq M'\models T_{\rm tfag}$. As $\<\dom k\>_M$ is isomorphic to $\<\range k\>_N$ then  $N\models\A x\,p(x,ka)$, in particular $N\models p(c,ka)$. By symmetry, also $b$ realize the atomic type of $c$ over $\range a$ and the proposition follows. 
% \end{proof}


% \begin{exercise}\label{ex_ol+grf_tipi_princ_comp}
% Let $T$ be one of the theories $T_{\rm lo}$ or $T_{\rm graph}$. Let $A\subseteq M\models T$ be finite. For $b\in M$ let $p(x)=\atpmtp_M(b/A)$. Prove that $\phi(x)\imp p(x)$ for some $\phi(x)$, conjunction of formulas in $p(x)$. Find a counterexample with $A$ infinite.\QED
% \end{exercise}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Divisible abelian groups}

The theory of \emph{divisible abelian groups\/} extends $T_{\rm tfag}$ with the following axioms for all  integers $n\neq0$
\begin{itemize}
\item[div$_n$] $\E x\ nx=y$.
\end{itemize} 
We denote this theory by \emph{$T_{\rm\bf dag}$}.

\begin{proposition}\label{prop_md_cons_sodd}
Let $M\models T_{\rm tfag}$ and let $\phi(x)\in\atL(A)$, where $|x|=1$, be consistent. Then $N\models\E x \,\phi(x)$ for every model $N\models T_{\rm dag}\cup\Diag\<A\>_M$.
\end{proposition}

Note that the proposition mentions $T_{\rm tfag}$ first and then $T_{\rm dag}$. 

The claim in the proposition holds more generally for all $\phi(x)\in L_{\rm qf}$ and also when $x$ is a tuple of variables. This follows from Lemma~\ref{lemma_modulo_divisibile_ricco_nonnumer}, whose proof uses the proposition.

\begin{proof}
We can assume that $\phi(x)$ has the form $n x= a$ for some $n\in\ZZ$ and some $a\in\<A\>_N$. If $n=0$, then $a=0$ since $\phi(x)$ is consistent, and the claim is trivial. Otherwise a solution exist in $N$ by axiom \ssf{div$_n$}.
\end{proof}

\begin{exercise}
Prove a converse of Proposition~\ref{prop_md_cons_sodd}. Let $A\subseteq N\models T_{\rm ag}$ and let $x$ be a single variable. Prove that if $N\models\E x \,\phi(x)$ for every consistent $\phi(x)\in\atL(A)$, then $N\models T_{\rm dag}$.\QED
\end{exercise}

We are ready to prove that divisible abelian groups of infinite rank are $\omega$-rich. We shall be slightly more general than that.

\begin{lemma}\label{lemma_modulo_divisibile_ricco_nonnumer}
Let $k:M\imp N$ be a partial isomorphism of cardinality $<\lambda$, where $M\models T_{\rm tfag}$ and $N\models T_{\rm dag}$ has rank $\ \ge\lambda$. Then for every $b\in M$ there is $c\in N$ such that $k\cup\big\{\<b,c\>\big\}:M\imp N$ is a partial isomorphism.
\end{lemma}

\begin{proof}
Let $a$ be an enumeration of $\dom k$ and let $p(x,z)=\atpmtp(b,a)$.  The required $c$ has to realize $p(x,ka)$. We consider two cases. If $b$ is dependent from $a$, then Proposition~\ref{prop_mst_tipi princ_comp} yields a formula $\phi(x,z)\in\atL$ such that 

\noindent\rlap{\ssf{i.}}\hspace{5ex} $\proves\ \phi(x,a)\imp p(x,a)$

\noindent\rlap{\ssf{ii.}}\hspace{5ex} $\phi(x,a)$\ \ is consistent.

By isomorphism,  \ssf{i} and \ssf{ii} hold with $a$ replaced by $ka$. Then by Proposition~\ref{prop_md_cons_sodd} the formula $\phi(x,ka)$ has a solution $c \in N$.

The second case, which has no analogue in Lemma~\ref{lem_ordinericco}, is when $b$ is independent from $a$. Then by   Remark~\ref{oss_liberi_qf} we may choose $c$ to be any element of $N$ independent from $ka$. Such an element exists because $N$ has rank at least $\lambda$. 
\end{proof}

\begin{corollary}\label{corol_ModDivUltraOmog}
Every uncountable model of $T_{\rm dag}$ is rich in the category of models of $T_{\rm tfag}$ and partial isomorphisms. In particular $T_{\rm dag}$ is uncountably categorical, it is complete, and has quantifier elimination.
\end{corollary}
\begin{proof}
Any uncountable $N\models T_{\rm dag}$ has rank $|N|$, therefore it is rich by Lemma~\ref{lemma_modulo_divisibile_ricco_nonnumer}; categoricity and completeness follow. As for quantifier elimination, suppose $k:M\to N$ is a partial isomorphism between models of $T_{\rm dag}$. If $M\preceq M'$ and $M\preceq N'$ are elementary superstructures of uncountable cardinality then $k:M'\to N'$ is elementary by Theorem~\ref{thm_morphism_rich_elementary} and this suffices to conclude that  $k:M\to N$ is elementary. 
\end{proof}

\begin{exercise}
Prove that every model of $T_{\rm dag}$ is $\omega\jj$ultraomogeneous (indipendenlty of cardinality and rank).\QED
\end{exercise}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Commutative rings}
\label{anelli}

In this section $L$ is the \emph{language of (unital) rings}. It contains two constants $0$ and $1$ the unary operation $-$ and two binary operations $+$ and $\cdot$. The theory of rings contains the following axioms

\begin{itemize}
\item[a1-a4] as for abelian groups
\item[r1] $(x\mdot y)\mdot z\  =\ y\mdot(x\mdot z)$,
\item[r2] $1\mdot x\ =\ x\mdot 1\ =\ x$,
\item[r3] $(x+y)\mdot z\ =\ x\mdot z + y\mdot z$,
\item[r4] $z\mdot (x+y)\ =\ z\mdot x + z\mdot y$.
\end{itemize}

All the rings we consider are \emph{commutative\/} 

\begin{itemize}
\item[c] $x\mdot y\ =\ y\mdot x$.
\end{itemize}
 
We denote the theory of commutative rings by \emph{$T_{\rm cr}$}.

Let  $A\subseteq M\models T_{\rm cr}$ and let $x$ be a tuple of variables of length $\alpha$, an ordinal. We write $L_{{\rm ter},x}(A)$ for the set of terms $t(x)$ with free variables among $x$ and parameters in $A$. On this set we define the equivalence relation

\ceq{\hfill \emph{$t(x)\sim s(x)$}}%
{\deq}%
{T_{\rm cr}\ \cup\ \Diag\<A\>_M \ \proves \ t(x)=s(x).}

On $L_{{\rm ter},x}(A)/\mathord{\sim}$ we define the ring operations in the obvious way so that $L_{{\rm ter},x}(A)/\mathord{\sim}$ is a commutative ring. We denote by $A[x]$ the set of polynomials with variables among $x$ and parameters in $\<A\>_M$. The ring operations on $A[x]$ are defined as usual. The following proposition (which is clear, but tedious to prove) implies in particular that $L_{{\rm ter},x}(A)/\mathord{\sim}$ is isomorphic to $A[x]$. For simplicity we state it only for $|x|=1$.

\begin{proposition}
\label{prop_formacanonicaterminiau}
Let  $A\subseteq M\models T_{\rm cr}$ and let $x$ be a single variable. Then for every formula $\phi(x)\in \atL(A)$ there is a unique $n<\omega$ and a unique tuple $a=\<a_i:i\le n\>$ of elements of $\<A\>_M$ such that $a_n\neq0$ and 

\ceq{\hfill T_{\rm cr}\ \cup\ \Diag\<A\>_M}{\proves}{\phi(x)\ \iff\ \sum_{i\le n}a_ix^i\ =\ 0}.\QED
\end{proposition}

The integer $n$ in the proposition above is called the \emph{degree of $\phi(x)$}.

In what follows the theory $T_{\rm cr}\cup\Diag\<A\>_M$ is implicit in the sense of Notation~\ref{notation1}, so it is important to remember that $\Diag\<A\>_M$ is not trivial even when $A=\0$. In fact, $\Diag\<\0\>_M$ determines the characteristic of the models.

\begin{definition} Let $A\subseteq M\models T_{\rm cr}$. We say that an element $b\in M$ is \emph{transcendent over $A$\/} if the type $p(x)=\attp_M(b/A)$ is trivial (see Notation~\ref{note_tipi_diagramma} and ~\ref{notation1}). Otherwise we say that $b$ is \emph{algebraic over $A$}. The \emph{transcendence degree\/} of $M$ is the least cardinality of a subset $A\subseteq M$ such that no element of $M$ is transcendent over $A$.\QED
\end{definition}  

\begin{remark}\label{oss_liberi_cr}
Remark~\ref{oss_liberi_qf} holds here with `independent' replaced by `transcendent' and $T_{\rm ag}$ replaced by $T_{\rm cr}$.\QED
\end{remark}

\section{Integral domains}

Let $a\in M\models T$. We say that $a$ is a \emph{zero divisor} if $a\,b=0$ for some $b\in M\sm\{0\}$. An \emph{integral domain\/} is a commutative ring without zero divisors. The theorey of integral domains contains the axioms of commutative rings and the following
\begin{itemize}
\item[nt.] $0\neq 1$
\item[id.] $x\mdot y =0\ \imp\ x=0\ \vee\ y=0$.
\end{itemize}

We denote the theory  of integral domains by \emph{$T_{\rm id}$}.


\begin{proposition}
Let $M\models T_{\rm id}$ be uncountable. Then $M$ has transcendence degree $|M|$.
\end{proposition}

\begin{proof}
Every polynomial has finitely many solutions in an integral domain and there are $|L(A)|$ polynomials over $A$.
\end{proof}



\begin{proposition}\label{prop_di_tipi princ_comp}
Let $A\subseteq M\models T_{\rm id}$. For $b\in M$ let $p(x)=\atpmtp(b/A)$. Then one of the following holds  
\begin{itemize}
\item[1.] $b$ is transcendental over $A$;
\item[2.] $M\models\phi(b)$ for some $\phi(x)\in\atL(A)$ such that
$\ \proves\ \phi(x)\imp p(x)$.
\end{itemize}\end{proposition}

Note the similarity with Example~\ref{ex_infiniti_colori}, where the transcendental type is $q(x)$ and the isolating formulas are the $r_i(x)$. 

As in Proposition~\ref{prop_mst_tipi princ_comp}, the set $A$ may be infinite. This is essential to obtain Corollary~\ref{corol_acfUltraOmog}.


\begin{proof}
Suppose $b$ is not transcendental, i.e.\@ it satisfies a non trivial atomic formula. Let $\phi(x)\in\atL(A)$ be a non trivial formula with minimal degree such that $\phi(b)$.  We prove that $\phi(x)$ implies a complete $\atpmL(A)$-type.  Clearly this type must be $p(x)$. We prove that for any $\xi(x)\in\atL(A)$ one of the following holds
\begin{itemize}
\item[1.] $\ \proves\ \phi(x)\imp\phantom{\neg}\xi(x)$
\item[2.] $\ \proves\ \phi(x)\imp\neg\xi(x)$.
\end{itemize} 
Let us write $a(x)=0$ and $a'(x)=0$ for the formulas $\phi(x)$ and $\xi(x)$, respectively. Let $n$ be the degree of the polynomial $a(x)$. If $\<A\>_M$ is a field, choose a polynomial $d(x)$ of maximal degree such that
\begin{itemize}
\item[a.] $d(x)t(x)=a(x)$
\item[a'.] $d(x)t'(x)=a'(x)$,
\end{itemize} 
for some polynomials $t(x)$ and $t'(x)$. 

If $\<A\>_M$ is not a field, polynomials $d(x)$, $t(x)$ and $t'(x)$ as above exist with coefficients in the field of fractions of $\<A\>_M$. Then \ssf{a} and \ssf{a'} hold up to a factor in $\<A\>_M$ which we absorb in $a(x)$ and $a'(x)$. 

From \ssf{a} we get $d(b)=0$ or $t(b)=0$. In the first case, as $a(x)$ has minimal degree, we conclude that $t(x)$ is constant.  This implies that any zero of $a(x)$ is also a zero of $a'(x)$, that is, it implies \ssf{1}. 

Now suppose $t(b)=0$. Then the minimality of the degree of $a(x)$ implies that $d(x)=d$, where $d$ is a nonzero constant. If $\<A\>_M$ is a field, apply B\'ezout's identity to obtain two polynomials $c(x)$ and $c'(x)$ such that $d=a(x)c(x)+a'(x)c'(x)$. Then $a(x)$ and $a'(x)$ have no common zeros, and \ssf{2} follows. If $\<A\>_M$ is not a field, we use  B\'ezout's identity in the field of fractions of $\<A\>_M$ and obtain $d'd=a(x)c(x)+a'(x)c'(x)$ for some $d'\in\<A\>_M\sm\big\{0\big\}$. Then we reach the same conclusion.
\end{proof}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Algebraically closed fields}

Let $a,b\in M\models T_{\rm cr}$. We say that $b$ is the \emph{inverse\/} of $a$ if $a\mdot b=1$. A field is a commutative ring where every non-zero element has an inverse. The \emph{theory of fields\/} contains $T_{\rm id}$ and the axiom
\begin{itemize}
\item[f.]$\E  y\; \big[x\neq0\ \imp\ x\mdot y =1\big]$.
\end{itemize}
Fields are structures in the signature of rings: the language contains no symbol for the multiplicative inverse. So, substructures of fields are merely integral domains.

The theory of \emph{algebraically closed field}, which we denote by \emph{$T_{\rm acf}$}, also contains the following axioms for every positive integer $n$

\begin{itemize}
\item[ac$_n$.] $\E x\ \big(x^{n} + z_{n-1}x^{n-1} + \dots + z_1 x + z_0\ \ =\ \ 0\big)$
\end{itemize}

This not a complete theory because it does not decide the characteristic of the field. For a prime $p$, we define the theory \emph{$T^p_{\rm acf}$}, which contains $T_{\rm acf}$ and the axiom
\begin{itemize}
\item[ch$_p$.]$1+\dots \mbox{($p$ times)}\dots +1=0$.
\end{itemize}
The theory \emph{$T^0_{\rm acf}$\/} contains the negation of \ssf{ch$_p$} for all $p$. Note that all models of $T^p_{\rm acf}$ have the same characteristic in the model theoretic sense defined in~\ref{def_characteristic}. In fact, any two fields $M$ and $N$ with the same (algebraic) characteristic have isomorphic prime subfield, that is, $\<\0\>_M \simeq \<\0\>_N$.

\begin{proposition}\label{prop_acf_cons_sodd}
Let $A\subseteq N\models T_{\rm acf}$ and let $x$ be a single variable. Then $N\models\E x \,\phi(x)$ for every  $\phi(x)\in\atL(A)$ that is consistent with $T_{\rm id}\cup\Diag\<A\>_M$.
\end{proposition}

Note that the proposition mentions $T_{\rm acf}$ first and then $T_{\rm id}$. 

The claim in the proposition holds more generally for all $\phi(x)\in L_{\rm qf}$ when $x$ is a tuple of variables. This follows from Lemma~\ref{lem_acf_ricco_nonnumer} whose proof uses the proposition.

\begin{proof}
Up to equivalence $\phi(x)$ has the form $a_nx^n + \dots + a_1 x + a_0=0$ for some $a_i\in\<A\>_N$. Choose $n$ minimal. If $n=0$, then $a_0=0$ since $\phi(x)$ is consistent, and the claim is trivial. Otherwise $a_n\neq0$ and the claim follows from \ssf{f} and \ssf{ac$_n$}. 
\end{proof}

\begin{lemma}\label{lem_acf_ricco_nonnumer}
Let $k:M\imp N$ be a partial isomorphism of cardinality $<\lambda$, where $M\models T_{\rm id}$ and $N\models T_{\rm acf}$ has transcendence degree $\ge\lambda$. Then for every $b\in M$ there is $c\in N$ such that $k\cup\big\{\<b,c\>\big\}:M\imp N$ is a partial isomorphism.
\end{lemma}

The following is the proof of Lemma~\ref{lemma_modulo_divisibile_ricco_nonnumer} which we have pasted here for the sake of the lazy reader.

\begin{proof}
Let $a$ be an enumeration of $\dom k$ and let $p(x,z)=\atpmtp_M(c,a)$. The required $c$ has to realize $p(x,ka)$. We consider two cases. If $b$ is algebraic over $a$, then Proposition~\ref{prop_di_tipi princ_comp} yields a formula $\phi(x,z)\in\atL$ such that 

\noindent\rlap{\ssf{i.}}\hspace{5ex} $\phi(x,a)\imp p(x,a)$

\noindent\rlap{\ssf{ii.}}\hspace{5ex} $\phi(x,a)$\ \ is consistent.

By isomorphism \ssf{i} and \ssf{ii} hold with $a$ replaced by $ka$. Then by Proposition~\ref{prop_acf_cons_sodd} the formula $\phi(x,ka)$ has a solution in $c\in N$.

The second case, which has no analogue in Lemma~\ref{lem_ordinericco}, is when $b$ is transcendent over $a$. Then by  Remark~\ref{oss_liberi_cr} we may choose $c$ to be any element of $N$ transcendent over $ka$. This exists because $N$ has transcendence degree $\ \ge\lambda$. 
\end{proof}

\begin{corollary}\label{corol_acfUltraOmog}
Every uncountable model of $T^p_{\rm acf}$ is rich in the category of integral domains of characteristic $p$ and partial isomorphisms. In particular $T^p_{\rm acf}$ is uncountably categorical, it is complete, and has quantifier elimination.
\end{corollary}

The proof requires the same argument as Corollary~\ref{corol_ModDivUltraOmog}. However here we have to fix the characteristic of the integral domain, otherwise the resulting category is not connected. 

\begin{proof}
Every uncountable $N\models T^p_{\rm acf}$ has transcendence degree $|N|$, therefore it is rich by by Lemma~\ref{lem_acf_ricco_nonnumer}. Categoricity and completeness follow. 

For quantifier elimination, let $k:M\to N$ be a partial embedding between models of $T^p_{\rm acf}$. Let $M'$ and $N'$ be elementary superstructures of $M$ and $N$ respectively of sufficiently large cardinality. As $M'$ and $N'$ are rich, $k:M'\to N'$ is elementary by Theorem~\ref{thm_morphism_rich_elementary}. Hence 
 $k:M\to N$ is also elementary.
\end{proof}


\begin{exercise}
Prove that every model of $T_{\rm acf}$ is $\omega\jj$ultrahomogeneous (indipendently of cardinality and transcendence degree).\QED
\end{exercise}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Hilbert's Nullstellensatz}
\label{Nullstellensatz}

\def\medrel#1{\parbox{5ex}{\hfil$\displaystyle #1$}}
\def\ceq#1#2#3{\parbox{20ex}{$\displaystyle #1$}\medrel{#2}$\displaystyle  #3$}

In this section we fix a tuple of variables \emph{$x$\/} and a subset \emph{$A$} of an integral domain. We denote by \emph{$\Delta(A)$\/} the set of formulas of the form $t(x)=0$ where $t(x)$ is a term with parameters in $A$. So $\Delta(A)\jj$types are (possibly infinite) systems of polynomial equations with coefficients in $\<A\>_M$. 

For convenience we define the closure of $p(x)$ under logical consequences as follows

\ceq{\hfill \ccl\, p(x)}{=}{\Big\{t(x)=0\ :\    p(x)\, \proves\, t(x){=}0\Big\}}

Remember that we always work under the assumptions made in Notation~\ref{notation1}. In particular, in this section we work over the theory $T_{\rm id}\cup\Diag\<A\>_M$. In general, closure under logical consequences is an elusive notion. Hence Propositions~\ref{prop_Nullstellensatz} and~\ref{prop_chiusura-radicale} are useful because they give a model theoretical, respectively algebraic, characterisation of $\ccl\, p(x)$.

\begin{proposition}\label{prop_Nullstellensatz}
Let $A\subseteq M\models T_{\rm id}$ and let $p(x)$ be a $\Delta(A)\jj$type. Fix some $N$ of sufficiently large cardinality such that $\<A\>_M\subseteq N\models T_{\rm acf}$. Then 

\ceq{\hfill\ccl\, p(x)}{=}{\Big\{t(x)=0\,:\,  N\models\A x\,\big[ p(x)\imp t(x){=}0\big]\Big\}.}

\end{proposition}

It suffices to choose $N$ such that $|A|<|N|$ and $|x|\le |N|$; note that $x$ has possibly infinite length. In Corollary~\ref{coroll_Nullstellensatz} below we will considerably strengthen this proposition for finite $x$.

\begin{proof} Only the inclusion $\supseteq$ requires a proof.  Fix some polynomial $t(x){=}0\notin\ccl\, p(x)$. Then $p(x)\wedge t(x)\neq0$ is consistent, so there is a model $M'$ such that $M'\models p(a)\wedge t(a)\neq0$ for some $a\in {M'}^{|x|}$. Then there is a partial isomorphism $h:M'\to N$ that extends $\id_A$ and is defined on $a$, provided $N$ is large enough to accommodate $a$. This implies that $p(x)\wedge t(x)\neq0$ has a solution in $N$. Hence $t(x)$ does not belong to the set on the r.h.s.  
\end{proof}

Recall that $A[x]$ denotes the ring of polynomials with variables in $x$ and coefficients in $\<A\>_M$. We identify $\Delta(A)$ and $A[x]$ in the obvious way. Consequently, a $\Delta(A)\jj$type $p(x)$ is identified with a set of polynomials $p\subseteq A[x]$. For $p\subseteq A[x]$ we write \emph{${\rm\bf rad}\,p$} for the \emph{radical ideal generated by $p$}, that is, the intersection of all prime ideals containing $p$. When $p=\rad p$, we say that  \emph{$p$ is a radical ideal}. Recall from algebra that if $p\subseteq A[x]$ is an ideal then

\ceq{\ssf{\#}\hfill\rad p}{=}{\Big\{t(x)\  :\ t^n(x)\in p \textrm{ for some positive integer }n\Big\},}

which explains the name.



\begin{proposition}\label{prop_chiusura-radicale}
Let $A\subseteq M\models T_{\rm id}$ and let $p(x)$ be a $\Delta(A)\jj$type. Then $\ccl\,p(x)=\rad p$.
\end{proposition}
The proposition holds with a similar proof for the broader class of rings without nilpotent elements. (Which does not come as a surprise.)
\begin{proof}
$(\supseteq)$\quad We claim that $\ccl\,p(x)$ is an ideal. In fact, for every pair of $L(A)$-terms $t(x)$ and $s(x)$

\ceq{\hfill t(x)=0}{\proves}{s(x)t(x) = 0}

\ceq{\hfill s(x)=t(x)=0}{\proves}{s(x)+t(x) = 0}

Moreover, as integral domains do not have nilpotent elements

\ceq{\hfill t^n(x)=0}{\proves}{t(x) = 0}

By \ssf{\#} above, $\ccl\,p(x)$ is a radical ideal which proves $\ccl\,p(x)\supseteq \rad p$.

$(\subseteq)$\quad We fix some $t(x)\notin\rad p$ and prove that $p(x)\wedge t(x)\neq0$ is consistent. Let $q$ be some prime ideal containing $p$ such that $t(x)\notin q$.  As $q$ is prime, the ring $A[x]/q$ is an integral domain. The polynomials that vanish in  $A[x]/q$ at $x+q$ are exactly those in $q$. Hence $A[x]/q$ witnesses the consistency of $q(x)\wedge t(x)\neq0$.
\end{proof}

When $x$ is a finite tuple of variables, we can extend the validity of Proposition~\ref{prop_Nullstellensatz} to the case $A=M=N$.

\begin{corollary}[ (Hilbert's Nullstellensatz)]\label{coroll_Nullstellensatz}
Let $N\models T_{\rm acf}$ and let $p(x)$, where $|x|<\omega$, be a $\Delta(N)\jj$type. Then

\ceq{\hfill\rad p\medrel{=}\ccl\, p(x)}{=}{\Big\{t(x)\  :\  N\models\A x\,[ p(x)\imp t(x)=0]\Big\}.}

\end{corollary}



\begin{proof}
Let $N'$ be a large elementary extension of $N$. By Proposition~\ref{prop_Nullstellensatz}, the claim holds for $N'$. By Hilbert's Basis Theorem, the ideal generated by $p$ is finitely generated hence $p(x)$ is equivalent to a formula (cfr.\@ Exercise~\ref{ex_fingen_principal}). Therefore, by elementarity, the claim holds for $N$.
\end{proof}


Hilbert's Nullstellensatz comes in two variants. The one in Corollary~\ref{coroll_Nullstellensatz} is sometimes referred to as the \textit{strong\/}  Nullstellensatz. The weaker variant is stated in Exercise~\ref{ex_weakNullstellensatz}.



 %For instance, when we call a $\Delta(A)\jj$type an \textit{ideal}, we identify it with a subset of the ring of polynomials $A[x]$.

%Hilbert's Nullstellensatz comes in two variants. We already have (up to some small input from algebra) the so-called weak form. This says that in an algebraically closed field every system of equation, which is not blatantly inconsistent, has a solution.
% 
% \begin{theorem}[(Hilbert's Nullstellensatz - weak form)]
% Let $A\subseteq M\models T_{\rm id}$ and let $p(x)$ be a $\Delta(A)\jj$type. If $x$ is a finite tuple. Then for every $\<A\>_M\subseteq N\models T_{\rm acf}$
% \begin{itemize}
% \item[1.] $p(x)$ has no solution in $N$;
% \item[2.] for some polynomial $t_i(x)\in p$ and some parameters $c_i\in\<A\>_M$
% 
% \ceq{\hfill \sum^n_{i=1}c_i t_i(x)}{=}{1}\QED
% \end{itemize}
% \end{theorem}
% 
% The theorem holds also for tuples $x$ of length $\le|N|$ if we require $|A|<|N|$. The proof is similar, with no need to apply Hilbert's Basis Theorem.
% 
% 
% \begin{proof}
% (\ssf{2}$\IMP$\ssf{1}) Trivial.
% 
% (\ssf{1}$\IMP$\ssf{2}) Negate \ssf{2} then we can extend $p$ to a maximal ideal $q$. Then $A[x]/q$ is field that extends $\<A\>_M$ and $q(x)$ has a solution in $A[x]/q$. The identity map $\id_A:A[x]/q\to N$ is a partial immersion and, if $A|<|N|$ it can be extend to one which is defined on the solution of $q(x)$ and \ssf{2} follows. In general, we need to apply   Hilbert's Basis Theorem which says that $p$ is finitely generated. In other words, $p(x)$ is a principal $\Delta(A)\jj$type, see Exercise~\ref{ex_fingen_principal}. If $p(x)$ is principal, we can replace $A$ with some finite subset. 
% \end{proof}


We conclude this section by showing that the notions of primeness for types and ideals coincide (if we restrict to types closed under logical consequences).

\begin{proposition}\label{prop_tipi_e_ideali_primi}
Let $A\subseteq M\models T_{\rm id}$ and let $p(x)$ be a $\Delta(A)\jj$type closed under logical consequences. Then the following are equivalent
\begin{itemize}
\item[1.] $p(x)$ is a prime $\Delta(A)\jj$type;
\item[2.] $p$ is a prime ideal.
\end{itemize}
\end{proposition}

\begin{proof}
\ssf{1}$\IMP$\ssf{2} \ Assume \ssf{1} and suppose that the polynomial $t(x)\cdot s(x)$ belongs to $p$. Clearly, over $T_{\rm id} \cup\Diag\<A\>_M$  we have $\ \proves\ t(x)\cdot s(x)=0\imp  t(x)=0\vee s(x)=0$. As $p(x)$ is a prime $\Delta(A)\jj$type, $p(x)\proves t(x)=0$ or $p(x)\proves s(x)=0$. By Proposition~\ref{prop_chiusura-radicale}, the type $p(x)$ is closed under logical consequences, therefore $t(x)\in p$ or $s(x)\in p$.

\ssf{2}$\IMP$\ssf{1} \ Assume $p$ is a prime ideal and for some $t_i(x)=0\in\Delta(A)$

\ceq{\hfill p(x)}{\proves}{\bigvee^n_{i=1} t_i(x)=0.}

Then

\ceq{\hfill p(x)}{\proves}{\prod^n_{i=1} t_i(x)\ =\ 0}

Since $p(x)$ is closed under logical consequences, and $p$ is a prime ideal, $t_i(x)\in p$ for some $i$. Hence $p(x)$ contains the equation $t_i(x)=0$. By Corollary~\ref{coroll_test_primalita} this suffices to prove that $p(x)$ is a prime $\Delta(A)\jj$type.
\end{proof}


%says that if the ideal generated by $p$ is proper (i.e.\@ does not contain $1$), then $p(x)$ has a solution in $N$. This is a consequence of Corollary~\ref{coroll_Nullstellensatz}. in fact, if $p(x)$ is inconsistent in $N$ the set at the r.h.s.\@ of the equality above is the whole of $A[x]$.


\begin{exercise}\label{ex_weakNullstellensatz}Let $N\models T_{\rm acf}$ and let $p(x)$ be a $\Delta(N)\jj$type where $|x|<\omega$. Prove that the following are equivalent
\begin{itemize}
\item[1.] $p$ is a proper ideal;
\item[2.] $p(x)$ has a solution in $N$.\QED
\end{itemize}
\end{exercise}


\begin{exercise}\label{ex_fingen_principal}
Let $A\subseteq M\models T_{\rm id}$ and let $p(x)$ be a $\Delta(A)\jj$type. Prove that the following are equivalent
\begin{itemize}
\item[1.] $p(x)$ is a principal $\Delta(A)\jj$type;
\item[2.] the ideal generated by $p$ is finitely generated.\QED
\end{itemize}
\end{exercise}


\end{document}
