% !TEX root = creche.tex
\documentclass[creche.tex]{subfiles}
\chapter{Some algebraic structures}
\label{algebraic}

\def\medrel#1{\parbox[b]{6ex}{\hfil$#1$}}
\def\ceq#1#2#3{\parbox[b]{25ex}{$\displaystyle #1$}\medrel{#2}$\displaystyle #3$}

The main result in this chapter is Corollary~\ref{coroll_Nullstellensatz}, the elimination of quantifiers in algebraically closed fields, which in algebra is called Chevalley's Theorem on constructible sets.
%
From it we derive Hilbert's Nullstellensatz~\ref{coroll_Nullstellensatz}.
%
Finally, we isolate the model theoretic properties of those types that correspond to the algebraic notions of prime and radical ideal of polynomials.

%At the cost of a few repetitions the first three sections of the chapter are not a prerequisite for the rest.

The first sections of this chapter are not a pre-requisite for Sections~\ref{anelli}\kern1.5pt--\kern1pt\ref{Nullstellensatz}, at the cost of a few repetitions in the latter.

\begin{notation}\label{notation1}
Recall that when $A\subseteq M$ we denote by \emph{$\<A\>_M$\/} the substructure of $M$ generated by $A$.
%
Then $\<A\>_M\subseteq N$ is equivalent to $N\models \Diag\,\<A\>_M$.
%
The diagram of a structure has been defined in Notation~\ref{note_tipi_diagramma}.

In this chapter, whenever some $A\subseteq M\models T$ are fixed, by \textit{model\/} we mean superstructures of $\<A\>_M$ that models $T$.
%
The notions of \textit{logical consequence}, \textit{consistency}, \textit{completeness}, etc.\@ are modified accordingly, and we write $\,\proves\,$ for $T\cup\Diag\<A\>_M\proves\,$.

We say that a type $p({\mr x})$ is \emph{trivial\/} if $\,\proves p({\mr x})$.\QED
\end{notation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Abelian groups}
\label{gruppi}
The language $L$ is that of additive groups.
%
The theory \emph{$T_{\rm ag}$} of \emph{abelian groups\/} is axiomatized by the universal closure of the usual axioms\nobreak
\begin{itemize}
\item[a1] $(x+y) +z\ =\ y+(x+z)$;
\item[a2] $x+(-x)\ =\ (-x)+x\ =\ 0$;
\item[a3] $x+0\ = \ 0+x\ = \ x$;
\item[a4] $x+y\ =\ y+x$.
\end{itemize}
Let ${\mr x}$ be a tuple of variables of length $\alpha$, an ordinal.
%
We write $L_{{\rm ter},{\mr x}}$ for the set of terms $t({\mr x})$ with free variables among ${\mr x}$.
%
On this set we define the equivalence relation

\ceq{\hfill \emph{$t({\mr x})\sim s({\mr x})$}}%
{=}%
{T_{\rm ag}\proves t({\mr x})=s({\mr x}).}

We define the group operations on $L_{{\rm ter},{\mr x}}/\mathord{\sim}$ in the obvious way.
%
We denote by $\ZZ^{\oplus\alpha}$ the set of tuples of integers of length $\alpha$ that are almost always $0$.
%
The group operations on $\ZZ^{\oplus\alpha}$ are defined coordinate-wise.
%
The following immediate proposition implies in particular that  $L_{{\rm ter},{\mr x}}/\mathord{\sim}$ is isomorphic to $\ZZ^{\oplus\alpha}$.

\begin{proposition}\label{corol_formacanonicaterminimoduli}
  Let $A\subseteq M\models T_{\rm ag}$.
  %
  Then for every formula $\phi({\mr x})\in L_{\rm at}(A)$ there are $n\in\ZZ^{\oplus\alpha}$ and $c\in\<A\>_M$ such that 

  \ceq{\hfill\medrel{\proves}\phi({\mr x})}{\iff}{\sum_{i<\alpha}n_ix_i\ =\ c}.

  where $n=\<n_i:i<\alpha\>$ and  ${\mr x}=\<x_i:i<\alpha\>$.\QED
\end{proposition}

\begin{proof}
  Up to equivalence over $T_{\rm ag}$ the formula $\phi({\mr x})$ has the form $s({\mr x})=t({\gr a})$ for some parameter-free terms $s({\mr x})$ and $t({\gr z})$.
  %
  Over $\Diag\,\<A\>_M$, we can replace $t({\gr a})$ with a single  $c\in \<A\>_M$ and write $s({\mr x})$ as the linear combination shown above.
\end{proof}

\begin{definition}\label{def_rank_independece_ag}
  Let $M\models T_{\rm ag}$.
  %
  For $A\subseteq M$ and  $c\in M$, we say that  \emph{$c$ is independent from $A$\/} if $\<A\>_M\cap\<c\>_M=\big\{0\big\}$.
  %
  Otherwise we say that \emph{$c$ is dependent from $A$}.
  %
  The \emph{rank\/} of $M$ is the least cardinality of a subset $A\subseteq M$ such that all elements in $M$ are dependent from $A$.
  %
  We denote it by \emph{$\rank(M)$}.\QED
\end{definition}  

Note that when $M$ is a vector space the condition $\<A\>_M\cap\<c\>_M=\big\{0\big\}$ is equivalent to saying that $c$ is not a linear combination of vectors in $A$.
%
Then $\rank M$ coincides with the dimension of $M$.
%
In fact, what we do here for abelian groups could be easily generalized to $D\jj$modules, where $D$ is any integral domain, and in particular to vector spaces.
%
In practice, it is more convenient to use the following syntactic characterization of independence.

An element $c$ of an abelian group is a \emph{torsion element} if $nc=0$ for some positive integer.

\begin{proposition}\label{prop_trivial_type_in_ag}
  Let $A\subseteq M\models T_{\rm ag}$.
  %
  Suppose that ${\mr c}\in M$ is not a torsion element.
  %
  Then the following are equivalent
  \begin{itemize}
  \item[1.] $c$ is independent from $A$;
  \item[2.] $p({\mr x})=\attp_M({\mr c}/A)$ is trivial (see Notation~\ref{notation1}).
  \end{itemize}
\end{proposition}
\begin{proof}
  \ssf{1}$\IMP$\ssf{2}\quad By Proposition~\ref{corol_formacanonicaterminimoduli}, formulas in $p({\mr x})$ may be assumed to have the form $n{\mr x}=a$ for some integer $n$ and some $a\in\<A\>_M$.
  %
  As this formula is satisfied by ${\mr c}$ then $a\in\<A\>_M\cap\<{\mr c}\>_M$.
  %
  Hence $a=0$.
  %
  As ${\mr c}$ is not a torsion element, $n=0$ and the equation is trivial.

  \ssf{2}$\IMP$\ssf{1}\quad If $\<A\>_M\cap\<{\mr c}\>_M\neq\big\{0\big\}$ then $n{\mr c}=a$ for some $a\in\<A\>_M\sm\{0\}$ and some $n\in\ZZ\sm\{0\}$.
  %
  Then ${\mr c}$ satisfies the equation $n{\mr x}=a$.
  %
  This equation is nontrivial (e.g., in $M$ it is not satisfied by $2c$).

\end{proof}

\begin{remark}\label{oss_liberi_qf}
  Let $k:M\to N$ be a partial embedding and let ${\gr a}$ be an enumeration of $\dom k$.
  %
  We claim that  $k\cup\big\{\<{\mr b},{\mr c}\>\big\}:M\to N$ is a partial embedding for every ${\mr b}\in M$ and ${\mr c}\in N$ that are independent from ${\gr a}$, respectively $k{\gr a}$.
  %
  In fact, it suffices to check that $M,{\mr b},{\gr a}\,\equiv_{\rm at}N, {\mr c},k{\gr a}$.
  %
  Suppose $\phi({\mr x}\,;{\gr z})\in L_{\rm at}$ \ is such that $M\models\phi({\mr b}\,;{\gr a})$.
  %
  Then by independence $\phi({\mr x}\,;{\gr a})$ is trivial, i.e.

  \ceq{\hfill T_{\rm ag} \cup\ \Diag\<{\gr a}\>_M}{\proves}{\phi({\mr x}\,;{\gr a}).}

  As $\<{\gr a}\>_M$ and  $\<k{\gr a}\>_N$ are isomorphic structures 

  \ceq{\hfill T_{\rm ag}\ \cup\ \Diag\<k{\gr a}\>_N}{\proves}{\phi({\mr x}\,;k{\gr a}).}

  Therefore $N\models\phi({\mr c}\,;k{\gr a})$.
  %
  This proves $M,{\mr b},{\gr a}\,\Rrightarrow_{\rm at}N, {\mr c},k{\gr a}$.
  
  As the same assumptions apply to $k^{-1}:N\to M$, we also have $M,{\mr b},{\gr a}\,\Lleftarrow_{\rm at}N, {\mr c},k{\gr a}$.\QED 
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Torsion-free abelian groups}

The theory of \emph{torsion-free abelian groups\/} extends $T_{\rm ag}$ with the following axioms for all positive integers $n$
\begin{itemize}
\item[tf] $nx= 0\imp x=0$.
\end{itemize}
We denote this theory by \emph{$T_{\rm tfag}$}.
%
It is not difficult to see that in a torsion-free abelian group every equation of the form $\,nx = a\,$ has at most one solution.

\begin{proposition}
Let $M\models T_{\rm tfag}$ be uncountable.
%
Then $\rank M=|M|$.

\end{proposition}

\begin{proof}
  Let $A\subseteq M$ have cardinality $<|M|$.
%
  We claim that $M$ contains some element that is independent from $A$.
%
  It suffices to show that the number of elements that are dependent from $A$ is $<|M|$.
%
  If $c\in M$ is dependent from $A$ then, by Proposition~\ref{prop_tfag_tipi_princ_comp}, it is a solution of some formula $L_{\rm at}(A)$.
%
  As there is no torsion, such a formula has at most one solution.
%
  Therefore the number of elements that are dependent from $A$ is at most $|L_{\rm at}(A)|$, that is $\max\big\{|A|,\omega\big\}$.
%
  If $M$ is uncountable the claim follows.
\end{proof}

\begin{proposition}\label{prop_tfag_tipi_princ_comp}
Let $A\subseteq M\models T_{\rm tfag}$.
%
 Let $p({\mr x})=\atpmtp({\mr b}/A)$, where ${\mr b} \in M$.
%
Then one of the following holds   
\begin{itemize}
\item[1.] ${\mr b}$ is independent from $A$;
\item[2.] $M\models\phi({\mr b})$ for some $\phi({\mr x})\in L_{\rm at}(A)$ such that $\ \proves\ \phi({\mr x})\imp p({\mr x})$.
\end{itemize}
\end{proposition}

Note the similarity with Example~\ref{ex_infiniti_colori}, where the independent type is $q({\mr x})$ and the isolating formulas are the $r_i({\mr x})$.

It is important to observe that the set $A$ above may be infinite.
%
This is essential to obtain Corollary~\ref{corol_ModDivUltraOmog}, and it is one of the main differences between this example and the examples encountered in Chapter~\ref{relational}.

\begin{proof}
If ${\mr b}$ is dependent from $A$, then ${\mr b}$ satisfies a non trivial atomic formula $\phi({\mr x})$ which we claim is the formula required in \ssf{2}.
%
It suffices to show that $\phi({\mr x})$ implies a complete $L_{\rm at^\pm}(A)$-type.
%
Clearly this type must be $p({\mr x})$.
%
Let $\phi({\mr x})$ have the form $n{\mr x}=a$ for some $n\in\ZZ\sm\{0\}$ and ${\gr a}\in\<A\>_M\sm\{0\}$.
%
We show that for every $m\in\ZZ$ and every ${\gr c}\in\<A\>_M$ one of the following holds
\begin{itemize}
\item[a.] $\proves\   n{\mr x}={\gr a}\imp m{\mr x}={\gr c}$;
\item[b.] $\proves\   n{\mr x}={\gr a}\imp m{\mr x}\neq {\gr c}$.
\end{itemize} 
Suppose not for a contradiction that neither \ssf{a} nor \ssf{b} holds and fix models $N_1$, $N_2$ and some $b_i\in N_i$ such that
\begin{itemize}
\item[a$'$.] $N_1\models n{\mr b_1}={\gr a}$ \ and \ $N_1\models m{\mr b_1}\neq {\gr c}$;
\item[b$'$.] $N_2\models n{\mr b_2}={\gr a}$ \ and \ $N_2\models m{\mr b_2} = {\gr c}$.
\end{itemize} 
From \ssf{b$'$} we infer that $N_2\models m{\gr a}=n{\gr c}$.
%
%
As $N_1$ is torsion-free, from \ssf{a'} we infer that $N_1\models m{\gr a}\neq n{\gr c}$.
%
But $m{\gr a}=n{\gr c}$ is a formula with parameters in $\<A\>_M$, so it should have the same truth value in all superstructures of $\<A\>_M$, a contradiction.
\end{proof}




%\begin{definition} Let $A\subseteq M\models T_{\rm tfag}$. We say that an element $c\in M$ is \emph{independent from $A$\/} if the type $p({\mr x})=\attp_M(c/A)$ is trivial, that is, $N\models \A x\,p({\mr x})$ for every $\<A\>_M\subseteq N\models T_{\rm tfag}$.\QED\end{definition}  

% \begin{proposition}\label{prop_independent_ag}
% Let $k:M\to N$ be a partial isomorphism between models of $T_{\rm tfag}$. Let $b\in M$ and $c\in N$ be independent from $\dom k$, respectively $\range k$. Then  $k\cup\big\{\<b,c\>\big\}:M\to N$ is partial isomorphism.
%
% \end{proposition}
% 
% \begin{proof}
% It suffices to prove that $k\cup\big\{\<b,c\>\big\}:M\to N$ preserves the truth of atomic formulas and then apply the same argument to $k^{-1}:N\to M$. Let $a$ be an enumeration of $\dom k$ and let $p(x,z)=\attp(b,a)$. As $p(x,a)$ is a trivial type, then $M'\models\A x\,p(x,a)$ for every model $\<\dom k\>_M\subseteq M'\models T_{\rm tfag}$. As $\<\dom k\>_M$ is isomorphic to $\<\range k\>_N$ then  $N\models\A x\,p(x,ka)$, in particular $N\models p(c,ka)$. By symmetry, also $b$ realize the atomic type of $c$ over $\range a$ and the proposition follows. 
% \end{proof}


% \begin{exercise}\label{ex_ol+grf_tipi_princ_comp}
% Let $T$ be one of the theories $T_{\rm lo}$ or $T_{\rm graph}$. Let $A\subseteq M\models T$ be finite. For $b\in M$ let $p({\mr x})=\atpmtp_M(b/A)$. Prove that $\phi({\mr x})\imp p({\mr x})$ for some $\phi({\mr x})$, conjunction of formulas in $p({\mr x})$. Find a counterexample with $A$ infinite.\QED
% \end{exercise}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Divisible abelian groups}\label{dag}

The theory of \emph{divisible abelian groups\/} extends $T_{\rm tfag}$ with the following axioms for all integers $n\neq0$
\begin{itemize}
\item[div] $y\neq0\imp\E x\ nx=y$.
\end{itemize} 
We denote this theory by \emph{$T_{\rm dag}$}.

\begin{proposition}\label{prop_md_cons_sodd}
Let $A\subseteq M\models T_{\rm tfag}$ and let $\phi({\mr x})\in L_{\rm at}(A)$, where $|{\mr x}|=1$, be consistent.
%
Then $N\models\E {\mr x} \,\phi({\mr x})$ for every $N$ such that $\<A\>_M\subseteq N\models T_{\rm dag}$.
\end{proposition}

Note that in the proposition above  \textit{consistent\/} means satisfied in some $M'$ such that $\<A\>_M\subseteq M'\models T_{\rm tfag}$.

The claim in the proposition holds more generally for all $\phi({\mr x})\in L_{\rm qf}$ and also when ${\mr x}$ is a tuple of variables.
%
This follows from Lemma~\ref{lemma_modulo_divisibile_ricco_nonnumer}, whose proof uses the proposition.

\begin{proof}
We can assume that $\phi({\mr x})$ has the form $n {\mr x}= {\gr a}$ for some $n\in\ZZ$ and some ${\gr a}\in\<A\>_M$.
%
If $n=0$, then ${\gr a}=0$ since $\phi({\mr x})$ is consistent, and the claim is trivial.
%
If $n\neq0$ then by consistency ${\gr a}\neq0$, hence a solution exist in $N$ by axiom \ssf{div}.
\end{proof}

\begin{exercise}
Prove a converse of Proposition~\ref{prop_md_cons_sodd}.
%
Let $A\subseteq N\models T_{\rm ag}$ and let ${\mr x}$ be a single variable.
%
Prove that if $N\models\E{\mr x} \,\phi({\mr x})$ for every consistent $\phi({\mr x})\in L_{\rm at}(A)$, then $N\models T_{\rm dag}$.\QED
\end{exercise}

We are ready to prove that divisible abelian groups of infinite rank are $\omega$-rich.

\begin{lemma}\label{lemma_modulo_divisibile_ricco_nonnumer}
Let $k:M\imp N$ be a partial isomorphism of cardinality $<\lambda$, where $M\models T_{\rm tfag}$ and $N\models T_{\rm dag}$ is a model of rank $\ \ge\lambda$.
%
Then for every ${\mr b}\in M$ there is ${\mr c}\in N$ such that $k\cup\big\{\<{\mr b}\,;{\mr c}\>\big\}:M\imp N$ is a partial isomorphism.
\end{lemma}

\begin{proof}
Let ${\gr a}$ be an enumeration of $\dom k$ and let $p({\mr x}\,;{\gr z})=\atpmtp({\mr b}\,;{\gr a})$.
%
 The required ${\mr c}$ has to realize $p({\mr x}\,;k{\gr a})$.
%
We consider two cases.
%
If ${\mr b}$ is dependent from ${\gr a}$, then Proposition~\ref{prop_tfag_tipi_princ_comp} yields a formula $\phi({\mr x}\,;{\gr z})\in L_{\rm at}$ such that 

\noindent\rlap{\ssf{i.}}\hspace{5ex} $\proves\ \phi({\mr x}\,;{\gr a})\imp p({\mr x}\,;{\gr a})$

\noindent\rlap{\ssf{ii.}}\hspace{5ex} $\phi({\mr x}\,;{\gr a})$\ \ is consistent.

By isomorphism,  \ssf{i} and \ssf{ii} hold with ${\gr a}$ replaced by $k{\gr a}$.
%
Then by Proposition~\ref{prop_md_cons_sodd} the formula $\phi({\mr x}\,;k{\gr a})$ has a solution ${\mr c} \in N$.

The second case, which has no analogue in Lemma~\ref{lem_ordinericco}, is when ${\mr b}$ is independent from ${\gr a}$.
%
Then by   Remark~\ref{oss_liberi_qf} we may choose ${\mr c}$ to be any element of $N$ independent from $k{\gr a}$.
%
Such an element exists because $N$ has rank at least $\lambda$.
\end{proof}

Below a few important consequences of this lemma.

\begin{corollary}\label{corol_acfUltraOmog}
Work in the category of models of $T_{\rm tfag}$ with partial embeddings as morphisms. Then the following are equivalent
%
\begin{itemize}
\item[1.] $N$ is a $\lambda$-rich model
\item[2.] $N\models T_{\rm dag}$ and has rank $\ge\lambda$
\end{itemize}
In particular every uncountable $N\models T_{\rm dag}$ is rich.
\end{corollary}

\begin{corollary}\label{corol_ModDivUltraOmog}
The theory $T_{\rm dag}$ is uncountably categorical, complete, and has quantifier elimination.
\end{corollary}

\begin{proof}
Categoricity and completeness ar immediate (the category presented in the corollary above is connected).
%
As for quantifier elimination, let $k:M\to N$ is a partial isomorphism between models of $T_{\rm dag}$.
%
If $M\preceq M'$ and $M\preceq N'$ are elementary superstructures of uncountable cardinality then $k:M'\to N'$ is elementary by Theorem~\ref{thm_morphism_rich_elementary} and this suffices to conclude that  $k:M\to N$ is elementary.
\end{proof}

\begin{exercise}
Prove that every model of $T_{\rm dag}$ is $\omega\jj$ultrahomogeneous (independently of cardinality and rank).\QED
\end{exercise}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Commutative rings}
\label{anelli}

In this section $L$ is the \emph{language of (unital) rings}.
%
It contains two constants $0$ and $1$ the unary operation $-$ and two binary operations $+$ and $\cdot$.
%
The theory of rings contains the following axioms

\begin{itemize}
\item[a1-a4] as for abelian groups
\item[r1] $(x\mdot y)\mdot z\  =\ y\mdot(x\mdot z)$,
\item[r2] $1\mdot x\ =\ x\mdot 1\ =\ x$,
\item[r3] $(x+y)\mdot z\ =\ x\mdot z + y\mdot z$,
\item[r4] $z\mdot (x+y)\ =\ z\mdot x + z\mdot y$.
\end{itemize}

All the rings we consider are \emph{commutative\/} 

\begin{itemize}
\item[c] $x\mdot y\ =\ y\mdot x$.
\end{itemize}
 
We denote the theory of commutative rings by \emph{$T_{\rm cr}$}.

In what follows the theory $T_{\rm cr}\cup\Diag\<A\>_M$, for some $M$ clear from the context, is implicit in the sense of Notation~\ref{notation1}.
%
So it is important to remember that $\Diag\<A\>_M$ is not trivial even when $A=\0$.
%
In fact, $\Diag\<\0\>_M$ determines the characteristic of the models.

Let  $A\subseteq M\models T_{\rm cr}$ and let ${\mr x}$ be a tuple of variables.
%
We write $L_{{\rm ter},{\mr x}}(A)$ for the set of terms $t({\mr x})$ with free variables among ${\mr x}$ and parameters in $A$.
%
On this set we define the equivalence relation

\ceq{\hfill \emph{$t({\mr x})\sim s({\mr x})$}}%
{=}%
{\proves \ t({\mr x})=s({\mr x}).}

On $L_{{\rm ter},{\mr x}}(A)/\mathord{\sim}$ we define the ring operations in the obvious way so that $L_{{\rm ter},{\mr x}}(A)/\mathord{\sim}$ is a commutative ring.
%
We denote by $A[{\mr x}]$ the set of polynomials with variables among ${\mr x}$ and parameters in $\<A\>_M$.
%
The ring operations on $A[{\mr x}]$ are defined as usual.
%
The following proposition (which is clear, but tedious to prove) implies in particular that $L_{{\rm ter},{\mr x}}(A)/\mathord{\sim}$ is isomorphic to $A[{\mr x}]$.
%
For simplicity we state it only for $|{\mr x}|=1$.

\begin{proposition}
\label{prop_formacanonicaterminiau}
Let  $A\subseteq M\models T_{\rm cr}$ and let ${\mr x}$ be a single variable.
%
Then for every formula $\phi({\mr x})\in L_{\rm at}(A)$ there is a unique $n<\omega$ and a unique tuple $\<{\gr a_i}:i\le n\>$ of elements of $\<A\>_M$ such that ${\gr a_n}\neq0$ and 

\ceq{}{\proves}{\phi({\mr x})\ \iff\ \sum_{i\le n}{\gr a_i}{\mr x}^i\ =\ 0}.\QED
\end{proposition}

The integer $n$ in the proposition above is called the \emph{degree of $\phi(x)$}.

\begin{definition}\label{def_id_trans_alg}
   Let $A\subseteq M\models T_{\rm cr}$.
%
  We say that an element ${\mr b}\in M$ is \emph{transcendental over $A$\/} if the type $p({\mr x})=\attp_M({\mr b}/A)$ is trivial (see Notation~\ref{note_tipi_diagramma} and ~\ref{notation1}).
%
  Otherwise we say that ${\mr b}$ is \emph{algebraic over $A$}.
%
  The \emph{transcendence degree\/} of $M$ is the least cardinality of a subset $A\subseteq M$ such that all the elements of $M$ are algebraic over $A$.\QED
\end{definition}  

\begin{remark}\label{oss_liberi_cr}
Remark~\ref{oss_liberi_qf} holds here with `independent' replaced by `transcendental' and $T_{\rm ag}$ replaced by $T_{\rm cr}$.\QED
\end{remark}

\section{Integral domains}

Let $a\in M\models T$.
%
We say that $a$ is a \emph{zero divisor} if $a\,b=0$ for some $b\in M\sm\{0\}$.
%
An \emph{integral domain\/} is a commutative ring without zero divisors.
%
The theory of integral domains contains the axioms of commutative rings and the following
\begin{itemize}
\item[nt.] $0\neq 1$
\item[id.] $x\mdot y =0\ \imp\ x=0\ \vee\ y=0$.
\end{itemize}

We denote the theory  of integral domains by \emph{$T_{\rm id}$}.

For a prime $p$, we define the theory \emph{$T^p_{\rm id}$}, which contains $T_{\rm id}$ and the axiom
\begin{itemize}
\item[ch$_p$.]$1+\dots \mbox{($p$ times)}\dots +1=0$.
\end{itemize}
The theory \emph{$T^0_{\rm id}$\/} contains the negation of \ssf{ch$_p$} for all $p$.
%
Note that all models of $T^p_{\rm id}$ have the same characteristic in the model theoretic sense defined in~\ref{def_characteristic}.
%
In the remaining section we work in the category of models of $T_{\rm id}$ with partial embeddings as morphisms.
%
This category consists of countably many connected components each containing all models of $T^p_{\rm id}$ for some $p$.


\begin{proposition}\label{prop_uncontable_trascendente}
Let $M\models T_{\rm id}$ be uncountable.
%
Then $M$ has transcendence degree $|M|$.
\end{proposition}

\begin{proof}
In an integral domain every polynomial has finitely many solutions and there are $|L(A)|$ polynomials over $A$.
\end{proof}


\begin{proposition}\label{prop_di_tipi_princ_comp}
Let $A\subseteq M\models T_{\rm id}$.
%
For ${\mr b}\in M$ let $p({\mr x})=\atpmtp({\mr b}/A)$.
%
Then one of the following holds  
\begin{itemize}
\item[1.] ${\mr b}$ is transcendental over $A$;
\item[2.] $M\models\phi({\mr b})$ for some $\phi({\mr x})\in L_{\rm at}(A)$ such that
$\ \proves\ \phi({\mr x})\imp p({\mr x})$.
\end{itemize}
\end{proposition}

Note the similarity with Example~\ref{ex_infiniti_colori}, where the transcendental type is $q({\mr x})$ and the isolating formulas are the $r_i({\mr x})$.

As in Proposition~\ref{prop_tfag_tipi_princ_comp}, the set $A$ may be infinite.
%
This is essential to obtain Corollary~\ref{corol_acfUltraOmog}.

\begin{proof}
Suppose ${\mr b}$ is not transcendental, i.e.\@ it satisfies a non trivial atomic formula.
%
Let $\phi({\mr x})\in L_{\rm at}(A)$ be a non trivial formula with minimal degree such that $\phi({\mr b})$.
%
We prove that $\phi({\mr x})$ implies a complete $L_{\rm at^\pm}(A)$-type.
%
Clearly this type must be $p({\mr x})$.
%
We prove that for any $\xi({\mr x})\in L_{\rm at}(A)$ one of the following holds
\begin{itemize}
\item[1.] $\ \proves\ \phi({\mr x})\imp\phantom{\neg}\xi({\mr x})$
\item[2.] $\ \proves\ \phi({\mr x})\imp\neg\xi({\mr x})$.
\end{itemize} 
Let us write $a({\mr x})=0$ and $a'({\mr x})=0$ for the formulas $\phi({\mr x})$ and $\xi({\mr x})$, respectively.
%
If $\<A\>_M$ is a field, choose a polynomial $d({\mr x})$ of maximal degree such that for some polynomials $t({\mr x})$ and $t'({\mr x})$ the following hold
\begin{itemize}
\item[a.] $d({\mr x})\,t({\mr x})\;=a({\mr x})$
\item[a$'$.] $d({\mr x})\,t'({\mr x})=a'({\mr x})$,
\end{itemize}

If $\<A\>_M$ is not a field, polynomials $d({\mr x})$, $t({\mr x})$ and $t'({\mr x})$ as above exist with coefficients in the field of fractions of $\<A\>_M$.
%
Then \ssf{a} and \ssf{a'} hold up to a factor in $\<A\>_M$ which we absorb in $a({\mr x})$ and $a'({\mr x})$.

From \ssf{a} we get $d({\mr b})=0$ or $t({\mr b})=0$.
%
In the first case, as $a({\mr x})$ has minimal degree, we conclude that $t({\mr x})$ is constant.
%
This implies that any zero of $a({\mr x})$ is also a zero of $a'({\mr x})$, that is, it implies \ssf{1}.

Now suppose $t({\mr b})=0$.
%
Then the minimality of the degree of $a({\mr x})$ implies that $d({\mr x})=d$, where $d$ is a nonzero constant.
%
If $\<A\>_M$ is a field, apply B\'ezout's identity to obtain two polynomials $c({\mr x})$ and $c'({\mr x})$ such that $d=a({\mr x})c({\mr x})+a'({\mr x})c'({\mr x})$.
%
Then $a({\mr x})$ and $a'({\mr x})$ have no common zeros, and \ssf{2} follows.
%
If $\<A\>_M$ is not a field, we use  B\'ezout's identity in the field of fractions of $\<A\>_M$ and, for some $d'\in\<A\>_M\sm\big\{0\big\}$, obtain $d'd=a({\mr x})c({\mr x})+a'({\mr x})c'({\mr x})$.
%
Then we reach the same conclusion.
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Algebraically closed fields}

Let $a,b\in M\models T_{\rm id}$.
%
We say that $b$ is the \emph{inverse\/} of $a$ if $a\mdot b=1$.
%
A field is a commutative ring where every non-zero element has an inverse.
%
The \emph{theory of fields\/} contains $T_{\rm id}$ and the axiom
\begin{itemize}
\item[f.]$\E  y\; \big[x\neq0\ \imp\ x\mdot y =1\big]$.
\end{itemize}
Fields are structures in the signature of rings: the language contains no symbol for the multiplicative inverse.
%
So, substructures of fields are merely integral domains.

The theory of \emph{algebraically closed field}, which we denote by \emph{$T_{\rm acf}$}, also contains the following axioms for every positive integer $n$

\begin{itemize}
\item[ac.] $\E {\mr x}\ \big( {\mr x}^{n} + {\gr z_{n-1}} {\mr x}^{n-1} + \dots + {\gr z_1}  {\mr x} + {\gr z_0}\ \ =\ \ 0\big)$
\end{itemize}

The theory \emph{$T^p_{\rm acf}$} is defined in analogy to $T^p_{\rm id}$ in the previous section.

\begin{proposition}\label{prop_acf_cons_sodd}
Let $A\subseteq M\models T_{\rm id}$ and let $\phi({\mr x})\in L_{\rm at}(A)$, where $|{\mr x}|=1$, be consistent.
%
Then $N\models\E {\mr x} \,\phi({\mr x})$ for every model $N\models T_{\rm acf}$.
\end{proposition}

Note that in the proposition above \textit{consistent\/} means satisfied in some $M'$ such that $\<A\>_M\subseteq M'\models T_{\rm id}$.

The claim in the proposition holds more generally for all $\phi({\mr x})\in L_{\rm qf}$ when ${\mr x}$ is a tuple of variables.
%
This follows from Lemma~\ref{lem_acf_ricco_nonnumer} whose proof uses the proposition.

\begin{proof}
Up to equivalence $\phi({\mr x})$ has the form ${\gr a_n}{\mr x}^n + \dots + {\gr a_1} {\mr x} + {\gr a_0}=0$ for some ${\gr a_i}\in\<A\>_N$.
%
Choose $n$ minimal.
%
If $n=0$ then ${\gr a_0}=0$ by the consistency of $\phi({\mr x})$ and the claim is trivial.
%
Otherwise ${\gr a_n}\neq0$ and the claim follows from \ssf{f} and \ssf{ac}.
\end{proof}

\begin{lemma}\label{lem_acf_ricco_nonnumer}
Let $k:M\imp N$ be a partial isomorphism of cardinality $<\lambda$, where $M\models T_{\rm id}$ and $N\models T_{\rm acf}$ has transcendence degree $\ge\lambda$.
%
Then for every ${\mr b}\in M$ there is ${\mr c}\in N$ such that $k\cup\big\{\<{\mr b},{\mr c}\>\big\}:M\imp N$ is a partial isomorphism.
\end{lemma}

The following is the proof of Lemma~\ref{lemma_modulo_divisibile_ricco_nonnumer} which we repeat here for convenience.

\begin{proof}
Let ${\gr a}$ be an enumeration of $\dom k$ and let $p({\mr x}\,;{\gr z})=\atpmtp_M({\mr b}\,;{\gr a})$.
%
The required ${\mr c}$ has to realize $p({\mr x}\,;k{\gr a})$.
%
We consider two cases.
%
If ${\mr b}$ is algebraic over ${\gr a}$, then Proposition~\ref{prop_di_tipi_princ_comp} yields a formula $\phi({\mr x}\,;{\gr z})\in L_{\rm at}$ such that 

\noindent\rlap{\ssf{i.}}\hspace{5ex} $\phi({\mr x}\,;{\gr a})\imp p({\mr x}\,;{\gr a})$

\noindent\rlap{\ssf{ii.}}\hspace{5ex} $\phi({\mr x}\,;{\gr a})$\ \ is consistent.

By isomorphism \ssf{i} and \ssf{ii} hold with ${\gr a}$ replaced by $k{\gr a}$.
%
Then by Proposition~\ref{prop_acf_cons_sodd} the formula $\phi({\mr x}\,;k{\gr a})$ has a solution in ${\mr c}\in N$.

The second case, which has no analogue in Lemma~\ref{lem_ordinericco}, is when ${\mr b}$ is transcendental over ${\gr a}$.
%
Then by  Remark~\ref{oss_liberi_cr} we may choose ${\mr c}$ to be any element of $N$ transcendental over $k{\gr a}$.
%
This exists because $N$ has transcendence degree $\ \ge\lambda$.
\end{proof}

Below a few important consequences of this lemma.

\begin{corollary}\label{corol_acfUltraOmog}
Work in the category of models of $T_{\rm id}$ with partial embeddings as morphisms. Then the following are equivalent
%
\begin{itemize}
\item[1.] $N$ is a $\lambda$-rich model
\item[2.] $N\models T_{\rm acf}$ and has transcendence degree $\ge\lambda$
\end{itemize}
In particular every uncountable $N\models T_{\rm acf}$ is rich.
\end{corollary}
\begin{proof}
Implication $\ssf{2}\IMP\ssf{1}$ is an immediate consequence of Lemma~\ref{lem_acf_ricco_nonnumer}.

In every connected component there is an $M\models T_{\rm acf}$ of cardinality $\lambda$ and transcendence degree $\lambda$ (by Proposition~\ref{prop_uncontable_trascendente} when $\lambda>\omega$, by compactness for $\lambda=\omega$).
%
As proved above, $M$ is rich and therefore elementarily equivalent to any $\lambda$-rich model $N$ in the same connected component.
%
This proves $\ssf{1}\IMP\ssf{2}$.
\end{proof}

\begin{corollary}
The theory $T_{\rm acf}$ has elimination of quantifiers.
\end{corollary}

\begin{proof}
Let $k:M\to N$ be a partial embedding between models of $T_{\rm acf}$.
%
Let $M'$ and $N'$ be elementary superstructures of $M$ and $N$ respectively of sufficiently large cardinality.
%
As $M'$ and $N'$ are rich, $k:M'\to N'$ is elementary by Theorem~\ref{thm_morphism_rich_elementary}.
%
Hence $k:M\to N$ is also elementary.
\end{proof}

\begin{corollary}
The theories $T^p_{\rm acf}$ are complete and uncountably categorical (i.e.\@ $\lambda$-categorical for every uncountable $\lambda$)
\end{corollary}
\begin{proof}
Two models of $T^p_{\rm acf}$ belong to the same connected component.
%
Then, as every uncountable model of $T^p_{\rm acf}$ is rich, uncountable categoricity and completeness follow.
\end{proof}

\begin{exercise}
Prove that every model of $T_{\rm acf}$ is $\omega\jj$ultrahomogeneous (independently of cardinality and transcendence degree).\QED
\end{exercise}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Hilbert's Nullstellensatz}
\label{Nullstellensatz}

\def\medrel#1{\parbox{5ex}{\hfil$\displaystyle #1$}}
\def\ceq#1#2#3{\parbox[t]{20ex}{$\displaystyle #1$}\medrel{#2}$\displaystyle  #3$}

Fix a tuple of variables \emph{$x$\/} and a subset \emph{$A$} of an integral domain \emph{$M$.}
% %
% We denote by \emph{$L_{\rm eq}(A)$} the set of formulas of the form $t(x){=}0$ where $t(x)$ is a term with parameters in $A$.
% Up to equivalence, this coincides with $L_{\rm at}(A)$.
% %
% Types $p(x)\subseteq L_{\rm eq}(A)$ are called equational types.
% %
% These corresponds to possibly infinite systems of polynomial equations with coefficients in $\<A\>_M$.
In this section we are interested in formulas in $L_{\rm at}(A)$, hence we redefine the symbol of closure under logical consequence accordingly

\ceq{\hfill\emph{$\ccl\,p(x)$}}{=}{\Big\{\phi(x)\in\atL(A)\ :\ p(x)\, \proves\, \phi(x)\Big\}.}

Recall that we work under the assumptions in Notation~\ref{notation1}.
%
In particular, in this section we work over the theory $T_{\rm id}\cup\Diag\<A\>_M$, and the symbol $\vdash$ has to be interpreted accordingly.

In general, the notion of closure under logical consequence is elusive.
%
In this respect Propositions~\ref{prop_Nullstellensatz0} and~\ref{thm_Nullstellensatz} are useful, as they give a model theoretic characterization of $\ccl\, p(x)$.
Corollary~\ref{prop_chiusura_radicale} gives an algebraic characterization.

\begin{proposition}\label{prop_Nullstellensatz0}
  Let $A\subseteq M\models T_{\rm id}$ and let $p(x)\subseteq\atL(A)$.
  %
  Let $N$ be of sufficiently large cardinality and such that $\<A\>_M\subseteq N\models T_{\rm acf}$.
  %
  Then 

  \ceq{\hfill\ccl\,p(x)}{=}{\Big\{\phi(x)\in\atL(A)\,:\,  N\models\A x\,\big[ p(x)\imp \phi(x)\big]\Big\}.}
\end{proposition}

The cardinality of $N$ is sufficiently large if $|L(A)|<|N|$ and $|x|\le |N|$; note that here $x$ has possibly infinite length.

\begin{proof} 
  Only the inclusion $\supseteq$ requires a proof.
  %
  Suppose $\phi(x)\in\atL(A)$ is such that $p(x)\wedge \neg\phi(x)$ is consistent.
  Then there is a model $M_1$ of cardinality $<|L(A)|$ and $\le |x|$ such that $M_1\models p(a)\wedge \neg\phi(a)$ for some $a\in {M_1}^{|x|}$.
  %
  By Corollary~\ref{corol_acfUltraOmog}, if $N$ is large enough, there is a partial isomorphism $h:M_1\to N$ that extends $\id_A$ and is defined on $a$.
  %
  Therefore $N\models p(ha)\wedge\neg\phi(ha)$.
  %
  So $\phi(x)$ does not belong to the set on the r.h.s.
\end{proof}

In the proposition above we could replace $\atL$ by $\atpmL$.
But here we are interesed in a strenghening, the Nullstennensatz, that requires positive formulas.

Hilbert's Nullstellensatz extends the validity of the proposition above to the case $A=M=N$ (assuming $x$ finite). 
While Proposition~\ref{prop_Nullstellensatz0} could be generalized to other theories, the Nullstellensatz rests on an exquisitely algebraic phenomenon. In fact, model theory has no general tools to deal with large sets of parameters
Algebra comes to our aid with the following lemma.
Which the reader may wish to compare with Hilbert's Basis Theorem.

\begin{lemma}\label{lem_basisthm}
  Let $A\subseteq M\models T_{\rm id}$.
  Let $p(x)\subseteq\atL(A)$, where $x$ is finite, be closed under  logical consequence. 
  Then $\psi(x)\proves p(x)$, for some $\psi(x)$ conjunction of formulas in $p(x)$.
\end{lemma}

\begin{proof}
  By induction on the length of $x$.
  If $x$ is the empty tuple, the lemma is trivial.
  Now, let $x$ be a finite tuple and let $y$ be a single variable.
  Let $p(x,y)\subseteq\atL(A)$ be closed under logical consequence.
  Write $p(x)$ for the set of formulas $\phi(x)\in\atL(A)$ such that $p(x,y)\proves\phi(x)$.
  Assume as induction hypothesis that there is a conjunction of formulas in $p(x)$, say $\psi(x)$, such that $\psi(x)\proves p(x)$.
  We prove the lemma with $x,y$ for $x$.

  Let $\psi(x,y)\in\atL(A)$ have minimal degree (in $y$) among the formulas in $p(x,y)$ such that $\psi(x)\notproves\psi(x,y)$.
  Let $n$ be the degree of $\psi(x,y)$, which is non zero, because $\psi(x)\notproves\psi(x,y)$.
  So we may write
  
  \ceq{\hfill \psi(x,y)}{=}{\Big(t_n(x)\cdot y^n + t'(x,y)=0\Big),}

  where $t'(x,y)$ is a polynomial of degree $<n$. 
  %
  We claim that

  \ceq{\ssf1\hfill\psi(x)\wedge\psi(x,y)}{\vdash}{p(x,y)}

  Suppose not for a contradiction.
  Pick among the formulas in $p(x,y)$ that are a counterexample to \ssf1, one  of minimal degree, say $\phi(x,y)$.  
  By the minimaly of $n$, the degree of $\phi(x,y)$ is $n+i$ for some $i\ge0$. 
  Hence we may write 
  
  \ceq{\hfill \phi(x,y)}{=}{\Big(s_{n+i}(x)\cdot y^{n+i}+s'(x,y) = 0\Big),}
  
  for some polynomial $s'(x,y)$ of degree $<n+i$.
  From $p(x,y)\proves\phi(x,y)$ we obtain

  \ceq{\hfill p(x,y)}{\proves}{\Big( s_{n+i}(x)\cdot t_n(x)\cdot y^{n+i} + t_n(x)\cdot s'(x,y) =0\Big).}
  
  Now, using that $p(x,y)\proves\psi(x,y)$

  \ceq{\ssf2.\hfill p(x,y)}{\proves}{\Big( -s_{n+i}(x)\cdot t'(x,y)\cdot y^{i} + t_n(x)\cdot s'(x,y) =0\Big).}
  
  But the polynomial in \ssf2 has degree $<n+i$ and this contradicts the minimality of the degree of $\phi(x,y)$.
  A contradicion that proves the proposition.
\end{proof}

\begin{void_thm}[Hilbert's Nullstellensatz (model theoretic version)]\label{thm_Nullstellensatz}
  Let $N\models T_{\rm acf}$. 
  For every type $p(x)\subseteq\atL(N)$, where $x$ is a finite tuple, we have

  \ceq{\hfill\ccl\, p(x)}{=}{\Big\{\phi(x)\in\atL(N)\ :\ N\models\A x\,[ p(x)\imp\phi(x)]\Big\}.}
\end{void_thm}

\begin{proof}
  By Proposition~\ref{prop_Nullstellensatz0}, the equality above holds if we replace $N$ by a sufficiently large elementay extension $N'$, i.e.
  
  \ceq{}{=}{\Big\{\phi(x)\in\atL(N)\ :\ N'\models\A x\,[ p(x)\imp\phi(x)]\Big\}.}
  
  Since $p(x)$ and $\ccl\,p(x)$ are logically equivalent, we can replace one by the other.
  Then, by Lemma~\ref{lem_basisthm}, we can replace $\ccl\,p(x)$ by an equivalent formula $\psi(x)$
  
  \ceq{}{=}{\Big\{\phi(x)\in\atL(N)\ :\ N'\models\A x\,[\psi(x)\imp\phi(x)]\Big\}.}
  
  Now, by elementarity, we replace $N$ back

  \ceq{}{=}{\Big\{\phi(x)\in\atL(N)\ :\ N\models\A x\,[\psi(x)\imp\phi(x)]\Big\}.}

  Finally, we replace $p(x)$ back and obtain the desired equality.
\end{proof}

In the rest of this section, we show how to translate the model theoretic version of the Nullstellensatz into a more common algebraic formulation.

Let $A[x]$ be the ring of polynomials with variables in $x$ and coefficients in $\<A\>_M$.
%
We identify $\atL(A)$ and $A[x]$ in the obvious way.
%
A type $p(x)\subseteq\atL(A)$ is identified with a set $\P_p\subseteq A[x]$.
Conversely, for any subset $\P\subseteq A[x]$ we write $p_\P(x)$ for the associated type.

We would like to characterize $\ccl\,p(x)$ in algebraic terms.
The following is a preliminary result.

\begin{proposition}\label{prop_tipi_e_ideali_primi}
  Let $A\subseteq M\models T_{\rm id}$ and let $p(x)\subseteq\atL(A)$.
  %
  The following are equivalent
  \begin{itemize}
  \item[1.] $p(x)$ is a prime type;
  \item[2.] $\P_p$ is a prime ideal.
  \end{itemize}
\end{proposition}

\begin{proof}
  \ssf1$\IMP$\ssf2 \ Recall that, by our definition, a prime type is closed under logical consequence. 
  Therefore to prove that $\P_p$ is an ideal, it suffices to note that the following entailments hold for every pair of polynomials $t(x)$ and $s(x)$

  \ceq{\hfill t(x)=0}{\proves}{s(x)t(x) = 0}

  \ceq{\hfill s(x)=t(x)=0}{\proves}{s(x)+t(x) = 0}

  Finally, to prove that $\P_p$ is prime, suppose that the polynomial $t(x)\cdot s(x)$ belongs to $\P_p$.
  %
  As we are working over $T_{\rm id}$
  
  \ceq{\hfill t(x)\cdot s(x)=0}
  {\proves}
  {t(x)=0\vee s(x)=0}
  
  If $p(x)$ is a prime type, $p(x)\proves t(x)=0$ or $p(x)\proves s(x)=0$.
  %
  As $p(x)$ is closed under logical consequence, $t(x)\in\P_p$ or $s(x)\in\P_p$.

  \ssf2$\IMP$\ssf1 \ First, we prove that $p(x)$ is closed under logical consequence.
  Equivalently, we assume that $t(x)=0\notin p(x)$ and prove that $p(x)\wedge t(x)\neq0$ is consistent.
  As $\P_p$ is a prime ideal, $A[x]/\P_p$ is integral domain.
  We denote by $x+\P_p$ the equivalence class of the polynomial $x\in A[x]$.
  Then  $x+\P_p$ satisfies exactly the formulas in $p(x)$. 
  Hence it witnesses the consistency of $p(x)\wedge t(x)\neq0$ in $A[x]/\P_p$.

  We now prove that $p(x)$ is prime.
  Let $t_i(x)$ be polynomials such that

  \ceq{\hfill p(x)}{\proves}{\bigvee^n_{i=1} t_i(x)=0.}

  Then

  \ceq{\hfill p(x)}{\proves}{\prod^n_{i=1} t_i(x)\ =\ 0}

  Since $p(x)$ is closed under logical consequence, and $\P_p$ is a prime ideal, $t_i(x)\in\P_p$ for some $i$.
  %
  Hence $p(x)$ contains the equation $t_i(x)=0$.
  %
  By Corollary~\ref{coroll_test_primalita} this suffices to prove that $p(x)$ is a prime type.
\end{proof}

\begin{proposition}\label{prop_chiusura-radicale}
  Let $A\subseteq M\models T_{\rm id}$ and let $p(x)\subseteq\atL(A)$. 
  Then the following are equivalent for every $\phi(x)\in\atL(A)$
  \begin{itemize}
    \item[1.] $p(x)\proves\phi(x)$;
    \item[2.] $q(x)\proves\phi(x)$ for every prime type $q(x)\subseteq\atL(A)$ containing $p(x)$.
  \end{itemize} 
\end{proposition}

\begin{proof}
  Only \ssf2$\IMP$\ssf1 requires a proof.
  %
  Assume that $p(x)\notproves\phi(x)$.
  %
  Then there is an $N$ such that $\<A\>_M\subseteq N\models T_{\rm id}$ and $N\models p(a)\wedge\neg\phi(a)$ for some $a\in N^{|x|}$.
  %
  Let $q(x)=\attp_N(a/A)$.
  %
  Then $q(x)$ is prime and $\phi(x)\notin q(x)$.
\end{proof}

For any subset $\P\subseteq A[x]$ we write \emph{$\sqrt{\P}$\/} for the intersection of all prime ideals containing $\P$.
This is called the radical ideal generated by $\P$.
From Propositions~\ref{prop_tipi_e_ideali_primi} and~\ref{prop_chiusura-radicale} we obtain the following algebraic characterization of $\ccl\,p(x)$.

\begin{corollary}\label{prop_chiusura_radicale}
  Let $A\subseteq M\models T_{\rm id}$ and let $p(x)\subseteq\atL(A)$.
  %
  Then $\P_{\ccl\,p(x)}=\sqrt{\P_p}$.
  Equivalently, $\ccl\,p_\P(x)=p_{\sqrt{\P}}$ for all subset $\P\subseteq A[x]$.\QED
\end{corollary}

We are now ready to translate the Nullstellensatz into a language more familiar to algebraists.
Fix $N\models T_{\rm acf}$.
Let $\P\subseteq N[x]$.
The algebraic variety associated to $\P$, often denoted by \emph{$V(\P)$,} is the set $p_\P(N)$.
Viceversa, given $A\subseteq N$, let \emph{$\I(A)$\/} be the set of polynomials in $N[x]$ that vanish at all points in $A$.
Clearly, $\I(A)$ is an ideal of $N[x]$.

\begin{void_thm}[Hilbert's Nullstellensatz (standard version)]\label{thm_Nullstellensatz2}
  Let $N\models T_{\rm acf}$. 
  Let $\P\subseteq N[x]$ where $x$ is a finite tuple.
  Then $\I\big(V(\P)\big)=\sqrt{\P}$.
\end{void_thm}

\begin{proof}
  Note that $V(\P)=p_\P(N)$.
  Hence $p_{\I}(x)$, where $\I=\I(V(\P))$, is the set of formulas $\phi(x)\in\atL(N)$ such that $V(\P)\subseteq\phi(N)$.
  In other words, $p_{\I}(x)$ is the set containing those formulas such that $N\models\A x[p_\P(x)\imp\phi(x)]$.
  Hence from the model theoretic version of the Nullstellensatz we obtain $p_{\I}(x)=\ccl\,p_\P(x)$, that in turn coincides with $p_{\I}(x)=p_{\sqrt{\P}}(x)$ by the corollary above.
\end{proof}

% \begin{exercise}\label{ex_weakNullstellensatz}
%   Let $N\models T_{\rm acf}$ and let $p(x)\subseteq\atL(N)$ where $|x|<\omega$.
% %
%   Prove that the following are equivalent
%   \begin{itemize}
%   \item[1.] $p$ is a proper ideal;
%   \item[2.] $p(x)$ has a solution in $N$.
%   \end{itemize}
%   The claim is a model theoretic translation of is what is kown as the weak Nullstellensatz.\QED
% \end{exercise}

% \begin{exercise}\label{ex_fingen_principal}
%   Let $A\subseteq M\models T_{\rm id}$ and let $p(x)\subseteq\atL(A)$.
% %
% Prove that the following are equivalent
%   \begin{itemize}
%   \item[1.] $p(x)$ is a principal type;
%   \item[2.] the ideal generated by $p$ is finitely generated.\QED
% \end{itemize}
% \end{exercise}

