% !TEX root = creche.tex
\chapter{Group actions on models}
\label{actions}

\def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
\def\ceq#1#2#3{\parbox[t]{17ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}

\noindent\llap{\textcolor{red}{\Large\warning}\kern1.5ex}\ignorespaces
Chapter under revision.

In this chapter, $L$ is a signature, $T$ is a complete theory without finite models, and $\U$ is a saturated model of inaccessible cardinality $\kappa$ strictly larger than $|L|$.
We use the same notation and make the same implicit assumptions as in Section~\ref{monster}.

Assumption~\ref{notation_GXphi} below is in force throughout the chapter.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The dual perspective on invariance}\label{dual_perspective}
% \def\BDelta{\LDelta\kern-.4ex_{{\rm qf}}}

We revisit the notions of invariance introduceted in Chapter~\ref{invariant} in a more general setting.

\begin{assumption}\label{notation_GXphi}
Let $\Delta\subseteq L_{{\mr x}\,{\gr z}}(\U)$.
Given any \emph{$\mrX$\/} $\subseteq\U^{\mr x}$ and \emph{$\grZ$\/} $\subseteq\U^{\gr z}$, we define the structure \emph{$\UDelta$\/} $=\big\<\mrX\,;\grZ\big\>$.
This is a 2-sorted structure whose signature  \emph{$\LDelta$\/} contains relation symbols for every formula $\phi({\mr x}\,;{\gr z})\in\Delta$.
As there is little risk of confusion, these relations symbols are also denoted by $\phi({\mr x}\,;{\gr z})$, and we identify $\LDelta$ with a subset of $L$. We write \emph{$G$\/} for some fixed subgroup of $\Aut(\UDelta)$ and $H$ is some arbitrary subgroup of $G$.
\end{assumption}

When $\mrX$ and $\grZ$ are type definable and $\Delta$ is small, $\UDelta$ is a saturated structure.
But, as for the time being we do not need compactness, until further notice these sets are arbitrary.

In the first few sections we only work a subset of the quantifier-free fragment of $\LDelta$.
Let $\BDelta(\grZ)$ be the set of Boolean combinations of the sets $\phi(\mrX\,;{\gr b})$, for $\phi({\mr x}\,;{\gr z})\in\Delta$ and ${\gr b}\in\grZ$.
The same symbol is also used to denote the collection of formulas defining these sets.
%  $\LDelta_{{\rm\,at^\pm}\!,\,{\mr x}}(\grZ)$ and 
% $\LDelta_{{\rm\,qf},\,{\mr x}}(\grZ)$ with 
% $\pmDelta(\grZ)$, respectively 
We write $S_\Delta(\grZ)$ for the set of complete $\BDelta(\grZ)$-types~--~which we may conveniently think as subsets of $\pmDelta(\grZ)$.
In this chapter the types in $S_\Delta(\grZ)$ are required to be finitely consistent $\mrX$~--~a piece of information that we will not display in the notation as there is little risk of ambiguity.

% A set $\mrD\subseteq\mrX$ is \emph{$\BDelta({\grZ})$-definable\/} if $\mrD=\phi(\mrX)$ for some $\phi({\mr x})\in\BDelta({\grZ})$.
% In the literature these sets are sometime called \textit{relatively\/} definable to distinguish them from $\phi(\U^{\mr x})$ and $\phi(\U^{\gr z})$.
% Similarly, we define \emph{$\BDelta({\grZ})$-type-definable\/} sets.

When $p({\mr x})\subseteq\LDelta(\grZ)$ and ${\mrD}\subseteq\mrX$ we write $p({\mr x})\proves{\mr x}\in{\mrD}$ if the inclusion $\psi(\mrX)\subseteq{\mrD}$ holds for some $\psi({\mr x})$ that is conjunctions of formulas in $p({\mr x})$.

Let \emph{$H$\/} $\le G$.
We say that $\grD\subseteq\grZ$ is \emph{invariant\/} under the action of $H$, or \emph{$H$-invariant,} if  $\grD$ is fixed setwise by $H$.
That is, $g\,\grD=\grD$ for every $g\in H$.
Yet in other words, if

\ceq{\ssf{is.}\hfill{\gr a}\in\grD}{\iff}{g\,{\gr a}\in\grD}\hfill for every ${\gr a}\in\grZ$ and every $g\in H$.

A formula is $H$-invariant if the set it defines is $H$-invariant.
We say that the type $p({\mr x})\subseteq\BDelta(\grZ)$ is \emph{invariant\/} under the action of $H$, or \emph{$H$-invariant,} if 

\ceq{\ssf{it.}\hfill\theta({\mr x}\,;{\gr\bar a})\in p}{\IFF}{\theta({\mr x}\,;g\,{\gr\bar a})\in p}\hfill for every $g\in H$ and every $\theta({\mr x}\,;{\gr\bar a})\in\BDelta(\grZ)$.

Note that $p({\mr x})$ is $H$-invariant exactly when the sets ${\gr\D_{p,\theta}}$ are.
In this section we want to discuss the invariance of types using the sets $\mrD\subseteq\mrX$.

An immediate consequence of the invariance of $\phi(\mrX\,;\grZ)$ is that $H$-translates sets in $\BDelta({\grZ})$ remain in $\BDelta({\grZ})$.
In particular, by reasoning as in Remark~\ref{rem_image_def_set} we obtain that for every $\BDelta({\grZ})$-formula $\theta({\mr x}\,;{\gr\bar b})$ and every $g\in H$

\ceq{\hfill g[\theta(\mrX\,;{\gr\bar b})]}{=}{\theta(\mrX\,;g\,{\gr\bar b}).}

Therefore, a type $p({\mr x})\subseteq\BDelta(\grZ)$ is $H$-invariant if

\ceq{\hfill p({\mr x})\proves{\mr x}\in\mrD}{\IFF}{p({\mr x})\proves{\mr x}\in g{\cdot}\mrD}\hfill for every $\mrD\subseteq\mrX$ and $g\in H$.

% At the first reading the reader may assume that $H=\Aut(\U)$, $\mrX=\U^{\mr x}$, $\grZ=\U^{\gr z}$ and $\Delta=L_{{\mr x}\,;{\gr z}}$, where $|{\gr z}|=\omega$.
% Then $\pmDelta(\grZ)=L_{\mr x}(\U)$ and  $S_\Delta(\grZ)=S_{\mr x}(\U)$. 
% Note that when $H$ acts by automorphisms $\phi(\U^{\mr x};\U^{\gr z})$ is $H$-invariant for all $\phi({\mr x}\,;{\gr z})\in L$.

A set $\mrD\subseteq\mrX$ is \emph{syndetic\/} under the action of $H$, or \emph{$H$-syndetic\/} for short, if finitely many $H$-translates of $\mrD$ cover $\mrX$; we say \emph{$n$-$H$-syndetic\/} if $\le n$ translates suffices.
Dually, we say that $\mrD$ is \emph{thick\/} under the action of $H$, or \emph{$H$-thick\/} for short, if the intersection of any finitely many $H$-translates of $\mrD$ is nonempty; we say \emph{$n$-$H$-thick\/} when the request is limited to $\le n$ translates.
When $\mrX$ and/or $\grZ$ are not clear from the context, we say that these notions are \emph{relative\/} to $\mrX$ and $\grZ$.

The same properties may be attributed to formulas (as these are identified with the set they define).
When these properties are attributed to a type $p({\mr x})$, we understand that they hold for every conjunction of formulas in $p({\mr x})$.
See Exercise~\ref{ex_thick_types} for an alternative characterization when $p({\mr x})$ is small.

\noindent\llap{\textcolor{red}{\Large\warning}\kern1.5ex}\ignorespaces
The terminology above is taken from topological dynamics.
In~\cite{CK} the authors write \textit{quasi-non-dividing\/} for \textit{thick\/} under the action of $\Aut(\U/A)$.
Their terminology has good motivations, but it would be a mouthful if adapted to our context. 

Notation: for $\mrD\subseteq\mrX$ and $C\subseteq G$ we write \emph{$C{\cdot}\mrD$\/} for $\{h{\cdot}\mrD: h\in C\}$.

In this chapter many proofs require some juggling with negations as epitomized by the following fact.

\begin{fact}\label{fact_fip}
  The following are equivalent
  \begin{itemize}
    \item[1.] $\mrD$ is not $H$-syndetic
    \item[2.] $\neg\mrD$ is $H$-thick.
  \end{itemize}
\end{fact}

\begin{proof}
  Immediate by spelling out the definitions
  \begin{itemize}
    \item[1.] there are no finite $C\subseteq H$ such that $\mrX\ \subseteq\ \cup\, C{\cdot}{\mr\D}$.
    \item[2.] $\varnothing\ \neq\ \mrX\,\cap\,\big(\cap\, C{\cdot}\neg{\mr\D}\big)$ for every finite $C\subseteq H$.\qedhere
  \end{itemize} 
\end{proof}

Define the following type

\ceq{\hfill\emph{$\gamma_H({\mr x})$}}{=}{\{\theta({\mr x})\in \BDelta({\grZ})\ :\ \theta({\mr x})\textrm{ is }H\textrm{-syndetic}\}}

% We remark that the consistency of $\gamma_H({\mr x})$ is far from guaranteed.

\begin{corollary}\label{corol_q_pers}
  Let $p({\mr x})\subseteq\BDelta(\grZ)$ be such that $\gamma_H({\mr x})\cup p({\mr x})$ is finitely consistent.
  Then $p({\mr x})$ is $H$-thick.
\end{corollary}

\begin{proof}
  Let $\theta({\mr x})$ be a conjunction of formulas in $p({\mr x})$.
  As $\gamma_H({\mr x})\cup\{\theta({\mr x})\}$ is finitely consistent, it cannot be that $\neg\theta({\mr x})$ is $H$-syndetic.
  From Fact~\ref{fact_fip}, we obtain that $\theta({\mr x})$ is $H$-thick.
\end{proof}

The converse implication holds for complete types.

\begin{theorem}\label{thm_syndetic_invariant}
  Let $p({\mr x})\in S_\Delta(\grZ)$.
  Then the following are equivalent
  \begin{itemize}
    \item[1.] $p({\mr x})$ is $H$-invariant
    \item[2.] $p({\mr x})\proves\gamma_H({\mr x})$
    \item[3.] $p({\mr x})$ is $H$-thick.
  \end{itemize}
\end{theorem}

\begin{proof}
  \ssf1$\IMP$\ssf2.
  Let $\mrD\in\BDelta(\grZ)$ be a $H$-syndetic.
  Pick $C\subseteq H$ be finite such that $\mrX\subseteq\cup\,C{\cdot}\mrD$.
  Then $p({\mr x})\proves {\mr x}\in\cup\,C{\cdot}\mrD$.
  By completeness, $p({\mr x})\proves {\mr x}\in h\,\mrD$ for some $h\in C$.
  Finally, by invariance, $p({\mr x})\proves{\mr x}\in\mrD$.
  
  \ssf2$\IMP$\ssf3.
  By Corollary~\ref{corol_q_pers}.

  \ssf3$\IMP$\ssf1.
  % uppose $p({\mr x})$ is not $(n+2)$-thick and let $n$ be minimal.
  % Let $g_1,\dots,g_{n+2}\in H$ and $\theta({\mr x})\,;{\gr\bar b}$ witness this.
  % Then 
  Suppose $p({\mr x})$ is not $H$-invariant.
  % Then, by completeness, $p({\mr x})\proves\phi({\mr x}\,;{\gr b})\wedge\neg\phi({\mr x}\,;g\,{\gr b})$ for some $g\in H$ and $\phi({\mr x}\,;{\gr b})\in\BDelta(\grZ)$.
  % Clearly $\phi({\mr x}\,;{\gr b})\wedge\neg\phi({\mr x}\,;g\,{\gr b})$ is not $2$-$H$-thick as it is inconsistent with its $g$-translate.
  By completeness $p({\mr x})\proves{\mr x}\in(\neg\mrD\cap g{\cdot}\mrD)$ for some $g\in H$ and some $\mrD\in\BDelta(\grZ)$.
  Clearly $\neg\mrD\cap g{\cdot}\mrD$ is not $2$-$H$-thick as it is inconsistent with its $g$-translate.
\end{proof}

% \begin{corollary}\label{corol_gammaG_invaqriancer}
%   The following are equivalent for every $\BDelta(\grZ)$-definable set $\mrD$
%   \begin{itemize}
%     \item [1.] $\gamma_H({\mr x})\proves{\mr x}\in\mrD$
%     \item [2.] $p({\mr x})\proves{\mr x}\in\mrD$ for every $H$-thick $p({\mr x})\in S_\Delta(\grZ)$.
%   \end{itemize}
% \end{corollary}

% \begin{proof}
%   \ssf1$\IMP$\ssf2.
%   This is an immediate consequence of Theorem~\ref{thm_syndetic_invariant}.

%   \ssf2$\IMP$\ssf1.
%   Suppose $\gamma_H({\mr x})\not\proves{\mr x}\in\mrD$.
%   Then there is a type $p({\mr x})\in S_\Delta(\grZ)$ finitely consistent with $\gamma_H({\mr x})\cup\{{\mr x}\notin\mrD\}$.
%   By Corollary~\ref{corol_q_pers} $p({\mr x})$ is $H$-thick.
%   Then $\neg\ssf2$.
% \end{proof}

The theorem yields a necessary condition for the existence of $H$-thick global $\BDelta({\grZ})$-types.

\begin{corollary}\label{corol_def_mu}
  Assume there exists a $H$-thick type $p({\mr x})\in S_\Delta(\grZ)$.
  Then for every $\BDelta({\grZ})$-set $\mrD$
  \begin{itemize}
    \item[1.] $\mrD$ and $\neg\mrD$ are not both $H$-syndetic
    \item[2.] if $\mrD$ is $H$-syndetic then it is $H$-thick
    \item[3.] $\gamma_H({\mr x})$ is finitely consistent.\smallskip
  \end{itemize}
\end{corollary}

\begin{proof}
  Clearly, \ssf1 and \ssf2 are equivalent by Fact~\ref{fact_fip} and follow from \ssf3.
  Finally, \ssf3 is an immediate consequence of \ssf2 of Theorem~\ref{thm_syndetic_invariant}.
\end{proof}

The following theorem gives a necessary and sufficient condition for the  existence of global $H$-invariant $\BDelta({\grZ})$-type.
Ideally, we would like that every $H$-thick $\BDelta({\grZ})$-type extends to a global thick type.
Unfortunately this is not true in general (it is a strong assumption, see Section~\ref{tame_landscape}).
A set $\mrD$ is \emph{$H$-wide\/} if every finite cover of $\mrD$ by $\BDelta({\grZ})$-sets contains a $H$-thick set.
In~\cite{CK} a similar property is called \textit{quasi-non-forking.}
Our use of the term \textit{wide\/} is consistent with~\cite{Hr}, though we apply it to a narrow context.
A type is $H$-wide if every conjunction of formulas in the type is $H$-wide.

\begin{theorem}\label{thm_syndetic_invariant2}
  For every $\mrD\in\BDelta(\grZ)$ the following are equivalent 
  \begin{itemize}
    \item[1.] $\gamma_H({\mr x})\cup\{{\mr x}\in\mrD\}$ is finitely consistent
    \item[2.] there exists a $H$-thick type $p({\mr x})\in S_\Delta(\grZ)$ entailing ${\mr x}\in\mrD$
    \item[3.] $\mrD$ is $H$-wide.\smallskip
  \end{itemize}
\end{theorem}

\begin{proof}
  \ssf1$\IMP$\ssf2.
  By Corollary~\ref{corol_q_pers}, it suffices to pick any $p({\mr x})\in S_\Delta(\grZ)$ finitely consistent with $\gamma_H({\mr x})\cup\{{\mr x}\in\mrD\}$.

  \ssf2$\IMP$\ssf1.
  By Theorem~\ref{thm_syndetic_invariant}.

  \ssf2$\IMP$\ssf3.
  Let ${\mr\C_1},\dots,{\mr\C_n}$ be $\BDelta({\grZ})$-sets that cover $\mrD$.
  Pick $p({\mr x})$ as in \ssf2.
  By completeness, $p({\mr x})\proves {\mr x}\in{\mr\C_i}$ for some $i$.
  Then, by Theorem~\ref{thm_syndetic_invariant}, $\neg{\mr\C_i}$ is not $H$-syndetic.
  Therefore, by Fact~\ref{fact_fip}, ${\mr\C_i}$ is $H$-thick.

  \ssf3$\IMP$\ssf2.
  Let $p({\mr x})$ be maximal among the $\BDelta({\grZ})$-types that are finitely satisfiable in $\mrX\cap\mrD$ and are such that $\theta(\U^{\mr x})$ is $H$-wide for every $\theta({\mr x})$ that is conjunction of formulas in $p({\mr x})$.
  We claim that $p({\mr x})$ is a complete $\BDelta({\grZ})$-type.
  Suppose for a contradiction that $\theta({\mr x}),\neg\theta({\mr x})\notin p$.
  By maximality there is some formula $\psi({\mr x})$, a conjunction of formulas in $p({\mr x})$, and some $\BDelta({\grZ})$-sets ${\mr\C_1},\dots,{\mr\C_n}$ that cover both $\psi(\U^{\mr x})\cap\theta(\U^{\mr x})$ and $\psi(\U^{\mr x})\smallsetminus\theta(\U^{\mr x})$ and such that no ${\mr\C_i}$ is $H$-thick.
  As ${\mr\C_1},\dots,{\mr\C_n}$ cover $\psi(\U^{\mr x})$ this is a contradiction.
  It is only left to show that $p({\mr x})$ is $H$-thick.
  This follows from completeness and Theorem~\ref{thm_syndetic_invariant}.
\end{proof}

\begin{corollary}\label{corol_intersectionGwide}
  Let $\mrD\in\BDelta(\grZ)$ be a $H$-wide.
  Then $\mrD\cap g{\cdot}\mrD$ is $H$-wide for every $g\in H$.
\end{corollary}

\begin{proof}
  Let $p({\mr x})\in S_\Delta(\grZ)$ be a $H$-thick type such that $p({\mr x})\proves{\mr x}\in\mrD$.
  By $H$-invariance $p({\mr x})\proves{\mr x}\in g{\cdot}\mrD$.
\end{proof}

% Let $q({\mr x})\subseteq\BDelta(\grZ)$.
% We say that $q({\mr x})$ is \emph{$H$-prime\/} if for every $\BDelta(\grZ)$-definable set $\mrD$ and every $g_1,g_2\in H$ if $q({\mr x})\proves{\mr x}\in(g_1{\cdot}\mrD\cup g_2{\cdot}\mrD)$ then $q({\mr x})\proves{\mr x}\in g_i{\cdot}\mrD$ for some $i$.
% The following fact is immediate.

% \begin{fact}
%   The following are equivalent for every $\BDelta(\grZ)$-type $q({\mr x})$
%   \begin{itemize}
%     \item [1.] $q({\mr x})$ is $H$-prime and $H$-invariant
%     \item [2.] if $\mrD$ is $\BDelta(\grZ)$-definable, $g\in H$, and $q({\mr x})\proves{\mr x}\in(\mrD\cup g{\cdot}\mrD)$, then $q({\mr x})\proves{\mr x}\in\mrD$.
%   \end{itemize}
% \end{fact}

% \begin{proposition}
%   For every type $q({\mr x})\subseteq\BDelta(\grZ)$ the following are equivalent
%   \begin{itemize}
%     \item [1.] $q({\mr x})\proves\gamma_H({\mr x})$
%     \item [2.] $q({\mr x})$ is $H$-prime and $H$-invariant.
%   \end{itemize}
% \end{proposition}

% \begin{proof}
%   \ssf1$\IMP$\ssf2.
%   Suppose $q({\mr x})\proves{\mr x}\in(\mrD\cup g{\cdot}\mrD)$.
%   Let $p({\mr x})\in S_\Delta(\grZ)$ extend $q({\mr x})$.
%   By completeness $p({\mr x})\proves{\mr x}\in\mrD$ or $p({\mr x})\proves{\mr x}\in g{\cdot}\mrD$.
%   As $p({\mr x})$ is $H$-invariant by Theorem~\ref{thm_syndetic_invariant}, it follows that
%   $p({\mr x})\proves{\mr x}\in\mrD$.
%   Finally, as $p({\mr x})$ is arbitrary, $q({\mr x})\proves{\mr x}\in\mrD$. 

%   \ssf2$\IMP$\ssf1.
%   As $\mrD$ is $H$-syndetic and $q({\mr x})$ is $H$-prime, $q({\mr x})\proves{\mr x}\in g{\cdot}\mrD$ for some $g\in H$.
%   Finally $q({\mr x})\proves{\mr x}\in\mrD$ by invariance.
% \end{proof}

\begin{exercise}
  Prove that if $p(x)\in S(\U)$ is finitely satisfiable in every $M\supseteq A$ then it is thick under the action of $H=\Autf(\U/A)$.
  Is the same true for incomplete types?
\end{exercise}

\begin{exercise}
  Let $p(x)\in S_\Delta(\U)$.
  Prove that the following are equivalent
  \begin{itemize}
    \item[1.] $p(x)$ is $H$-invariant
    \item[2.] $p(x)\proves x\in\D$ for every 2-$H$-syndetic definable set $\D$
    \item[3.] $p(x)$ is 2-$H$-thick.
  \end{itemize}
\end{exercise}

\begin{exercise}
  Let $\D$ be a $\BDelta(\Z)$-type-definable set.
  Prove that the following are equivalent 
  \begin{itemize}
    \item[1.] there is a $H$-invariant type $p(x)\in S_\Delta(\Z)$ such that $p(x)\proves x\in\D$.
    \item[2.] every finite cover of $\D$ by $\BDelta(\Z)$-definable sets contains a 2-$H$-thick set.
  \end{itemize}
\end{exercise}

% \begin{exercise}\label{ex_gen_sat}
%   Let $p(x)\subseteq \BDelta(\Z)$ be $H$-syndetic.
%   Prove that it is finitely satisfiable in $\X$.
% \end{exercise}

\begin{exercise}\label{ex_thick_types}
  Prove that for every $p(x)\subseteq \BDelta(A)$ following are equivalent
  \begin{itemize}
    \item[1.] $p(x)$ is $H$-thick
    \item[2.] $p(\U^x)$ is $H$-thick.
  \end{itemize}
\end{exercise}

\begin{exercise}
  Give an example of a thick set that is not wide.
  Hint: find inspiration in Example~\ref{ex_cyclic_order}.
\end{exercise}

\begin{exercise}\label{ex_syndetic_type_vs_formulas}
  Let $\D\subseteq\X$ be a $H$-syndetic $\BDelta(\Z)$-type-definable set.
  Prove that $\D$ is definable by a $\BDelta(\Z)$-type containing only $H$-syndetic formulas.
\end{exercise}

% \begin{exercise}\label{ex_Hprime}
%   Prove that if $q(x)$ is $H$-prime and $q(x)\proves x\in \cup\,H{\cdot}\D$ for some finite $H\subseteq H$, then $q(x)\proves x\in\D$.
% \end{exercise}

% \begin{exercize}
%   Let $\mrD$ be a $\BDelta(\grZ)$-definable set.
%   Prove that the following are equivalent
%   \begin{itemize}
%     \item [1.] $\mrD$ is $H$-wide;
%     \item [2.] every finite cover of $\mrD$ by $\pmDelta({\grZ})$-definable sets contains a $H$-thick set.
%   \end{itemize}
% \end{exercize}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The connected component}\label{G0}
\def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
\def\ceq#1#2#3{\parbox[t]{12ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}

Unfortunately, syndeticity is not preserved under intersection.
In particular $\gamma_G({\mr x})$ is not a $G$-syndetic type, and it may even be inconsistent.
Then following notion is relevant

\begin{definition}\label{def_Q}\ 

  \ceq{\hfill\emph{$Q$\/}}{=}{\big\{q({\mr x})\subseteq\gamma_G({\mr x})\;:\ q({\mr x})\textrm{ maximally syndetic}\big\}.}\smallskip

  In other words, the types in $Q$ are maximal among the subtypes of $\gamma_G({\mr x})$ that are closed under conjunction.
\end{definition}

It is easy to see that $Q$ is closed under the action of $G$.
We write $\Stab(q)$ for the  stabilized of $q({\mr x})\subseteq\BDelta(\grZ)$ in $G$, that is, the subgroup $\{g\in G:g{\cdot}q({\mr x})=q({\mr x})\}$.
We write $\Stab(\mrD)$ with a similar meaning.
Finally we define

\ceq{\hfill\emph{$\Stab(Q)$}}{=}{\bigcap_{q\in Q}\Stab(q).}

Clearly, $\Stab(Q)\trianglelefteq G$.

\begin{proposition}\label{prop_gammaK}
  Write $K$ for $\Stab(Q)$. 
  For every $q({\mr x})\in Q$ we have $q({\mr x})\proves\gamma_K({\mr x})$.
  In particular, $\gamma_K({\mr x})$ is finitely consistent.
  Moreover $\gamma_K({\mr x})$ is closed under conjunction.
\end{proposition}

\begin{proof}
  As the types in $Q$ are closed under conjunction, the second claim in the proposition follows from the first.
  Let $\mrD\in\gamma_K$, then $q({\mr x})\proves{\mr x}\in k{\cdot}\mrD$ for some $k\in K$.
  Then $q({\mr x})\proves{\mr x}\in k{\cdot}\mrD$ for some $k\in K$.
  Then $q({\mr x})\proves{\mr x}\in\mrD$ follows because $k\in\Stab(q)$.
\end{proof}

\begin{proposition}\ \smallskip

  \ceq{\hfill\Stab(Q)}{=}{\big\{g\in G\ :\ \mrD\cap g{\cdot}\mrD\in\gamma_G({\mr x})\textrm{ whenever }\mrD\in\gamma_G({\mr x})\big\}.}\smallskip
\end{proposition}

\begin{proof}
  $\subseteq$. 
  Pick $k\in\Stab(Q)$ and $\mrD\in\gamma_G({\mr x})$.
  Let $q({\mr x})\in Q$ be a type containing ${\mr x}\in\mrD$.
  From the $\Stab(Q)$-invariance of $q({\mr x})$ we obtain that $q({\mr x})\proves {\mr x}\in k{\cdot}\mrD$.
  As $q({\mr x})$ is closed under conjunction, $q({\mr x})\proves {\mr x}\in \mrD\cap k{\cdot}\mrD$.

  $\supseteq$. 
  Pick $g\notin \Stab(Q)$.
  Then $q({\mr x})\neq g{\cdot}q({\mr x})$ for some $q({\mr x})\in Q$.
  Let $\phi({\mr x})\in q$ such that $q({\mr x})\not\proves g{\cdot}\phi({\mr x})$.
  By maximality, $\psi({\mr x})\wedge g{\cdot}\phi({\mr x})$ is not $G$-syndetic for some $\psi({\mr x})\in q$.
  As $q({\mr x})$ is closed under conjunction, we can assume $\phi({\mr x})=\psi({\mr x})$, then $g$ belongs to the set on the r.h.s.
\end{proof}

We remark a useful consequence of normality.

\begin{remark}\label{rem_invariance_normalsubg}
% \newlength{\ceqlength}
% \settowidth{\ceqlength}{p(x) is H-invariant\ }
% \def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
% \def\ceq#1#2#3{\parbox[t]{\ceqlength}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}
\def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
\def\ceq#1#2#3{\parbox[t]{20ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}
  Assume $H\trianglelefteq G$.
  For every $\mrD\subseteq\mrX$ and every $g\in G$ \smallskip
  
  \ceq{\hfill\mrD\textrm{ is }H\textrm{-foo}}{\IFF}{g{\cdot}\mrD\textrm{ is }H\textrm{-foo},} \smallskip
  
  where \textit{foo\/} can be replaced by \textit{syndetic,} \textit{invariant,} \textit{thick,} \textit{wide.}
  In particular, the type $\gamma_H({\mr x})$ is $G$-invariant.
  % It also follows that for any $p({\mr x})\in S_\Delta(\grZ)$
  % \begin{itemize}
  %   \item [3.] \ceq{\hfill p({\mr x})\textrm{ is }H\textrm{-invariant}}{\IFF}{g\cdot p({\mr x})\textrm{ is }H\textrm{-invariant}.}
  % \end{itemize}
\end{remark}

Recall that when $\gamma_H({\mr x})$ is finitely consistent then $H$-syndetic sets are $H$-wide, see Theorem~\ref{thm_syndetic_invariant2}.
As it happens, under the assumption of normality, this can be strengthened as follows.

\begin{proposition}\label{prop_Gsyndetic_Hthick1}
  Assume $H\trianglelefteq G$ and that $\gamma_H({\mr x})$ is finitely consistent.
  Then every $G$-syndetic $\mrD\in\BDelta(\grZ)$ is $H$-wide.
  In particular all types in $Q$ are $\Stab(Q)$-wide.
\end{proposition}

\begin{proof}
  Let $p({\mr x})\in S_\Delta(\grZ)$ be finitely consistent with $\gamma_H({\mr x})$.
  As $\mrD$ is $G$-syndetic, by completeness $p({\mr x})\proves{\mr x}\in g{\cdot}\mrD$ for some $g\in G$.
  Equivalently, $g^{-1}\!\cdot p({\mr x})\proves{\mr x}\in\mrD$.
  As $p({\mr x})$ is $H$-thick, by Remark~\ref{rem_invariance_normalsubg} also $g^{-1}\!\cdot p({\mr x})$ is $H$-thick.
  Then the proposition follows from Theorem~\ref{thm_syndetic_invariant2}.
\end{proof}

% \begin{theorem}
%   Every $\Stab(Q)$-thick $\BDelta(\grZ)$-set is $\Stab(Q)$-wide.
% \end{theorem}

Let $\mrY\subseteq\mrX$ be $H$-invariant.
When reasoning about the action relative to $\mrY$ it is convenient to confuse $\mrD\subseteq\mrX$, with $\mrD\cap\mrY$.
For instance, when we say that $\mrD$ is $H$-syndetic relative $\mrY$, we actually mean $\mrD\cap\mrY$.

\begin{proposition}\label{prop_HgenGgen}
  Let $H\trianglelefteq G$.
  Assume that $\mrX$ is type-definable.
  Let $\mrY\subseteq\mrX$ be some $H$-invariant set.
  Assume that boundedly many $G$-translates of $\mrY$ cover $\mrX$.
  Then every $\mrD\in\BDelta(\grZ)$ that is $H$-syndetic relative to $\mrY$ is $G$-syndetic.
  % Then the following are equivalent for every $\mrD\in\BDelta(\grZ)$
  % \begin{itemize}
  %   \item [1.] $\mrD$ is $G$-syndetic
  %   \item [2.] $\mrD$ is $H$-syndetic relative to $\mrY$.
  % \end{itemize}\smallskip
\end{proposition}

\begin{proof}
%   \ssf1$\IMP$\ssf2.
%   Trivial.
%
%   \ssf2$\IMP$\ssf1.
  By normality, $g{\cdot}\mrD$ is $H$-syndetic relative to $g{\cdot}\mrY$ for any $g\in G$.
  Then boundedly many $G$-translations of $\mrD$ cover $\mrX$.
  By compactness (which we may apply because $\mrX$ is type-definable), finitely many translations suffices.
\end{proof}

It would help to have a more syntactic description of $\Stab(Q)$.
The group $G^0$ defined below is a candidate. %~--~we will see that under the assumption of stability it indeed coincides with $\Stab(Q)$. 
We revisit the notions introduced in Section~\ref{eq_algebraic} as we want to apply them to $\BDelta(\grZ)$, not to the full language.%$\LDelta(\mrX,\grZ)$.

\begin{definition}\label{def_G0}
  Write \emph{$\Phi^0$\/} for the set of $\BDelta(\grZ)$-formulas/sets that have finite $G$-orbit and define%\vskip-1ex

  \ceq{\hfill\emph{$G^0$}}{=}{\Stab(\Phi)}\medrel{=}$\displaystyle\bigcap\big\{\Stab(\mrD) :\  \mrD\in\Phi^0\}$

  and%\vskip-.5ex

  \ceq{\hfill E^0}{=}{\big\{\epsilon_\D({\mr x},{\mr y})\ :\  \mrD\in\Phi^0\big\},}%\vskip-0.5ex
  
  where%\vskip-0.5ex

  \ceq{\hfill\epsilon_\D({\mr x},{\mr y})}{=}{\bigwedge_{g\in G}\big[{\mr x}\in g{\cdot}\mrD\iff{\mr y}\in g{\cdot}\mrD\big].}

  Let $P^0$ be the set of types of the form $\big\{\epsilon({\mr x}\,;{\mr a})\ :\ \epsilon({\mr x}\,;{\mr y})\in E^0\big\}$ for ${\mr a}\in\mrX$.
\end{definition}

Note that, when $G=\Aut(\UDelta)$, then $G^0$ is the group of $\LDelta$-automorphisms of $\UDelta$ that fix $\LDelta\mbox-\acl^\eq\varnothing$.% and $E$ contains all the the $\varnothing$-definable finite equivalence relations.

\begin{remark}\label{lem_trans_action}
  Equivalence classes of relations in $E^0$ are in $\Phi^0$ and every set in $\Phi^0$ is union of such equivalence classes.
  Then $G^0$ is the stabilizer of $P^0$.\smallskip

  Assume $G$ acts transitively.
  Then the sets in $\Phi^0$ are $G$-syndetic.
  Every $p({\mr x})\in P^0$ extends to some $q({\mr x})\in Q$.
  Then $\Stab(Q)\le G^0$.
\end{remark}

% \def\DLascar{L\kern-.6ex\raisebox{1.1ex}{\tiny$\Delta$}\kern-.1ex ascar}

Ideally, we would like to have $\Stab(Q)=G^0$.
This happens when the types in $P^0$ have a unique extension to a type in $Q$.
We will prove that this is the case under the assumption of stability.


\begin{definition}\label{def_G00}
  Write \emph{$\Phi^{00}$\/} for the collection of $\BDelta(\grZ)$-type-definable sets $\mrY$ with bounded $G$-orbit and define\smallskip

  \ceq{\hfill\emph{$G^{00}$}}{=}{\Stab(\Phi^{00})}\medrel{=}$\displaystyle\bigcap\big\{\Stab(\mrY) :\  \mrY\in\Phi^{00}\}$.
\end{definition}

We want to define $E^{00}$ and $P^{00}$ in analogy with $E^0$ and $P^0$.

\begin{question}
  Does $G$ acts transitively on $Q$?
\end{question}

% \begin{proposition}
%   For $\mrY\in\Phi^{00}$ define 

%   \ceq{\hfill\epsilon_\Y({\mr x},{\mr y})}{=}{\bigwedge_{g\in G}\big[{\mr x}\in g{\cdot}\mrY\iff{\mr y}\in g{\cdot}\mrY\big].}

%   Let $\M$ be a collection of $\LDelta$-models of cardinality $|\LDelta|$

%   \ceq{\hfill\epsilon_\Y({\mr x},{\mr y})}{\iff}{\big\{\big[\phi({\mr x})\iff\phi({\mr y})\ :\ \big]\big\}.}
% \end{proposition}


% and

% \ceq{\hfill E^{00}}{=}{\big\{\epsilon_\Y({\mr x},{\mr y})\ :\  \mrY\in\Phi^{00}\big\},}

% where

% \ceq{\hfill\epsilon_\Y({\mr x},{\mr y})}{=}{\bigwedge_{g\in G}\big[{\mr x}\in g{\cdot}\mrY\iff{\mr y}\in g{\cdot}\mrY\big].}

% Let $P^{00}$ be the set of types of the form $\big\{\epsilon({\mr x}\,;{\mr a})\ :\ \epsilon({\mr x}\,;{\mr y})\in E^{00}\big\}$ for ${\mr a}\in\mrX$.

% \begin{proposition}\label{prop_G0_inclusione2}
%   Assume that $G$ acts transitively.
%   Then $K\subsetyeq G^0$.\smallskip

%   % \ceq{\hfill \Stab(Q)}{\subseteq}{\big\{g\in G\ :\ \mrD\cap g{\cdot}\mrD\textrm{ is }G\textrm{-syndetic for all }G\textrm{-syndetic }\mrD\in\BDelta(\grZ)\big\}}\smallskip

%   % \ceq{}{\subseteq}{\big\{g\in G\ :\ \mrD\cap g{\cdot}\mrD\neq\varnothing\textrm{ for any }G\textrm{-syndetic }\mrD\in\BDelta(\grZ)\big\}}\smallskip


%   % \ceq{\hfill \Stab(Q)}{\subseteq}{\big\{g\in G\ :\ \mrD\cap g{\cdot}\mrD\in\gamma_G({\mr x})\textrm{ whenever }\mrD\in\gamma_G({\mr x})\big\}}\smallskip

%   % \ceq{}{\subseteq}{\big\{g\in G\ :\ \mrD\cap g{\cdot}\mrD\neq\varnothing\textrm{ whenever }\mrD\in\gamma_G({\mr x})\big\}}\smallskip

%   % \ceq{}{\subseteq}{G^0.}

% \end{proposition}

% % We will revisit this proposition under the assumption of stability and prove the converse inclusion.
% % See Theorem~\ref{thm_Z0_stable}.\vspace*{-0.5\baselineskip}

% \begin{proof}
%   The first inclusion is left to the reader.
%   We prove the second.
%   Let $g$ be an element of the second set.
%   Pick any $\mrD\in\Phi$.
%   We need to show that $g\in\Stab(\mrD)$.
%   % A fortiori $\grW$ is the stabilizer of a set with finite  $\grZ$-orbit.
%   Let $\mrC$ be an equivalence class of $\epsilon_\D({\mr x},{\mr y})$.
%   As $G$ acts transitively, $\mrC$ is $G$-syndetic.
%   Then $\mrC\cap g{\cdot}\mrC\neq\varnothing$.
%   As $\epsilon_\D({\mr x},{\mr y})$ is $G$-invariant, we conclude that $g{\cdot}\mrC=\mrC$.
%   But $\mrD$ is union of such equivalence classes.
%   Then $\mrD=g{\cdot}\mrD$.
% \end{proof}
% However it is not true in general, as the following example shows.

% \begin{example}\label{ex_H_neq_acleq}
%   Let $T_{\rm dlo}\models\U$.
%   Let $\mrX=\grZ=\U$ and $\Delta=\{{\mr x}<{\gr z}\}$.
%   It is easy to see that there are plenty of $G$-syndetic $\BDelta(\grZ)$-formulas but there is no nontrivial $\BDelta(\grZ)$-formula with finite $G$-orbit.
%   Therefore $P$ is empty and $\Stab(P)=G$.
% \end{example}

\begin{comment}
The following normal subgroup of $G$ is particularly interesting

{
\def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
\def\ceq#1#2#3{\parbox[t]{8ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}

\ceq{\hfill G^0}{=}{\big\{g\in G\ :\ g{\cdot}\mrD=\mrD\textrm{ for every }G\textrm{-syndetic }\BDelta(\grZ)\textrm{-type-definable set }\mrD\big\}}.
}

Note that by Exercise~\ref{ex_syndetic_type_vs_formulas} we can replace type-definable with definable in the definition of $G^0$.

\begin{proposition}
  Assume the action of $G$ is regular.
  Let $K\le G$ be such that all $K$-orbits (that is, $K{\cdot}{\mr a}$, for ${\mr a}\in\mrX$) are $\BDelta(\grZ)$-type-definable.
  Then, if $K$ has finite index, $G^0\le K$.
\end{proposition}

\begin{proof}
  Let $g\in G^0$.
  As $K$ has finite index and the action is transitive $K{\cdot}{\mr a}$ is $G$-syndetic for every ${\mr a}\in\mrX$.
  Then $g{\cdot}K{\cdot}{\mr a}=K{\cdot}{\mr a}$.
  By regularity, $g{\cdot}K=K$, then $g\in K$.
\end{proof}

%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%
\section{An example}
  \def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
  \def\ceq#1#2#3{\parbox[t]{13ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}

% In this section $G=\Aut(\UDelta)$ and $\mrX=p_0(\U^{\mr x})$, for some $p_0({\mr x})\in S_\Delta(\grZ)$.
Let ${\mr y}$ be a variable of the same sort of ${\mr x}$.
Below $\BDelta(\grZ)$ may also denote $\LDelta_{{\rm\,qf},\,{\mr x},{\mr y}}(\grZ)$.
In this section a $\BDelta(\grZ)$-definable finite equivalence relation is a formula $\epsilon({\mr x}\,;{\mr y})\in\BDelta(\grZ)$ such that $\epsilon(\mrX\,;\mrX)$ is an equivalence relation with finitely many classes.
Note that when $G$ acts transitively on $\mrX$, equivalence classes of $G$-invariant finite equivalence relations are $G$-syndetic sets.
% \begin{remark}\label{rem_trans_action}
  % Assume that $G$ acts transitively on $\mrX$.
  Define
  
  \ceq{\hfill e({\mr x}\,;{\mr y})}{=}{\big\{\epsilon({\mr x}\,;{\mr y})\in\BDelta(\grZ)\ :\ G\textrm{-invariant, finite equivalence relation}\big\}}.

  The $e({\mr x}\,;{\mr y})$-equivalence classes are those defined by the types
  
  \ceq{\hfill q({\mr x})}{=}{\big\{\epsilon({\mr x}\,;{\mr a})\in\BDelta(\grZ)\ :\ G\textrm{-invariant, finite equivalence relation}\big\}.}

% \end{remark}

\begin{fact}
  Assume that $G$ acts transitively on $\mrX$.
  Let $\mrD$ be a $\BDelta(\grZ)$-definable set that intersects $\mrX$ and has finite $G$-orbit.
  Then $\mrD$ is $G$-syndetic.
\end{fact}

\begin{proof}
  Let $g_i{\cdot}\mrD$, for $i=1,\dots,n$, enumerate the $G$-orbit of $\mrD$.
  Define 

  \ceq{\hfill\epsilon({\mr x}\,;{\mr y})}{=}{\bigwedge_{i=1}^n\big[{\mr x}\in g_i{\cdot}\mrD\ \iff\ {\mr y}\in g_i{\cdot}\mrD\big]}

  Clearly, $\epsilon({\mr x}\,;{\mr y})$ is $G$-invariant.
  Pick any ${\mr a}\in\mrD$.  
  Then $\epsilon(\U^{\mr x};{\mr a})\subseteq\mrD$.
  As the action is transitive, $\epsilon(\U^{\mr x};{\mr a})$, and a fortiori $\mrD$, is $G$-syndetic.
\end{proof}

\end{comment}

\begin{comment}

\begin{corollary}
  Let $G=\Aut(\U/A)$.
  Let $\mrX=p(\U^{\mr x})$ where $p({\mr x})$ is a complete $\GDelta(A)$-type.
  Then for every $\BDelta(\grZ)$-definable set $\mrD$ that intersects $\mrX$ the following are equivalent
  \begin{itemize}
    \item [1.]  $\mrC\subseteq\mrD$ for some $\mrC\in\acl^\eq\!A$ that intersects $\mrX$
    \item [2.]  $\mrD$ is $G$-syndetic.
  \end{itemize}
\end{corollary}

\begin{proof}
  \ssf1$\IMP$\ssf2.
  Pick any ${\mr a}\in\mrC\cap\mrX$.
  We can assume that $\mrC=\epsilon(\U^{\mr x}\,;{\mr a})$ is an equivalence class of some finite equivalence relation $\epsilon({\mr x}\,;{\mr y})\in L(A)$ 
  As $G$ acts transitively on $\mrX$ the orbit of $\mrC$ coves $\mrX$.
  Therefore $\mrC\subseteq\mrD$, and a fortiori $\mrD$, is $G$-syndetic.

  \ssf2$\IMP$\ssf1.
  Let $Q$ be as in Lemma~\ref{lem_trans_action}.
  Pick any $q({\mr x})\in Q$.
  By syndeticity $q({\mr x})\proves{\mr x}\in g{\cdot}\mrD$ for some $g\in G$.
  Then $g^{-1}\!\cdot q({\mr x})\proves{\mr x}\in \mrD$.
  Pick any ${\mr a}\models g^{-1}\!\cdot q({\mr x})$.
  As $g^{-1}\!\cdot q({\mr x})\in Q$, by the second claim in the lemma and compactness,  $\epsilon(\U^{\mr x}\,;{\mr a})\subseteq\mrD$ for some finite equivalence relation $\epsilon({\mr x}\,;{\mr y})\in\GDelta(A)$.
\end{proof}
\end{comment}

%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Strong syndeticity}\label{strong_syndeticity}

% Unfortunately, syndeticity is not preserved under intersection.
% To obtain closure under intersection, we need to push the concept to a higher level of complexity.

A set $\mrD\subseteq\mrX$ is \emph{strongly $H$-syndetic\/} if for every finite $F\subseteq H$ the set $\cap\,F{\cdot}\mrD$ is syndetic (recall that $F{\cdot}\mrD$ stands for $\{h{\cdot}\mrD: h\in F\}$).
Dually, we say that $\mrD$ is \emph{weakly $H$-thick\/} if for some finite $F\subseteq H$ the set $\cup\,F{\cdot}\mrD$ is thick.
Again, the same properties may be attributed to formulas and types when every conjunction of formulas in the type has the property.

\noindent\llap{\textcolor{red}{\Large\warning}\kern1.5ex}\ignorespaces
In topological dynamic, strong syndedic sets are called \textit{thickly syndetic\/} and weak thickness is called \textit{piecewise syndetic.}
A terminology that defies my intuition.

\begin{lemma}\label{lem_strongly_syndetic}
  The intersection of two strongly $H$-syndetic sets is strongly $H$-syndetic.
\end{lemma}

\begin{proof}
  We may assume that all sets mentioned below are subsets of $\mrX$.
  Let ${\mr\D}$ and ${\mr\C}$ be strongly $H$-syndetic and let $C\subseteq H$ be an arbitrary finite set.
  It suffices to prove that $\mrB=\cap\, C{\cdot}({\mr\C}\cap{\mr\D})$ is $H$-syndetic. 
  Clearly $\mrB={\mr\C'}\cap{\mr\D'}$, where ${\mr\C'}=\cap\, C{\cdot}{\mr\C}$ and ${\mr\D'}=\cap\, C{\cdot}{\mr\D}$.
  Note that ${\mr\C'}$ and ${\mr\D'}$ are both strongly $H$-syndetic.
  In particular $\mrX=\cup\,F{\cdot}\mr\D'$ for some finite $F\subseteq H$.
  Note that
  
  \ceq{\hfill\cup\,F{\cdot}\mrB}{=}{\cup\,F\big[{\mr\C'}\ \cap\ {\mr\D'}\big]}

  \ceq{}{\supseteq}{\cup\,F\big[\big(\cap\, F{\cdot}{\mr\C'}\big)\ \cap\ {\mr\D'}\big]}
  
  \ceq{}{=}{ \big(\cap\, F{\cdot}{\mr\C'}\big)\ \cap\ \big(\cup\,F{\cdot}{\mr\D'}\big)}
  
  \ceq{}{=}{\cap\, F{\cdot}{\mr\C'}}
  
  As ${\mr\C'}$ is strongly $H$-syndetic, $\cap\, F{\cdot}{\mr\C'}$ is $H$-syndetic.
  Therefore $\cup\,F{\cdot}\mrB$ is also $H$-syndetic.
  The $H$-syndeticity of $\mrB$ follows.
\end{proof}

Define the following type

\ceq{\hfill\emph{${}^{\rm s}\kern-.2ex\gamma_H({\mr x})$}}{=}{\{\theta({\mr x})\in \BDelta({\grZ})\ :\ \theta({\mr x})\textrm{ is strongly }H\textrm{-syndetic}\}.}

Let $K=\Stab(Q)$ be the group introduced in Section~\ref{G0}.
As $\gamma_K({\mr x})$ is $G$-invariant and closed under conjunction, we may conclude that $K$-syndetic sets are strongly $G$-syndetic.
In symbols, $\gamma_K({\mr x})\subseteq{}^{\rm s}\kern-.2ex\gamma_G({\mr x})$.

\begin{corollary}\label{corol_str_gen}
  ${}^{\rm s}\kern-.2ex\gamma_H({\mr x})$ is finitely consistent, strongly $H$-syndetic, and $H$-invariant.
\end{corollary}

\begin{proof}
  The strong $H$-syndeticity is an immediate consequence of Lemma~\ref{lem_strongly_syndetic}.
  The finite consistency is a consequence of syndeticity. % , see Exercise~\ref{ex_gen_sat}.
  Finally, $H$-invariance is clear because any translate of a strongly $H$-syndetic formula is also strongly $H$-syndetic.
\end{proof}

\begin{corollary}\label{corol_q_w_pers}
  Let $p({\mr x})\subseteq L(\U)$.
  Then the following are equivalent
  \begin{itemize}
    \item [1.] ${}^{\rm s}\kern-.2ex\gamma_H({\mr x})\cup p({\mr x})$ is finitely consistent
    \item [2.] $p({\mr x})$ is weakly $H$-thick.
  \end{itemize}
\end{corollary}

\begin{proof}
  \ssf1$\IMP$\ssf2. Similar to Corollary~\ref{corol_q_pers}.
  Let $\theta({\mr x})$ be a conjunction of formulas in $p({\mr x})$.
  As ${}^{\rm s}\kern-.2ex\gamma_H({\mr x})\cup\{\theta({\mr x})\}$ is finitely consistent, it cannot be that $\neg\theta({\mr x})$ is strongly $H$-syndetic.
  From Fact~\ref{fact_fip}, we obtain that $\neg\theta({\mr x})$ not being strongly $H$-syndetic is equivalent to $\theta({\mr x})$ being weakly $H$-thick.

  \ssf2$\IMP$\ssf1. 
  Suppose $\mrD$ is strongly $H$-syndetic and $p({\mr x})\proves{\mr x}\notin\mrD$.
  From Fact~\ref{fact_fip}, $\mrD$ is not weakly $H$-thick, and $\neg$\ssf2 follows.
\end{proof}

% Note that 
% %from Corollary~\ref{corol_str_gen} and~\ref{corol_q_w_pers} 
% the $H$-translate of a weakly $H$-thick type is weakly $H$-thick.

\begin{exercise}
  Prove that the following are equivalent
  \begin{itemize}
    \item[1.] $\D$ is weakly $H$-thick
    \item[2.] $\D=\C\cap\B$ for some $H$-syndetic set $\B$ and some $H$-thick set $\C$.
  \end{itemize}
\end{exercise}

\begin{exercise}
  Prove that if $\C\cup\B$ is weakly $H$-thick then at least one of $\B$ and $\C$ is also weakly $H$-thick.
\end{exercise}

\begin{exercise}
  Show that $H$-syndetic sets need not be closed under intersection.
  Hint: find inspiration in Example~\ref{ex_cyclic_order}.
\end{exercise}

\begin{exercise}
  Prove that the following are equivalent
  \begin{itemize}
    \item [1.] $\D$ is weakly $H$-thick
    \item [2.] there is a non $H$-syndetic set $\C$ such that $\D\cup\C$ is syndetic.
  \end{itemize}
\end{exercise}

\begin{question}
  Let $H\trianglelefteq G$.
  Does strongly $G$-syndetic implies strongly $H$-syndetic or vice versa?
  In particular, does strongly $G$-syndetic implies $\Stab(Q)$-syndetic?
\end{question}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{The diameter of a Lascar type}\label{newelski}

As an application we prove an interesting property of the Lascar types.
Recall that $\Ll({\mr a}/A)$, the Lascar strong type of ${\mr a}\in\U^{\mr x}$, is the union of a chain of type-definable sets of the form $\big\{{\mr x}\ :\ d_A({\mr a},{\mr x})\le n\big\}$.
In this section we prove that $\Ll({\mr a}/A)$ is type-definable (if and) only this chain is finite.
In other words, only if the connected component of ${\mr a}$ in the Lascar graph has finite diameter.

It is convenient to address the problem in more general terms.
We work under Assumption~\ref{notation_GXphi} and also assume that $H\le G$ acts transitively on $\mrX$.
Let $C\subseteq H$ be a set of generators that is
\begin{itemize}
  \item[1.] symmetric i.e.\@ it contains the unit and is closed under inverse
  \item[2.] conjugacy invariant i.e.\@ $g\,Cg^{-1}=C$ for every $g\in H$
\end{itemize}

We define a discrete metric on $\mrX$.
For ${\mr a},{\mr b}\in\mrX$ let $d({\mr a},{\mr b})$ be the minimal $n$ such that ${\mr a}\in C^n{\mr b}$.
This defines a metric which is $H$-invariant by \ssf2.
The \emph{diameter\/} of a set $\mrC\subseteq\mrX$ is the supremum of $d({\mr a},{\mr b})$ for ${\mr a},{\mr b}\in\mrC$.

We are interested in sufficient conditions for $\mrX$ to have finite diameter.
The notions introduced in Section~\ref{strong_syndeticity} offer some hint.

\begin{proposition}\label{prop_wpers_finite_diameter}
  If $\mrX$ has a weakly thick subset of finite diameter, then $\mrX$ itself has finite diameter.
\end{proposition}

\begin{proof}
  Let $\mrC\subseteq\mrX$ be a weakly thick set of diameter $n$.
  Let $F\subseteq H$ be finite such that $\cup\,H{\cdot}\mrC$ is thick.
  We claim that also $\cup\,H{\cdot}\mrC$ has finite diameter.
  Let ${\mr a}\in\mrC$ be arbitrary.
  Let $m$ be larger than $d(h{\mr a}, k{\mr a})$ for all $h,k,\in H$.
  Now, let $h{\mr b}$ and $k{\mr c}$, for some $h,k,\in H$ and ${\mr b},{\mr c}\in\mrC$, be two arbitrary elements of $\cup\,H{\cdot}\mrC$.
  As $h\mrC$ and $k\mrC$ have the same diameter of $\mrC$, 

  \ceq{\hfill d(h{\mr b},\, k{\mr c})}{\le}{d(h{\mr b},\,h{\mr a})\ +\ d(h{\mr a},\, k{\mr a})\ +\ d(k{\mr a},\,k{\mr c})}

  \ceq{}{\le}{n+m+n.}

  This proves that $\cup\,H{\cdot}\mrC$ has finite diameter.
  Therefore, without loss of generality, we may assume that $\mrC$ itself is thick.
  
  By the transitivity of the action, any two elements of $\mrX$ are of the form $h{\mr a}$, $k{\mr a}$ for some $h,k\in H$ and some ${\mr a}\in\mrC$.
  By thickness, there are ${\mr c}\in\mrC\cap h\mrC$ and ${\mr d}\in\mrC\cap k\mrC$.
  Then 

  \ceq{\hfill d(h{\mr a},\, k{\mr a})}{\le}{d(h{\mr a},\,{\mr c})\ +\ d({\mr c},\, {\mr d})\ +\ d({\mr d},\,k{\mr a})}

  \ceq{}{\le}{n+n+n.}

  Therefore the diameter of $\mrX$ does not exceed $3n$.
\end{proof}

\begin{theorem}\label{thm_newelski}
  Suppose that $\mrX$ and the sets ${\mr\X_n}=C^n{\mr a}$, for some ${\mr a}\in\mrX$, are type-definable.
  Then $\mrX$ has finite diameter.
\end{theorem}

\begin{proof}
  By Proposition~\ref{prop_wpers_finite_diameter}, it suffices to prove that ${\mr\X_n}$ is weakly thick.
  By Corollary~\ref{corol_q_w_pers} it suffices to show that for some $n$ the type ${}^{\rm s}\kern-.2ex\gamma_G({\mr x})$ is finitely satisfiable in ${\mr\X_n}$.
  Suppose not.
  Let $\psi_n({\mr x})\in{}^{\rm s}\kern-.2ex\gamma_G$ be a formula that is not satisfied in $\mr\X_n$.
  Then the type $p({\mr x})=\{\psi_n({\mr x}):n\in\omega\}$ is finitely consistent.
  From the type-definablity of $\mrX$ it follows that $p({\mr x})$ has a realization in $\mrX$.
  As this realization belongs to some ${\mr\X_n}$ we contradict the definition of $\psi_n({\mr x})$.
\end{proof}

% \ceq{\hfill p_n({\mr\X},{\mr\X})}{=}{\{\<{\mr a},{\mr b}\>\in{\mr\X^2}\ :\ {\mr a}\in K^n{\mr b}\}}

% Below we write ${\mr x}\in C^n{\mr y}$ for the type $p_n({\mr x},{\mr y})$ and ${\mr x}\in G\,{\mr y}$ for the disjunction of all these types (n.b.\@ an infinite disjunction of types need not be a type).

\begin{example}\label{ex_newelski}
  Let $\Delta=L_{{\mr x}\,{\gr z}}(A)$, where $|{\gr z}|=\omega$.
  Let $\mrX=\Ll({\mr a}/A)$ and $\grZ=\U^{\gr z}$.
  Assume that $\mrX$ is type definable.
  Let $G=\Aut(\U/A)$.
  Let $C\subseteq G$ be the set of automorphisms that fix a model containing $A$.
  Then the group $H$ generated by $C$ is $\Autf(\U/A)$ and $H\cdot{\mr a}=\mrX$.
  
  Then $d({\mr a},{\mr b})$ coincides with the distance in the Lascar graph.
  As shown in Proposition~\ref{prop_Lascar_distance_type_def} the sets $C^n\cdot{\mr a}=\{{\mr x}:d({\mr x},{\mr a})\le n\}$ are type definable.
  Then from Theorem~\ref{thm_newelski} it follows that $\Ll({\mr a}/A)$ is type definable (if and) only if it has finite diameter.
\end{example} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{A tamer landscape}\label{tame_landscape}

Under suitable assumptions -- e.g.\@ stability, see Theorem~\ref{thm_thick_finsat} -- some  notions introduced in this chapter coalesce, and we are left with a tamer landscape.
In general, we have the following.


\begin{theorem}\label{thm_coalesce}
  Assume 
  \begin{itemize}
    \item[1.] $H$-thick $\BDelta({\grZ})$-sets are $H$-wide.
  \end{itemize}\smallskip

  Then the following hold
  \begin{itemize}
    \item[2.] $H$-syndetic $\BDelta({\grZ})$-sets are closed under intersection 
    \item[3.] $H$-syndetic $\BDelta({\grZ})$-sets are strongly $H$-syndetic
    \item[4.] weakly $H$-thick $\BDelta({\grZ})$-sets are $H$-thick
    \item[5.] $H$-syndetic $\BDelta({\grZ})$-sets are $H$-wide.
  \end{itemize}
\end{theorem}

\begin{proof}
  Clearly \ssf2$\IFF$\ssf3$\IFF$\ssf4.

  \ssf1$\IMP$\ssf2.
  Let $\mrC$ and $\mrD$ be $H$-syndetic $\BDelta({\grZ})$-sets.
  Suppose for a contradiction that $\mrC\cap\mrD$ is not $H$-syndetic.
  Then $\neg(\mrC\cap\mrD)$ is $H$-thick.
  By \ssf1 and Theorem~\ref{thm_syndetic_invariant2} there is a $H$-invariant type $p({\mr x})\in S_\Delta(\grZ)$ such that $p({\mr x})\proves{\mr x}\notin\mrC\cap\mrD$.
  By completeness either $p({\mr x})\proves{\mr x}\notin\mrC$ or $p({\mr x})\proves{\mr x}\notin\mrD$.
  This is a contradiction because by Theorem~\ref{thm_syndetic_invariant} $p({\mr x})\proves{\mr x}\in\mrC$ and $p({\mr x})\proves{\mr x}\in\mrD$.

  \ssf1$\IMP$\ssf5.
  By~\ssf{3}, because strongly $H$-syndetic sets are $H$-thick.
  %
  % \ssf4$\IMP$\ssf1.
  % Note that, by \ssf3, the type ${}^{\rm s}\kern-.2ex\gamma_G({\mr x})$ coincides with $\gamma_G({\mr x})$, in particular $\gamma_G({\mr x})$ is finitely consistent.
  % Let $\mrD$ be a $H$-thick $\BDelta({\grZ})$-set.
  % We show that $\gamma_G({\mr x})={}^{\rm s}\kern-.2ex\gamma_G({\mr x})$ is finitely satisfiable in $\mrX\cap\mrD$.
  % Then, by \ssf4 and Corollary~\ref{corol_q_w_pers}, any global extension of $\gamma_G({\mr x})\cup\{{\mr x}\in\mrD\}$ witness \ssf2 of Theorems~\ref{thm_syndetic_invariant2}.
  % Suppose not, then $\gamma_G({\mr x})\proves {\mr x}\notin\mrD$.
  % Therefore $\neg\mrD$ is $H$-syndetic, contradicting the consistency of ${}^{\rm s}\kern-.2ex\gamma_G({\mr x})$.
\end{proof}

% \begin{assumption}\label{notation_2}
%   For $H$, $\mrX$, $\grZ$ and $\Delta$ as in Assumption~\ref{notation_GXphi} we also require that the equivalent conditions in Theorem~\ref{thm_coalesce} hold.
% \end{assumption}

% \begin{remark}\label{rem_coalesce} 
%   Assume that conditions \ssf1 in Theorem~\ref{thm_coalesce} holds.
%   Then the types $\gamma_H({\mr x})$ and ${}^{\rm s}\kern-.2ex\gamma_H({\mr x})$ coincide and are finitely consistent.
%   Also, $H$-invariant global types exist.
%   It is also worth mentioning that every positive Boolean combination of $H$-syndetic sets is $H$-syndetic.
% \end{remark}

% The landscape is further simplified when also the following condition obtains.
% We say that $H$ is \emph{stationary\/} if any two $H$-wide $\BDelta({\grZ})$-sets have nonempty intersection.

% \begin{fact}
%   Assume \ssf1 of Theorem~\ref{thm_coalesce}.
%   Then, when $H$ is stationary, for every $\mrD\in\BDelta(\grZ)$, the following are equivalent
%   \begin{itemize}
%     \item[1.] $\mrD$ is $H$-syndetic
%     \item[2.] $\mrD$ is $H$-thick.
%   \end{itemize}\smallskip
% \end{fact}

% \begin{fact}
%   Assume \ssf1 of Theorem~\ref{thm_coalesce}.
%   Then the following are equivalent
%   \begin{itemize}
%     \item[1.] $H$ is stationary
%     \item[2.] the intersection of any two $H$-wide $\BDelta({\grZ})$-sets is $H$-wide.
%   \end{itemize}
% \end{fact}

% \begin{fact}
%   Assume that $G$ acts transitively and that all types in $P$ are realized in $\mrX$.
%   Then, when $H$ is stationary and \ssf1 of Theorem~\ref{thm_coalesce} holds, $P=Q$.
% \end{fact}

% \begin{proof}
%   It suffices to prove that   
% \end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Definable groups}\label{definablegroups}

\def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
\def\ceq#1#2#3{\parbox[t]{25ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}

In this section we assume that $\grZ$ and $\mrX$ are type-definable.
Moreover we assume that $\grZ$ is a group that acts on $\mrX$.
The group operations and the group action are assumed definable.
We use the symbol $\,\cdot\,$ for both the group multiplication and the group action.
Let $\Psi\subseteq L_{\mr x}(\U)$.
In this section $\Delta$ contains formulas $\phi({\mr x}\,;{\gr z})$ of the form  $\psi({\gr z^{-1}}\!\cdot{\mr x})$ for $\psi({\mr x})\in\Psi$.
The sets $\phi(\mrX\,;\grZ)$ are $\grZ$-invariant.
We write ${\gr 1}$ for the identity of $\grZ$.
Note that $\phi(\mrX\,;{\gr g})={\gr g}\cdot\phi(\mrX\,;{\gr 1})$.

Note that as $\mrX$ and $\grZ$ are assumed to be type-definable, $\UDelta$ is a saturated $\LDelta$-structure.
In this section \emph{$G$\/} $=\Aut(\UDelta)$.
It is worth noticing that automorphisms of $\UDelta$ need not preserve the group operations nor the group action.

To each ${\gr h}\in\grZ$ we associate the $\LDelta$-automorphism $\<{\mr a}\,;{\gr g}\>\mapsto\<{\gr h}{\cdot}{\mr a}\,;{\gr h}{\cdot}{\gr g}\>$.
Therefore $\grZ$ is, up to isomorphism, a subgroup of $G$.
For any ${\gr g}\in\grZ$, the orbit of $\phi(\mrX\,;{\gr g})$ under the action of $\grZ$ is $\{\phi(\mrX\,;{\gr h}) : {\gr h}\in\grZ\}$.
Therefore it coincides with the orbit under the action of $G$.
% The following fact follows immediately.

% \begin{fact}
%   For every  $\BDelta(\grZ)$-type-definable set $\mrD$ the following are 
%   \begin{itemize}
%     \item [1.] the $G$-orbit of $\mrD$ is bounded
%     \item [2.] the $\grZ$-orbit of $\mrD$ is bounded.
%   \end{itemize}
% \end{fact}


% In the applications $H$ will be either $\Autf(\UDelta)$ or $\Aut(\UDelta/M)$.

% \def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
% \def\ceq#1#2#3{\parbox[t]{6ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}

% \begin{proposition}\label{prop_Gsyndetic_thick}
%   Let $\mrD$ be a $\BDelta(\grZ)$-definable set.
%   Assume that $\gamma_H({\mr x})$ is consistent.
%   Then \ssf1$\IMP$\ssf2 holds, where
%   \begin{itemize}
%     \item [1.] $\mrD$ is $\grZ$-syndetic
%     \item [2.] ${\gr g}{\cdot}\mrD$ is $H$-wide for every ${\gr g}\in\grZ$.
%   \end{itemize}
% \end{proposition}

% We will revisit this proposition under the assumption of stability and with $\Autf(\U^\Delta)$ for $H$~--~then the consistency of $\gamma_H({\mr x})$ is guaranteed, and also the converse implication holds.
% See Theorem~\ref{thm_Gsyndetic_thick}.\vspace*{-0.5\baselineskip}
% %
% \begin{proof}
%   Let ${\gr g}$ be given.
%   If $\mrD$ is $\grZ$-syndetic, then so is ${\gr g}{\cdot}\mrD$.
%   Then ${\gr g}{\cdot}\mrD$ is, a fortiori, $G$-syndetic.
%   Therefore \ssf2 follows from Proposition~\ref{prop_Gsyndetic_Hthick}.
% \end{proof}

We also consider the action an arbitrary subgroup $H\le G$.
We write \emph{$({\gr g})_H$\/} for the $H$-orbit of ${\gr g}$, that is, the set $\{f({\gr g})\ :\ f\in H\}$.

\begin{proposition}\label{prop_wideHcojugate}
  Let $\theta({\mr x}\,;{\gr z_1},\dots,{\gr z_n})$ be a Boolean combination of formulas $\phi_i({\mr x}\,;{\gr z_i})$ for some $\phi_i({\mr x}\,;{\gr z})\in\Delta$.
  Then for every ${\gr h_i}\in({\gr g_i})_H$ the following are equivalent
  \begin{itemize}
    \item [1.] $\theta({\mr x}\,;{\gr g_1},\dots,{\gr g_n})$ is $H$-wide
    \item [2.] $\theta({\mr x}\,;{\gr h_1},\dots,{\gr h_n})$ is $H$-wide.
  \end{itemize}
\end{proposition}

\begin{proof}
  Without loss of generality we can assume that only conjunctions occur in $\theta({\mr x}\,;{\gr g_1},\dots,{\gr g_n})$.
  Let ${\mr\C_i}=\phi_i(\mrX\,;{\gr 1})$.
  Then \ssf1 says that $\mrC={\gr g_1}{\cdot}{\mr\C_1}\cap\dots\cap{\gr g_n}{\cdot}{\mr\C_n}$ is $H$-wide.
  Let $f_i\in H$ be such that ${\gr h_i}=f_i({\gr g_i})$.
  Then, by Corollary~\ref{corol_intersectionGwide} also the intersection of the sets $f_i[\mrC]$ is $H$-wide.
  A fortiori the intersection of the sets $f_i[{\gr g_i}{\cdot}{\mr\C_i}]$ is $H$-wide.
  As $f_i[{\gr g_i}{\cdot}{\mr\C_i}]=f_i({\gr g_i}){\cdot}{\mr\C_i}$ the equivalence follows.
\end{proof}

Note that applying the theorem to  $H=\grZ$ we obtain that if $\theta({\mr x}\,;{\gr 1},\dots,{\gr 1})$ is $\grZ$-wide then $\theta({\mr x}\,;{\gr g_1},\dots,{\gr g_n})$ is $\grZ$-wide for every ${\gr g_1},\dots,{\gr g_n}\in\grZ$.
Below we prove a generalization of this. 

If $\grA\subseteq\grZ$, we write \emph{$\<\grA\>$} for the subgroup generated by $\grA$.

\begin{proposition}\label{prop_stabilizer1}
  \def\medrel#1{\parbox[t]{5ex}{$\displaystyle\hfil #1$}}
  \def\ceq#1#2#3{\parbox[t]{15ex}{$\displaystyle #1$}\medrel{#2}{$\displaystyle #3$}}
  Assume $H{\cdot}\grZ=\grZ{\cdot}H$.
   Let $\theta({\mr x}\,;{\gr z_1},\dots,{\gr z_n})$ be a Boolean combination of formulas $\phi_i({\mr x}\,;{\gr z_i})$ for some $\phi_i({\mr x}\,;{\gr z})\in\Delta$.
  Let ${\gr g}\in\grZ$ be arbitrary.
  Assume that $\theta({\mr x}\,;{\gr 1},\dots,{\gr 1})$ is $H$-wide.
  Then $\theta({\mr x}\,;{\gr h_1},\dots,{\gr h_n})$ is $H$-wide for every 
  
  \ceq{\hfill{\gr h_1},\dots,{\gr h_n}}{\in}{\Big\<\bigcup_{{\gr g}\in\grZ}({\gr g})_H^{-1}\!\cdot({\gr g})_H\Big\>.}
\end{proposition}

\begin{proof}
  We proceed by induction on the number of factors of the form ${\gr a^{-1}}\!\cdot{\gr b}$, for some ${\gr a},{\gr b}\in({\gr g})_H$, that occur in ${\gr h_1},\dots,{\gr h_n}$.
  Without loss of generality we can assume that only conjunctions occur in $\theta({\mr x}\,;{\gr g_1},\dots,{\gr g_n})$.
  Let ${\mr\C_i}=\phi_i(\mrX\,;{\gr 1})$.
  Assume inductively that ${\gr h_1}{\cdot}{\mr\C_1}\cap\dots\cap{\gr h_n}{\cdot}{\mr\C_n}$ is $H$-wide.
  Pick two arbitrary ${\gr a},{\gr b}\in({\gr g})_H$.
  By Remark~\ref{rem_invariance_normalsubg} 
  
  \hspace*{7ex}${\gr a}\cdot{\mr\C_1}\ \cap\ {\gr a}\cdot{\gr h_1^{-1}}\!\cdot{\gr h_2}\cdot{\mr\C_2}\ \cap\ \dots\dots\ \cap\ {\gr a}\cdot{\gr h_1^{-1}}\!\cdot{\gr h_n}\cdot{\mr\C_n}$ is $H$-wide.
  
  By Proposition~\ref{prop_wideHcojugate}, in this intersection we can replace ${\gr a}\cdot{\mr\C_1}$ by ${\gr b}\cdot{\mr\C_1}$.
  Then finally 

  \hspace*{7ex}${\gr h_1}\cdot{\gr a^{-1}}\!\cdot{\gr b}\cdot{\mr\C_1}\ \cap\ {\gr h_2}\cdot{\mr\C_2}\ \cap\ \dots\dots\ \cap\ {\gr h_n}\cdot{\mr\C_n}$ is $H$-wide.
\end{proof}

% In Section~\ref{stable_groups} we will give an interesting characterization of this group under the assumption of stability.

\begin{comment}
\section{Tentative}

In this section we work over a given $M\preceq\U^\Delta$.

Let $\mrD\subseteq\mrX$ be definable by some $p({\mr x})\subseteq\BDelta(M)$.
We say that $\mrD$ has 

A formula $\psi({\mr x})\in L$ is \emph{symmetric\/} if $\psi({\gr g}\cdot{\mr x})\iff\psi({\gr g^{-1}}\!\cdot{\mr x})$ holds for every ${\gr g}\in\grZ$.
We say that $\Psi\subseteq L_{\mr x}$ is symmetric if every formula in $\Psi$ is symmetric.
When $\Psi$ is symmetric, the map $\iota:\<{\mr a}\,;{\gr g}\>\mapsto\<{\mr a}\,;{\gr g^{-1}}\>$ is an automorphism of $\U^\Delta$.
As $H$ is normal and $\iota$ is an involution, $\iota\,H=H{\cdot}\iota$ and $H\cup\iota\,H$ is a subgroup of $G$.
In particular, if $f\in H$ and ${\gr g}\in\grZ$ then $f({\gr g^{-1}})=f'({\gr g})^{\gr -1}$ for some $f'\in H$.
We write \emph{$K$\/} for $H\cup\iota\,H$.

When $\Psi$ is symmetric, we can strengthen Fact~\ref{prop_wideHcojugate} as follows.

\begin{fact}\label{prop_wideHcojugate_symm}
  Let $\mrD=\phi(\mrX\,;{\gr 1})$ for some $\phi({\mr x}\,;{\gr z})\in\pmDelta$.
  For $i=1,2$ let ${\gr h_i}\in({\gr g_i})_K$. 
  Then \ssf1 and \ssf2 of Fact~\ref{prop_wideHcojugate} are equivalent
\end{fact}

\begin{proof}
  Let $f_i\in K$ be such that ${\gr h_i}\in f_i{\gr g_i})$.
  By Remark~\ref{rem_invariance_normalsubg} it suffices to consider the case $f_1\in H$ and $f_2\in\iota\,H$.
  Then $f_2({\gr g_2})=f_3({\gr g_2^{-1}})$.
  By Fact~\ref{prop_wideHcojugate}, \ssf2 is equivalent to claiming that ${\gr g_1}{\cdot}\mrD\ \cap\ {\gr g_2^{-1}}{\cdot}\mrD$ is $H$-wide. 
  By symmetry ${\gr g_2^{-1}}{\cdot}\mrD={\gr g_2}{\cdot}\mrD$, so the fact follows.
\end{proof}


For any $\grW\subseteq\grZ$, we write $\<\grW\>$ for the subgroup generated by $\grW$.

\begin{proposition}
  Assume $\Psi$ is symmetric.
  Let $\mrD=\phi(\mrX\,;{\gr 1})$ for some $\phi({\mr x}\,;{\gr z})\in\pmDelta$.
  Let ${\gr g}$ be such that $\mrD\cap{\gr g}{\cdot}\mrD$ is $H$-wide.
  Then $\mrD\cap{\gr g'}{\cdot}\mrD$ is $H$-wide for every ${\gr g'}\in\<\,({\gr g})_{K}^2\>$.
\end{proposition}

\begin{proof}
  Assume inductively that $\mrD\cap{\gr g'}{\cdot}\mrD$ is $H$-wide, where ${\gr g'}\in\<\,({\gr g})_{K}^2\>$.
  Pick two arbitrary ${\gr a},{\gr b}\in({\gr g})_K$.
  We claim that $\mrD\cap{\gr a}{\cdot}{\gr b}{\cdot}{\gr g'}{\cdot}\mrD$ is $H$-wide.
  From the induction hypothesis it follows that ${\gr b}{\cdot}\mrD\cap{\gr b}{\cdot}{\gr g'}{\cdot}\mrD$ is $H$-wide.
  By Fact~\ref{prop_wideHcojugate_symm}, ${\gr a^{-1}}{\cdot}\mrD\cap{\gr b}{\cdot}{\gr g'}{\cdot}\mrD$ is $H$-wide and the claim follows.
\end{proof}
\end{comment}


%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Notes and references}

In Example~\ref{ex_newelski} we prove a theorem of Newelski's~\cite{Newelski}.
The original proof is rather long and complex.
A simplified proof (also due, reportedly, to Newelski) appears in~\cite{Pelaez}*{Section 3.3} and~\cite{Casanovas}*{Chapter 9}.
The proof here is a streamlined and generalized version of the latter~--~inspired by~\cite{Z16}.

\begin{biblist}[]\normalsize
\bib{Casanovas}{book}{
  author={Casanovas, Enrique},
  title={Simple theories and hyperimaginaries},
  series={Lecture Notes in Logic},
  volume={39},
  publisher={Cambridge
  University Press},
  date={2011},
  % pages={xiv+169},
  % isbn={978-0-521-11955-9},
  % review={\MR{2814891}},
  % doi={10.1017/CBO9781139003728},
}\smallskip
\bib{CK}{article}{
  author={Chernikov, Artem},
  author={Kaplan, Itay},
  title={Forking and dividing in ${\rm NTP}_2$ theories},
  journal={J. Symbolic Logic},
%  volume={77},
  date={2012},
%  number={1},
%  pages={1--20},
%  issn={0022-4812},
%  review={\MR{2951626}},
%  doi={10.2178/jsl/1327068688},
}\smallskip
\bib{Hr}{article}{
  label={Hr},
  author={Hrushovski, Ehud},
  title={Stable group theory and approximate subgroups},
  journal={J. Amer. Math. Soc.},
  volume={25},
  date={2012},
  number={1},
  pages={189--243},
  % issn={0894-0347},
  % doi={10.1090/S0894-0347-2011-00708-S},
}\smallskip
\bib{Newelski}{article}{
  author={Newelski, Ludomir},
  title={The diameter of a Lascar strong type},
  journal={Fund. Math.},
%  volume={176},
  date={2003},
%  number={2},
%  pages={157--170},
%  issn={0016-2736},
%  review={\MR{1971306}},
%  doi={10.4064/fm176-2-4},
}\smallskip
\bib{Pelaez}{book}{
  author={Pel\'aez, Rodrigo},
  title={\href{http://www.ub.edu/modeltheory/documentos/ThesisRPP.pdf}{About the Lascar group}},
  series={PhD Thesis},
  publisher={Universitat de Barcelona, Departament de L\'ogica, Hist\'oria i Filosofia de la Ci\'encia},
  date={2008},
  }\smallskip
\bib{Z16}{article}{
  author={Zambella, Domenico},
  title={On the diameter of Lascar strong types after Ludomir Newelski},
  conference={
  title={A tribute to Albert Visser},
  },
  book={
  % series={Tributes},
  % volume={30},
  publisher={Coll. Publ., [London]},
  },
  date={2016},
  status={\href{https://arxiv.org/abs/1605.00218}{arXiv:1605.00218}},
  %  pages={231--236},
  %  review={\MR{3559880}},
}\smallskip
\end{biblist}

  